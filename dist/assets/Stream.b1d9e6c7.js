import{m as Tt,l as Ke,h as St,r as Me,i as Ct,k as _t,n as Rt,p as le,j as Ae,c as Lt,o as Pt,a as at,q as Ot,s as It,t as jt,u as Dt,M as Mt}from"./index.5179c8da.js";import{c as kt,d as wt,a as Ft,s as Nt,b as Bt,e as Ut,g as Gt}from"./lifecycle.d93ed3aa.js";var Kt=Ke.exports,ot=void 0,Vt=Kt(Tt()),Yt=function(Z){return(0,Vt.default)("propTypes",Z)},Ht=Yt;ot=Ht;var Wt=Ke.exports,lt=void 0,zt=Wt(St()),$t=Me.exports,Xt=function(G){(0,zt.default)(Z,G);function Z(){return G.apply(this,arguments)||this}var P=Z.prototype;return P.render=function(){return null},Z}($t.Component),Zt=function(Z){return Xt},Jt=Zt;lt=Jt;var ut=Ke.exports,dt=void 0,He=Me.exports;ut(Ct());ut(_t());var Qt=function(Z){return Z},qt=function(Z,P,E){return E===void 0&&(E=Qt),function(e){var r,h,s=function(_){return Z(_)?(r=r||(0,He.createFactory)(P(e)),r(_)):(h=h||(0,He.createFactory)(E(e)),h(_))};return s}},er=qt;dt=er;function ke(G,Z){if(!(G instanceof Z))throw new TypeError("Cannot call a class as a function")}function Ce(G){return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},Ce(G)}function tr(G,Z){if(Ce(G)!=="object"||G===null)return G;var P=G[Symbol.toPrimitive];if(P!==void 0){var E=P.call(G,Z||"default");if(Ce(E)!=="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(G)}function rr(G){var Z=tr(G,"string");return Ce(Z)==="symbol"?Z:String(Z)}function We(G,Z){for(var P=0;P<Z.length;P++){var E=Z[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(G,rr(E.key),E)}}function we(G,Z,P){return Z&&We(G.prototype,Z),P&&We(G,P),Object.defineProperty(G,"prototype",{writable:!1}),G}function Ee(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function nr(G,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(Z&&Z.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),Z&&Rt(G,Z)}function ir(G,Z){if(Z&&(Ce(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(G)}function De(G){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)},De(G)}function ze(G,Z,P,E,e,r,h){try{var s=G[r](h),A=s.value}catch(_){P(_);return}s.done?Z(A):Promise.resolve(A).then(E,e)}function Te(G){return function(){var Z=this,P=arguments;return new Promise(function(E,e){var r=G.apply(Z,P);function h(A){ze(r,E,e,h,s,"next",A)}function s(A){ze(r,E,e,h,s,"throw",A)}h(void 0)})}}function sr(G){if(Array.isArray(G))return G}function ar(G,Z){var P=G==null?null:typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(P!=null){var E,e,r,h,s=[],A=!0,_=!1;try{if(r=(P=P.call(G)).next,Z===0){if(Object(P)!==P)return;A=!1}else for(;!(A=(E=r.call(P)).done)&&(s.push(E.value),s.length!==Z);A=!0);}catch(g){_=!0,e=g}finally{try{if(!A&&P.return!=null&&(h=P.return(),Object(h)!==h))return}finally{if(_)throw e}}return s}}function $e(G,Z){(Z==null||Z>G.length)&&(Z=G.length);for(var P=0,E=new Array(Z);P<Z;P++)E[P]=G[P];return E}function or(G,Z){if(!!G){if(typeof G=="string")return $e(G,Z);var P=Object.prototype.toString.call(G).slice(8,-1);if(P==="Object"&&G.constructor&&(P=G.constructor.name),P==="Map"||P==="Set")return Array.from(G);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return $e(G,Z)}}function lr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ur(G,Z){return sr(G)||ar(G,Z)||or(G,Z)||lr()}var ct={exports:{}},ft={exports:{}};(function(G){function Z(P){return G.exports=Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},G.exports.__esModule=!0,G.exports.default=G.exports,Z(P)}G.exports=Z,G.exports.__esModule=!0,G.exports.default=G.exports})(ft);(function(G){var Z=ft.exports.default;function P(){G.exports=P=function(){return E},G.exports.__esModule=!0,G.exports.default=G.exports;var E={},e=Object.prototype,r=e.hasOwnProperty,h=Object.defineProperty||function(R,O,j){R[O]=j.value},s=typeof Symbol=="function"?Symbol:{},A=s.iterator||"@@iterator",_=s.asyncIterator||"@@asyncIterator",g=s.toStringTag||"@@toStringTag";function v(R,O,j){return Object.defineProperty(R,O,{value:j,enumerable:!0,configurable:!0,writable:!0}),R[O]}try{v({},"")}catch{v=function(j,D,w){return j[D]=w}}function u(R,O,j,D){var w=O&&O.prototype instanceof S?O:S,F=Object.create(w.prototype),B=new C(D||[]);return h(F,"_invoke",{value:b(R,j,B)}),F}function f(R,O,j){try{return{type:"normal",arg:R.call(O,j)}}catch(D){return{type:"throw",arg:D}}}E.wrap=u;var m={};function S(){}function i(){}function p(){}var y={};v(y,A,function(){return this});var o=Object.getPrototypeOf,l=o&&o(o(T([])));l&&l!==e&&r.call(l,A)&&(y=l);var t=p.prototype=S.prototype=Object.create(y);function n(R){["next","throw","return"].forEach(function(O){v(R,O,function(j){return this._invoke(O,j)})})}function c(R,O){function j(w,F,B,M){var N=f(R[w],R,F);if(N.type!=="throw"){var I=N.arg,X=I.value;return X&&Z(X)=="object"&&r.call(X,"__await")?O.resolve(X.__await).then(function($){j("next",$,B,M)},function($){j("throw",$,B,M)}):O.resolve(X).then(function($){I.value=$,B(I)},function($){return j("throw",$,B,M)})}M(N.arg)}var D;h(this,"_invoke",{value:function(F,B){function M(){return new O(function(N,I){j(F,B,N,I)})}return D=D?D.then(M,M):M()}})}function b(R,O,j){var D="suspendedStart";return function(w,F){if(D==="executing")throw new Error("Generator is already running");if(D==="completed"){if(w==="throw")throw F;return L()}for(j.method=w,j.arg=F;;){var B=j.delegate;if(B){var M=x(B,j);if(M){if(M===m)continue;return M}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(D==="suspendedStart")throw D="completed",j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);D="executing";var N=f(R,O,j);if(N.type==="normal"){if(D=j.done?"completed":"suspendedYield",N.arg===m)continue;return{value:N.arg,done:j.done}}N.type==="throw"&&(D="completed",j.method="throw",j.arg=N.arg)}}}function x(R,O){var j=O.method,D=R.iterator[j];if(D===void 0)return O.delegate=null,j==="throw"&&R.iterator.return&&(O.method="return",O.arg=void 0,x(R,O),O.method==="throw")||j!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+j+"' method")),m;var w=f(D,R.iterator,O.arg);if(w.type==="throw")return O.method="throw",O.arg=w.arg,O.delegate=null,m;var F=w.arg;return F?F.done?(O[R.resultName]=F.value,O.next=R.nextLoc,O.method!=="return"&&(O.method="next",O.arg=void 0),O.delegate=null,m):F:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,m)}function a(R){var O={tryLoc:R[0]};1 in R&&(O.catchLoc=R[1]),2 in R&&(O.finallyLoc=R[2],O.afterLoc=R[3]),this.tryEntries.push(O)}function d(R){var O=R.completion||{};O.type="normal",delete O.arg,R.completion=O}function C(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(a,this),this.reset(!0)}function T(R){if(R){var O=R[A];if(O)return O.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var j=-1,D=function w(){for(;++j<R.length;)if(r.call(R,j))return w.value=R[j],w.done=!1,w;return w.value=void 0,w.done=!0,w};return D.next=D}}return{next:L}}function L(){return{value:void 0,done:!0}}return i.prototype=p,h(t,"constructor",{value:p,configurable:!0}),h(p,"constructor",{value:i,configurable:!0}),i.displayName=v(p,g,"GeneratorFunction"),E.isGeneratorFunction=function(R){var O=typeof R=="function"&&R.constructor;return!!O&&(O===i||(O.displayName||O.name)==="GeneratorFunction")},E.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,p):(R.__proto__=p,v(R,g,"GeneratorFunction")),R.prototype=Object.create(t),R},E.awrap=function(R){return{__await:R}},n(c.prototype),v(c.prototype,_,function(){return this}),E.AsyncIterator=c,E.async=function(R,O,j,D,w){w===void 0&&(w=Promise);var F=new c(u(R,O,j,D),w);return E.isGeneratorFunction(O)?F:F.next().then(function(B){return B.done?B.value:F.next()})},n(t),v(t,g,"Generator"),v(t,A,function(){return this}),v(t,"toString",function(){return"[object Generator]"}),E.keys=function(R){var O=Object(R),j=[];for(var D in O)j.push(D);return j.reverse(),function w(){for(;j.length;){var F=j.pop();if(F in O)return w.value=F,w.done=!1,w}return w.done=!0,w}},E.values=T,C.prototype={constructor:C,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!O)for(var j in this)j.charAt(0)==="t"&&r.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=void 0)},stop:function(){this.done=!0;var O=this.tryEntries[0].completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var j=this;function D(I,X){return B.type="throw",B.arg=O,j.next=I,X&&(j.method="next",j.arg=void 0),!!X}for(var w=this.tryEntries.length-1;w>=0;--w){var F=this.tryEntries[w],B=F.completion;if(F.tryLoc==="root")return D("end");if(F.tryLoc<=this.prev){var M=r.call(F,"catchLoc"),N=r.call(F,"finallyLoc");if(M&&N){if(this.prev<F.catchLoc)return D(F.catchLoc,!0);if(this.prev<F.finallyLoc)return D(F.finallyLoc)}else if(M){if(this.prev<F.catchLoc)return D(F.catchLoc,!0)}else{if(!N)throw new Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return D(F.finallyLoc)}}}},abrupt:function(O,j){for(var D=this.tryEntries.length-1;D>=0;--D){var w=this.tryEntries[D];if(w.tryLoc<=this.prev&&r.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var F=w;break}}F&&(O==="break"||O==="continue")&&F.tryLoc<=j&&j<=F.finallyLoc&&(F=null);var B=F?F.completion:{};return B.type=O,B.arg=j,F?(this.method="next",this.next=F.finallyLoc,m):this.complete(B)},complete:function(O,j){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&j&&(this.next=j),m},finish:function(O){for(var j=this.tryEntries.length-1;j>=0;--j){var D=this.tryEntries[j];if(D.finallyLoc===O)return this.complete(D.completion,D.afterLoc),d(D),m}},catch:function(O){for(var j=this.tryEntries.length-1;j>=0;--j){var D=this.tryEntries[j];if(D.tryLoc===O){var w=D.completion;if(w.type==="throw"){var F=w.arg;d(D)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(O,j,D){return this.delegate={iterator:T(O),resultName:j,nextLoc:D},this.method==="next"&&(this.arg=void 0),m}},E}G.exports=P,G.exports.__esModule=!0,G.exports.default=G.exports})(ct);var je=ct.exports(),be=je;try{regeneratorRuntime=je}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=je:Function("r","regeneratorRuntime = r")(je)}var Pe=(typeof window>"u"||typeof window>"u"?"undefined":Ce(window))==="object",dr=Pe?document:{},cr=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];function Xe(G,Z){var P;function E(){for(var e=arguments.length,r=new Array(e),h=0;h<e;h++)r[h]=arguments[h];P&&clearTimeout(P),P=setTimeout(function(){G.apply(void 0,r),P=null},Z)}return E.cancel=function(){clearTimeout(P)},E}function Ie(G,Z){var P=0;return function(){var E=new Date().getTime();if(!(E-P<Z))return P=E,G.apply(void 0,arguments)}}var Ze=0,Je=0;function Ve(){var G=new Date().getTime();return G===Ze?1e3*G+ ++Je:(Ze=G,Je=0,1e3*G)}function Ue(){return Math.random().toString(36).substring(2)}function Qe(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(Z){return setTimeout(Z,G)})}function qe(){return new Date().getTime()}var fr={create:function(G){var Z={messagesCallback:null,bc:new BroadcastChannel(G)};return Z.bc.onmessage=function(P){Z.messagesCallback&&Z.messagesCallback(P.data)},Z},close:function(G){G.bc.close()},onMessage:function(G,Z){G.messagesCallback=Z},postMessage:function(G,Z){try{return G.bc.postMessage(Z,!1),Promise.resolve()}catch(P){return Promise.reject(P)}},canBeUsed:function(){return typeof BroadcastChannel=="function"},type:"broadcastChannel",averageResponseTime:function(){return 150},microSeconds:Ve},hr=function(){function G(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6e4;ke(this,G),this.ttl=Z,this.set=new Set,this.timeMap=new Map}return we(G,[{key:"has",value:function(Z){return this.set.has(Z)}},{key:"add",value:function(Z){this.timeMap.set(Z,qe()),this.set.add(Z),this._removeTooOldValues()}},{key:"clear",value:function(){this.set.clear(),this.timeMap.clear()}},{key:"_removeTooOldValues",value:function(){for(var Z=qe()-this.ttl,P=this.set[Symbol.iterator]();;){var E=P.next().value;if(!E||!(this.timeMap.get(E)<Z))return;this.timeMap.delete(E),this.set.delete(E)}}}]),G}();function ht(){var G;if(typeof window>"u")return null;try{G=window.localStorage,G=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return G}function pr(G,Z){var P=G,E=function(e){e.key===P&&Z(JSON.parse(e.newValue))};return window.addEventListener("storage",E),E}function et(){var G=ht();if(!G)return!1;try{var Z="__check";G.setItem(Z,"works"),G.removeItem(Z)}catch{return!1}return!0}var vr={create:function(G){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!et())throw new Error("\u274C localStorage cannot be used.");var P=Ue(),E=new hr(Z.removeTimeout),e={channelName:G,uuid:P,eMIs:E};return e.listener=pr(G,function(r){e.messagesCallback&&r.uuid!==P&&r.token&&!E.has(r.token)&&(r.data.time&&r.data.time<e.messagesCallbackTime||(E.add(r.token),e.messagesCallback(r.data)))}),e},close:function(G){var Z;Z=G.listener,window.removeEventListener("storage",Z)},onMessage:function(G,Z,P){G.messagesCallbackTime=P,G.messagesCallback=Z},postMessage:function(G,Z){return new Promise(function(P){var E=G.channelName,e={token:Ue(),time:new Date().getTime(),data:Z,uuid:G.uuid},r=JSON.stringify(e);ht().setItem(E,r);var h=document.createEvent("Event");h.initEvent("storage",!0,!0),h.key=E,h.newValue=r,window.dispatchEvent(h),P()})},canBeUsed:et,type:"localStorage",averageResponseTime:function(){var G=navigator.userAgent.toLowerCase();return G.includes("safari")&&!G.includes("chrome")?240:120},microSeconds:Ve},Fe=new Set,gr={create:function(G){var Z={name:G,messagesCallback:null};return Fe.add(Z),Z},close:function(G){Fe.delete(G)},onMessage:function(G,Z){G.messagesCallback=Z},postMessage:function(G,Z){return new Promise(function(P){return setTimeout(function(){Array.from(Fe).filter(function(E){return E.name===G.name}).filter(function(E){return E!==G}).filter(function(E){return!!E.messagesCallback}).forEach(function(E){return E.messagesCallback(Z)}),P()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Ve},Ne=[fr,vr];function mr(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(G.type){if(G.type==="simulate")return gr;var Z=Ne.find(function(E){return E.type===G.type});if(Z)return Z;throw new Error("\u274C Method ".concat(G.type," is not supported."))}var P=Ne.find(function(E){return E.canBeUsed()});if(!P)throw new Error("\u274C No method found ".concat(JSON.stringify(Ne.map(function(E){return E.type}))));return P}var yr=function(){function G(Z){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ke(this,G),this.name=Z,this.options=P,this.method=mr(this.options),this.closed=!1,this._isListening=!1,this._onMessageListener=null,this._addEventListeners={message:[],internal:[]},this._unSendMessagePromises=new Set,this._beforeClose=[],this._preparePromises=null,Ar(this)}return we(G,[{key:"postMessage",value:function(Z){if(this.closed)throw new Error("\u274C Cannot post message after channel has closed");return tt(this,"message",Z)}},{key:"postInternal",value:function(Z){return tt(this,"internal",Z)}},{key:"onmessage",get:function(){return this._onMessageListener},set:function(Z){var P={time:this.method.microSeconds(),fn:Z};nt(this,"message",this._onMessageListener),Z&&typeof Z=="function"?(this._onMessageListener=P,rt(this,"message",P)):this._onMessageListener=null}},{key:"addEventListener",value:function(Z,P){rt(this,Z,{time:this.method.microSeconds(),fn:P})}},{key:"removeEventListener",value:function(Z,P){nt(this,Z,this._addEventListeners[Z].find(function(E){return E.fn===P}))}},{key:"close",value:function(){var Z=this;if(!this.closed){this.closed=!0;var P=this._preparePromises?this._preparePromises:Promise.resolve();return this._onMessageListener=null,this._addEventListeners.message=[],P.then(function(){return Promise.all(Array.from(Z._unSendMessagePromises))}).then(function(){return Promise.all(Z._beforeClose.map(function(E){return E()}))}).then(function(){return Z.method.close(Z._state)})}}},{key:"type",get:function(){return this.method.type}},{key:"isClosed",value:function(){return this.closed}}]),G}();function tt(G,Z,P){var E={time:G.method.microSeconds(),type:Z,data:P};return(G._preparePromises?G._preparePromises:Promise.resolve()).then(function(){var e=G.method.postMessage(G._state,E);return G._unSendMessagePromises.add(e),e.catch().then(function(){return G._unSendMessagePromises.delete(e)}),e})}function Ar(G){var Z,P=G.method.create(G.name,G.options);(Z=P)&&typeof Z.then=="function"?(G._preparePromises=P,P.then(function(E){G._state=E})):G._state=P}function pt(G){return G._addEventListeners.message.length>0||G._addEventListeners.internal.length>0}function rt(G,Z,P){G._addEventListeners[Z].push(P),function(E){if(!E._isListening&&pt(E)){var e=function(h){E._addEventListeners[h.type].forEach(function(s){h.time>=s.time&&s.fn(h.data)})},r=E.method.microSeconds();E._preparePromises?E._preparePromises.then(function(){E._isListening=!0,E.method.onMessage(E._state,e,r)}):(E._isListening=!0,E.method.onMessage(E._state,e,r))}}(G)}function nt(G,Z,P){G._addEventListeners[Z]=G._addEventListeners[Z].filter(function(E){return E!==P}),function(E){if(E._isListening&&!pt(E)){E._isListening=!1;var e=E.method.microSeconds();E.method.onMessage(E._state,null,e)}}(G)}var br=function(){function G(P,E){var e=this;ke(this,G),this._channel=P,this._options=E,this.isLeader=!1,this.isDead=!1,this.token=Ue(),this._isApplying=!1,this._reApply=!1,this._unloadFns=[],this._listeners=[],this._intervals=[],this._duplicateListeners=function(){},this._duplicateCalled=!1,this._onBeforeDie=Te(be.mark(function h(){return be.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},h)}));var r=function(){var h=Te(be.mark(function s(){return be.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",e.die());case 1:case"end":return A.stop()}},s)}));return function(){return h.apply(this,arguments)}}();Pe&&(window.addEventListener("beforeUnload",r),window.addEventListener("unload",r),this._unloadFns.push(["beforeUnload",r]),this._unloadFns.push(["unload",r]))}var Z;return we(G,[{key:"applyOnce",value:function(){var P=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApplying)return this._reApply=!0,Promise.resolve(!1);this._isApplying=!0;var E=!1,e=function(r){r.context==="leader"&&r.token!==P.token&&(r.action==="apply"&&r.token>P.token&&(E=!0),r.action==="tell"&&(E=!0))};return this._channel.addEventListener("internal",e),Se(this,"apply").then(function(){return Qe(P._options.responseTime)}).then(function(){return E?Promise.reject(new Error):Se(P,"apply")}).then(function(){return Qe(P._options.responseTime)}).then(function(){return E?Promise.reject(new Error):Se(P)}).then(function(){return function(r){r.isLeader=!0;var h=function(s){s.context==="leader"&&s.action==="apply"&&Se(r,"tell"),s.context!=="leader"||s.action!=="tell"||r._duplicateCalled||(r._duplicateCalled=!0,r._duplicateListeners(),Se(r,"tell"))};return r._channel.addEventListener("internal",h),r._listeners.push(h),Se(r,"tell")}(P)}).then(function(){return!0}).catch(function(){return!1}).then(function(r){return P._channel.removeEventListener("internal",e),P._isApplying=!1,!r&&P._reApply?(P._reApply=!1,P.applyOnce()):r})}},{key:"awaitLeadership",value:function(){var P;return this._awaitLeadershipPromise||(this._awaitLeadershipPromise=(P=this).isLeader?Promise.resolve():new Promise(function(E){var e=!1;function r(){e||(e=!0,clearInterval(h),P._channel.removeEventListener("internal",s),E(!0))}P.applyOnce().then(function(){P.isLeader&&r()});var h=setInterval(function(){P.applyOnce().then(function(){P.isLeader&&r()})},P._options.fallbackInterval);P._intervals.push(h);var s=function(A){A.context==="leader"&&A.action==="death"&&P.applyOnce().then(function(){P.isLeader&&r()})};P._channel.addEventListener("internal",s),P._listeners.push(s)})),this._awaitLeadershipPromise}},{key:"onDuplicate",get:function(){return this._duplicateListeners},set:function(P){this._duplicateListeners=P}},{key:"onBeforeDie",get:function(){return this._onBeforeDie},set:function(P){this._onBeforeDie=P}},{key:"die",value:(Z=Te(be.mark(function P(){var E=this;return be.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDead){e.next=2;break}return e.abrupt("return");case 2:return this.isDead=!0,e.next=5,this.onBeforeDie();case 5:return this._listeners.forEach(function(r){return E._channel.removeEventListener("internal",r)}),this._intervals.forEach(function(r){return clearInterval(r)}),this._unloadFns.forEach(function(r){Pe&&window.removeEventListener(r[0],r[1])}),e.abrupt("return",Se(this,"death"));case 9:case"end":return e.stop()}},P,this)})),function(){return Z.apply(this,arguments)})}]),G}();function Se(G,Z){var P={context:"leader",action:Z,token:G.token};return G._channel.postInternal(P)}var Er=function(G){var Z=G.type,P=G.channelName,E=G.fallbackInterval,e=G.responseTime,r=G.emitOnAllTabs,h=G.callbacks,s=G.start,A=G.reset,_=G.pause,g=G.resume,v=new yr(P,{type:Z}),u=function(t,n){if(t._leaderElector)throw new Error("\u274C MessageChannel already has a leader-elector");var c=new br(t,n);return t._beforeClose.push(Te(be.mark(function b(){return be.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",c.die());case 1:case"end":return x.stop()}},b)}))),t._leaderElector=c,c}(v,{fallbackInterval:E,responseTime:e}),f={};f[u.token]=!1;var m=!1,S=!0,i=function(){return m};u.awaitLeadership().then(function(){m=!0}),v.addEventListener("message",function(t){var n=ur(t,2),c=n[0],b=n[1];switch(c){case"register":f[b]=!1;break;case"deregister":delete f[b];break;case"idle":p(b);break;case"active":y(b);break;case"emitIdle":h.onIdle();break;case"emitActive":h.onActive();break;case"start":s(!0);break;case"reset":A(!0);break;case"pause":_(!0);break;case"resume":g(!0)}});var p=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.token;f[t]=!0;var n=Object.values(f).every(function(c){return c});!S&&n&&(S=!0,i()?(h.onIdle(),r&&o("emitIdle")):o("idle"))},y=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.token;f[t]=!1;var n=Object.values(f).some(function(c){return!c});S&&n&&(S=!1,i()?(h.onActive(),r&&o("emitActive")):o("active"))};u.onDuplicate=Te(be.mark(function t(){return be.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.die();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},t)})),u.onBeforeDie=Te(be.mark(function t(){return be.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o("deregister");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},t)}));var o=function(){var t=Te(be.mark(function n(c){return be.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",v.postMessage([c,u.token]));case 1:case"end":return b.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),l=function(){var t=Te(be.mark(function n(){return be.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.die();case 2:return c.next=4,v.close();case 4:case"end":return c.stop()}},n)}));return function(){return t.apply(this,arguments)}}();return o("register"),{close:l,send:o,isLeader:i,idle:p,active:y,isAllIdle:function(){return S},setAllIdle:function(t){S=t}}};function xr(G){var Z=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var P,E=De(G);if(Z){var e=De(this).constructor;P=Reflect.construct(E,arguments,e)}else P=E.apply(this,arguments);return ir(this,P)}}var Ge=function(G){nr(P,Me.exports.Component);var Z=xr(P);function P(E){var e;if(ke(this,P),(e=Z.call(this,E)).state={idle:!1,oldDate:+new Date,lastActive:+new Date,lastIdle:null,idleTime:0,remaining:null,pageX:null,pageY:null},e.tId=null,e.eventsBound=!1,e.callbackRefs={},E.debounce>0&&E.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return E.debounce>0?e._onAction=Xe(E.onAction,E.debounce):E.throttle>0?e._onAction=Ie(E.onAction,E.throttle):e._onAction=E.onAction,E.eventsThrottle>0?e.handleEvent=Ie(e._handleEvent.bind(Ee(e)),E.eventsThrottle):e.handleEvent=e._handleEvent.bind(Ee(e)),E.startOnMount&&!E.startManually||(e.state.idle=!0),e._toggleIdleState=e._toggleIdleState.bind(Ee(e)),e.start=e.start.bind(Ee(e)),e.reset=e.reset.bind(Ee(e)),e.pause=e.pause.bind(Ee(e)),e.resume=e.resume.bind(Ee(e)),e.isIdle=e.isIdle.bind(Ee(e)),e.getRemainingTime=e.getRemainingTime.bind(Ee(e)),e.getElapsedTime=e.getElapsedTime.bind(Ee(e)),e.getLastActiveTime=e.getLastActiveTime.bind(Ee(e)),e.getLastIdleTime=e.getLastIdleTime.bind(Ee(e)),e.getTotalIdleTime=e.getTotalIdleTime.bind(Ee(e)),e.getTotalActiveTime=e.getTotalActiveTime.bind(Ee(e)),e}return we(P,[{key:"componentDidMount",value:function(){var E=this.props,e=E.startOnMount,r=E.startManually;this._setupTabManager(),r||(e?this.start():this._bindEvents())}},{key:"componentDidUpdate",value:function(E){E.debounce!==this.props.debounce&&this.props.debounce>0?(this._onAction.cancel&&this._onAction.cancel(),this._onAction=Xe(this.props.onAction,this.props.debounce)):E.throttle!==this.props.throttle&&this.props.throttle>0?(this._onAction.cancel&&this._onAction.cancel(),this._onAction=Ie(this.props.onAction,this.props.throttle)):(E.throttle&&this.props.throttle===0||E.debounce&&this.props.debounce===0)&&(this._onAction.cancel&&this._onAction.cancel(),this._onAction=this.props.onAction),E.eventsThrottle!==this.props.eventsThrottle&&(this._unbindEvents(),this.handleEvent=Ie(this._handleEvent.bind(this),this.props.eventsThrottle),this._bindEvents()),E.timeout!==this.props.timeout&&this.state.idle&&this.reset(),E.onActive!==this.props.onActive&&(this.callbackRefs.onActive=this.props.onActive),E.onIdle!==this.props.onIdle&&(this.callbackRefs.onIdle=this.props.onIdle)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents(!0),this._onAction.cancel&&this._onAction.cancel(),this.manager&&this.manager.close().catch(console.error)}},{key:"render",value:function(){return this.props.children||null}},{key:"_setupTabManager",value:function(){var E=this.props,e=E.crossTab,r=E.onIdle,h=E.onActive;if(this.callbackRefs={onIdle:r,onActive:h},e){var s=Object.assign({channelName:"idle-timer",fallbackInterval:2e3,responseTime:100,removeTimeout:6e4,emitOnAllTabs:!1},e===!0?{}:e),A=s.type,_=s.channelName,g=s.fallbackInterval,v=s.responseTime,u=s.emitOnAllTabs;this.manager=Er({type:A,channelName:_,fallbackInterval:g,responseTime:v,emitOnAllTabs:u,callbacks:this.callbackRefs,start:this.start,reset:this.reset,pause:this.pause,resume:this.resume})}}},{key:"_bindEvents",value:function(){var E=this;if(Pe){var e=this.props,r=e.element,h=e.events,s=e.passive,A=e.capture;this.eventsBound||(h.forEach(function(_){r.addEventListener(_,E.handleEvent,{capture:A,passive:s})}),this.eventsBound=!0)}}},{key:"_unbindEvents",value:function(){var E=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Pe){var r=this.props,h=r.element,s=r.events,A=r.passive,_=r.capture;(this.eventsBound||e)&&(s.forEach(function(g){h.removeEventListener(g,E.handleEvent,{capture:_,passive:A})}),this.eventsBound=!1)}}},{key:"_toggleIdleState",value:function(E){var e=this;this.setState(function(r){return{idle:!r.idle,lastIdle:r.idle?r.lastIdle:+new Date-e.props.timeout,idleTime:r.idle?r.idleTime+ +new Date-r.lastIdle:r.idleTime}},function(){var r=e.props,h=r.onActive,s=r.onIdle,A=r.stopOnIdle;e.state.idle?(A&&(clearTimeout(e.tId),e.tId=null,e._unbindEvents()),e.manager?e.manager.idle():s(E)):(e._bindEvents(),e.manager?e.manager.active():h(E))})}},{key:"_handleEvent",value:function(E){var e=this.state,r=e.remaining,h=e.pageX,s=e.pageY,A=e.idle,_=this.props,g=_.timeout,v=_.stopOnIdle;if(this._onAction(E),!r){if(E.type==="mousemove"&&(E.pageX===h&&E.pageY===s||E.pageX===void 0&&E.pageY===void 0||this.getElapsedTime()<200))return;clearTimeout(this.tId),this.tId=null;var u=+new Date-this.getLastActiveTime();(A&&!v||!A&&u>g)&&this._toggleIdleState(E),this.setState({lastActive:+new Date,pageX:E.pageX,pageY:E.pageY}),A&&v||(this.tId=setTimeout(this._toggleIdleState,g))}}},{key:"start",value:function(){var E=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null}),this.manager&&(this.manager.setAllIdle(!1),!E&&this.props.crossTab.emitOnAllTabs&&this.manager.send("start"));var e=this.props.timeout;this.tId=setTimeout(this._toggleIdleState,e)}},{key:"reset",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.state.idle&&(this.manager?this.manager.active():this.props.onActive()),this.manager&&(this.manager.setAllIdle(!1),!E&&this.props.crossTab.emitOnAllTabs&&this.manager.send("reset")),this.setState({idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null});var e=this.props.timeout;this.tId=setTimeout(this._toggleIdleState,e)}},{key:"pause",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.state.remaining;e===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.manager&&!E&&this.props.crossTab.emitOnAllTabs&&this.manager.send("pause"),this.setState({remaining:this.getRemainingTime()}))}},{key:"resume",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.state,r=e.remaining,h=e.idle;r!==null&&(this._bindEvents(),this.manager&&!E&&this.props.crossTab.emitOnAllTabs&&this.manager.send("resume"),h||(this.tId=setTimeout(this._toggleIdleState,r),this.setState({remaining:null,lastActive:+new Date})))}},{key:"getRemainingTime",value:function(){var E=this.state,e=E.remaining,r=E.lastActive,h=this.props.timeout;if(e!==null)return e<0?0:e;var s=h-(+new Date-r);return s<0?0:s}},{key:"getElapsedTime",value:function(){var E=this.state.oldDate;return+new Date-E}},{key:"getLastIdleTime",value:function(){return this.state.lastIdle}},{key:"getTotalIdleTime",value:function(){var E=this.state,e=E.idle,r=E.lastIdle,h=E.idleTime;return e?+new Date-r+h:h}},{key:"getLastActiveTime",value:function(){return this.state.lastActive}},{key:"getTotalActiveTime",value:function(){return this.getElapsedTime()-this.getTotalIdleTime()}},{key:"isIdle",value:function(){return this.state.idle}},{key:"isLeader",value:function(){return!this.manager||this.manager.isLeader()}}]),P}();Ge.propTypes={timeout:le.exports.number,events:le.exports.arrayOf(le.exports.string),onIdle:le.exports.func,onActive:le.exports.func,onAction:le.exports.func,debounce:le.exports.number,throttle:le.exports.number,eventsThrottle:le.exports.number,element:le.exports.oneOfType([le.exports.object,le.exports.element]),startOnMount:le.exports.bool,startManually:le.exports.bool,stopOnIdle:le.exports.bool,passive:le.exports.bool,capture:le.exports.bool,crossTab:le.exports.oneOfType([le.exports.bool,le.exports.shape({type:le.exports.oneOf(["broadcastChannel","localStorage","simulate"]),channelName:le.exports.string,fallbackInterval:le.exports.number,responseTime:le.exports.number,removeTimeout:le.exports.number,emitOnAllTabs:le.exports.bool})])},Ge.defaultProps={timeout:12e5,element:dr,events:cr,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,eventsThrottle:200,startOnMount:!0,startManually:!1,stopOnIdle:!1,capture:!0,passive:!0,crossTab:!1},le.exports.number,le.exports.arrayOf(le.exports.string),le.exports.func,le.exports.func,le.exports.func,le.exports.number,le.exports.number,le.exports.number,le.exports.oneOfType([le.exports.object,le.exports.element]),le.exports.bool,le.exports.bool,le.exports.bool,le.exports.bool,le.exports.bool,le.exports.oneOfType([le.exports.bool,le.exports.shape({type:le.exports.oneOf(["broadcastChannel","localStorage","simulate"]),channelName:le.exports.string,fallbackInterval:le.exports.number,responseTime:le.exports.number,removeTimeout:le.exports.number,emitOnAllTabs:le.exports.bool})]);const Tr=({channel:G})=>Ae("iframe",{width:"100%",height:"100%",marginHeight:"0",marginWidth:"0",frameBorder:"0",scrolling:"no",seamless:!0,allow:"autoplay; fullscreen",allowFullScreen:!0,allowTransparency:!0,src:G});var Be={exports:{}},it;function vt(){return it||(it=1,function(G,Z){(function(E,e){G.exports=e()})(window,function(){return function(P){var E={};function e(r){if(E[r])return E[r].exports;var h=E[r]={i:r,l:!1,exports:{}};return P[r].call(h.exports,h,h.exports,e),h.l=!0,h.exports}return e.m=P,e.c=E,e.d=function(r,h,s){e.o(r,h)||Object.defineProperty(r,h,{enumerable:!0,get:s})},e.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,h){if(h&1&&(r=e(r)),h&8||h&4&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),h&2&&typeof r!="string")for(var A in r)e.d(s,A,function(_){return r[_]}.bind(null,A));return s},e.n=function(r){var h=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(h,"a",h),h},e.o=function(r,h){return Object.prototype.hasOwnProperty.call(r,h)},e.p="dist/",e(e.s="./src/main.js")}({"./node_modules/babel-runtime/core-js/array/from.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/get-iterator.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/get-iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/json/stringify.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/json/stringify.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/get-own-property-descriptor.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/keys.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/keys.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":function(P,E,e){P.exports={default:e("./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":function(P,E,e){E.__esModule=!0,E.default=function(r,h){if(!(r instanceof h))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/core-js/object/define-property.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=function(){function A(_,g){for(var v=0;v<g.length;v++){var u=g[v];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),(0,h.default)(_,u.key,u)}}return function(_,g,v){return g&&A(_.prototype,g),v&&A(_,v),_}}()},"./node_modules/babel-runtime/helpers/extends.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default||function(A){for(var _=1;_<arguments.length;_++){var g=arguments[_];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(A[v]=g[v])}return A}},"./node_modules/babel-runtime/helpers/inherits.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/core-js/object/set-prototype-of.js"),h=v(r),s=e("./node_modules/babel-runtime/core-js/object/create.js"),A=v(s),_=e("./node_modules/babel-runtime/helpers/typeof.js"),g=v(_);function v(u){return u&&u.__esModule?u:{default:u}}E.default=function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof f>"u"?"undefined":(0,g.default)(f)));u.prototype=(0,A.default)(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(h.default?(0,h.default)(u,f):u.__proto__=f)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/helpers/typeof.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=function(A,_){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&((typeof _>"u"?"undefined":(0,h.default)(_))==="object"||typeof _=="function")?_:A}},"./node_modules/babel-runtime/helpers/toConsumableArray.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/core-js/array/from.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=function(A){if(Array.isArray(A)){for(var _=0,g=Array(A.length);_<A.length;_++)g[_]=A[_];return g}else return(0,h.default)(A)}},"./node_modules/babel-runtime/helpers/typeof.js":function(P,E,e){E.__esModule=!0;var r=e("./node_modules/babel-runtime/core-js/symbol/iterator.js"),h=g(r),s=e("./node_modules/babel-runtime/core-js/symbol.js"),A=g(s),_=typeof A.default=="function"&&typeof h.default=="symbol"?function(v){return typeof v}:function(v){return v&&typeof A.default=="function"&&v.constructor===A.default&&v!==A.default.prototype?"symbol":typeof v};function g(v){return v&&v.__esModule?v:{default:v}}E.default=typeof A.default=="function"&&_(h.default)==="symbol"?function(v){return typeof v>"u"?"undefined":_(v)}:function(v){return v&&typeof A.default=="function"&&v.constructor===A.default&&v!==A.default.prototype?"symbol":typeof v>"u"?"undefined":_(v)}},"./node_modules/clappr-zepto/zepto.js":function(P,E){var e=function(){var r,h,s,A,_=[],g=_.concat,v=_.filter,u=_.slice,f=window.document,m={},S={},i={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,o=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,l=/^(?:body|html)$/i,t=/([A-Z])/g,n=["val","css","html","text","data","width","height","offset"],c=["after","prepend","before","append"],b=f.createElement("table"),x=f.createElement("tr"),a={tr:f.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:x,th:x,"*":f.createElement("div")},d=/complete|loaded|interactive/,C=/^[\w-]*$/,T={},L=T.toString,R={},O,j,D=f.createElement("div"),w={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},F=Array.isArray||function(k){return k instanceof Array};R.matches=function(k,U){if(!U||!k||k.nodeType!==1)return!1;var H=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.matchesSelector;if(H)return H.call(k,U);var Q,q=k.parentNode,ie=!q;return ie&&(q=D).appendChild(k),Q=~R.qsa(q,U).indexOf(k),ie&&D.removeChild(k),Q};function B(k){return k==null?String(k):T[L.call(k)]||"object"}function M(k){return B(k)=="function"}function N(k){return k!=null&&k==k.window}function I(k){return k!=null&&k.nodeType==k.DOCUMENT_NODE}function X(k){return B(k)=="object"}function $(k){return X(k)&&!N(k)&&Object.getPrototypeOf(k)==Object.prototype}function ee(k){var U=!!k&&"length"in k&&k.length,H=s.type(k);return H!="function"&&!N(k)&&(H=="array"||U===0||typeof U=="number"&&U>0&&U-1 in k)}function K(k){return v.call(k,function(U){return U!=null})}function J(k){return k.length>0?s.fn.concat.apply([],k):k}O=function(k){return k.replace(/-+(.)?/g,function(U,H){return H?H.toUpperCase():""})};function V(k){return k.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}j=function(k){return v.call(k,function(U,H){return k.indexOf(U)==H})};function W(k){return k in S?S[k]:S[k]=new RegExp("(^|\\s)"+k+"(\\s|$)")}function Y(k,U){return typeof U=="number"&&!i[V(k)]?U+"px":U}function te(k){var U,H;return m[k]||(U=f.createElement(k),f.body.appendChild(U),H=getComputedStyle(U,"").getPropertyValue("display"),U.parentNode.removeChild(U),H=="none"&&(H="block"),m[k]=H),m[k]}function se(k){return"children"in k?u.call(k.children):s.map(k.childNodes,function(U){if(U.nodeType==1)return U})}function ce(k,U){var H,Q=k?k.length:0;for(H=0;H<Q;H++)this[H]=k[H];this.length=Q,this.selector=U||""}R.fragment=function(k,U,H){var Q,q,ie;return y.test(k)&&(Q=s(f.createElement(RegExp.$1))),Q||(k.replace&&(k=k.replace(o,"<$1></$2>")),U===r&&(U=p.test(k)&&RegExp.$1),U in a||(U="*"),ie=a[U],ie.innerHTML=""+k,Q=s.each(u.call(ie.childNodes),function(){ie.removeChild(this)})),$(H)&&(q=s(Q),s.each(H,function(oe,fe){n.indexOf(oe)>-1?q[oe](fe):q.attr(oe,fe)})),Q},R.Z=function(k,U){return new ce(k,U)},R.isZ=function(k){return k instanceof R.Z},R.init=function(k,U){var H;if(k)if(typeof k=="string")if(k=k.trim(),k[0]=="<"&&p.test(k))H=R.fragment(k,RegExp.$1,U),k=null;else{if(U!==r)return s(U).find(k);H=R.qsa(f,k)}else{if(M(k))return s(f).ready(k);if(R.isZ(k))return k;if(F(k))H=K(k);else if(X(k))H=[k],k=null;else if(p.test(k))H=R.fragment(k.trim(),RegExp.$1,U),k=null;else{if(U!==r)return s(U).find(k);H=R.qsa(f,k)}}else return R.Z();return R.Z(H,k)},s=function(k,U){return R.init(k,U)};function ue(k,U,H){for(h in U)H&&($(U[h])||F(U[h]))?($(U[h])&&!$(k[h])&&(k[h]={}),F(U[h])&&!F(k[h])&&(k[h]=[]),ue(k[h],U[h],H)):U[h]!==r&&(k[h]=U[h])}s.extend=function(k){var U,H=u.call(arguments,1);return typeof k=="boolean"&&(U=k,k=H.shift()),H.forEach(function(Q){ue(k,Q,U)}),k},R.qsa=function(k,U){var H,Q=U[0]=="#",q=!Q&&U[0]==".",ie=Q||q?U.slice(1):U,oe=C.test(ie);return k.getElementById&&oe&&Q?(H=k.getElementById(ie))?[H]:[]:k.nodeType!==1&&k.nodeType!==9&&k.nodeType!==11?[]:u.call(oe&&!Q&&k.getElementsByClassName?q?k.getElementsByClassName(ie):k.getElementsByTagName(U):k.querySelectorAll(U))};function re(k,U){return U==null?s(k):s(k).filter(U)}s.contains=f.documentElement.contains?function(k,U){return k!==U&&k.contains(U)}:function(k,U){for(;U&&(U=U.parentNode);)if(U===k)return!0;return!1};function ne(k,U,H,Q){return M(U)?U.call(k,H,Q):U}function z(k,U,H){H==null?k.removeAttribute(U):k.setAttribute(U,H)}function ae(k,U){var H=k.className||"",Q=H&&H.baseVal!==r;if(U===r)return Q?H.baseVal:H;Q?H.baseVal=U:k.className=U}function de(k){try{return k&&(k=="true"||(k=="false"?!1:k=="null"?null:+k+""==k?+k:/^[\[\{]/.test(k)?s.parseJSON(k):k))}catch{return k}}s.type=B,s.isFunction=M,s.isWindow=N,s.isArray=F,s.isPlainObject=$,s.isEmptyObject=function(k){var U;for(U in k)return!1;return!0},s.isNumeric=function(k){var U=Number(k),H=typeof k;return k!=null&&H!="boolean"&&(H!="string"||k.length)&&!isNaN(U)&&isFinite(U)||!1},s.inArray=function(k,U,H){return _.indexOf.call(U,k,H)},s.camelCase=O,s.trim=function(k){return k==null?"":String.prototype.trim.call(k)},s.uuid=0,s.support={},s.expr={},s.noop=function(){},s.map=function(k,U){var H,Q=[],q,ie;if(ee(k))for(q=0;q<k.length;q++)H=U(k[q],q),H!=null&&Q.push(H);else for(ie in k)H=U(k[ie],ie),H!=null&&Q.push(H);return J(Q)},s.each=function(k,U){var H,Q;if(ee(k)){for(H=0;H<k.length;H++)if(U.call(k[H],H,k[H])===!1)return k}else for(Q in k)if(U.call(k[Q],Q,k[Q])===!1)return k;return k},s.grep=function(k,U){return v.call(k,U)},window.JSON&&(s.parseJSON=JSON.parse),s.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(k,U){T["[object "+U+"]"]=U.toLowerCase()}),s.fn={constructor:R.Z,length:0,forEach:_.forEach,reduce:_.reduce,push:_.push,sort:_.sort,splice:_.splice,indexOf:_.indexOf,concat:function(){var k,U,H=[];for(k=0;k<arguments.length;k++)U=arguments[k],H[k]=R.isZ(U)?U.toArray():U;return g.apply(R.isZ(this)?this.toArray():this,H)},map:function(k){return s(s.map(this,function(U,H){return k.call(U,H,U)}))},slice:function(){return s(u.apply(this,arguments))},ready:function(k){return d.test(f.readyState)&&f.body?k(s):f.addEventListener("DOMContentLoaded",function(){k(s)},!1),this},get:function(k){return k===r?u.call(this):this[k>=0?k:k+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(k){return _.every.call(this,function(U,H){return k.call(U,H,U)!==!1}),this},filter:function(k){return M(k)?this.not(this.not(k)):s(v.call(this,function(U){return R.matches(U,k)}))},add:function(k,U){return s(j(this.concat(s(k,U))))},is:function(k){return this.length>0&&R.matches(this[0],k)},not:function(k){var U=[];if(M(k)&&k.call!==r)this.each(function(Q){k.call(this,Q)||U.push(this)});else{var H=typeof k=="string"?this.filter(k):ee(k)&&M(k.item)?u.call(k):s(k);this.forEach(function(Q){H.indexOf(Q)<0&&U.push(Q)})}return s(U)},has:function(k){return this.filter(function(){return X(k)?s.contains(this,k):s(this).find(k).size()})},eq:function(k){return k===-1?this.slice(k):this.slice(k,+k+1)},first:function(){var k=this[0];return k&&!X(k)?k:s(k)},last:function(){var k=this[this.length-1];return k&&!X(k)?k:s(k)},find:function(k){var U,H=this;return k?typeof k=="object"?U=s(k).filter(function(){var Q=this;return _.some.call(H,function(q){return s.contains(q,Q)})}):this.length==1?U=s(R.qsa(this[0],k)):U=this.map(function(){return R.qsa(this,k)}):U=s(),U},closest:function(k,U){var H=[],Q=typeof k=="object"&&s(k);return this.each(function(q,ie){for(;ie&&!(Q?Q.indexOf(ie)>=0:R.matches(ie,k));)ie=ie!==U&&!I(ie)&&ie.parentNode;ie&&H.indexOf(ie)<0&&H.push(ie)}),s(H)},parents:function(k){for(var U=[],H=this;H.length>0;)H=s.map(H,function(Q){if((Q=Q.parentNode)&&!I(Q)&&U.indexOf(Q)<0)return U.push(Q),Q});return re(U,k)},parent:function(k){return re(j(this.pluck("parentNode")),k)},children:function(k){return re(this.map(function(){return se(this)}),k)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(k){return re(this.map(function(U,H){return v.call(se(H.parentNode),function(Q){return Q!==H})}),k)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(k){return s.map(this,function(U){return U[k]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=te(this.nodeName))})},replaceWith:function(k){return this.before(k).remove()},wrap:function(k){var U=M(k);if(this[0]&&!U)var H=s(k).get(0),Q=H.parentNode||this.length>1;return this.each(function(q){s(this).wrapAll(U?k.call(this,q):Q?H.cloneNode(!0):H)})},wrapAll:function(k){if(this[0]){s(this[0]).before(k=s(k));for(var U;(U=k.children()).length;)k=U.first();s(k).append(this)}return this},wrapInner:function(k){var U=M(k);return this.each(function(H){var Q=s(this),q=Q.contents(),ie=U?k.call(this,H):k;q.length?q.wrapAll(ie):Q.append(ie)})},unwrap:function(){return this.parent().each(function(){s(this).replaceWith(s(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(k){return this.each(function(){var U=s(this);(k===r?U.css("display")=="none":k)?U.show():U.hide()})},prev:function(k){return s(this.pluck("previousElementSibling")).filter(k||"*")},next:function(k){return s(this.pluck("nextElementSibling")).filter(k||"*")},html:function(k){return 0 in arguments?this.each(function(U){var H=this.innerHTML;s(this).empty().append(ne(this,k,U,H))}):0 in this?this[0].innerHTML:null},text:function(k){return 0 in arguments?this.each(function(U){var H=ne(this,k,U,this.textContent);this.textContent=H==null?"":""+H}):0 in this?this.pluck("textContent").join(""):null},attr:function(k,U){var H;return typeof k=="string"&&!(1 in arguments)?0 in this&&this[0].nodeType==1&&(H=this[0].getAttribute(k))!=null?H:r:this.each(function(Q){if(this.nodeType===1)if(X(k))for(h in k)z(this,h,k[h]);else z(this,k,ne(this,U,Q,this.getAttribute(k)))})},removeAttr:function(k){return this.each(function(){this.nodeType===1&&k.split(" ").forEach(function(U){z(this,U)},this)})},prop:function(k,U){return k=w[k]||k,1 in arguments?this.each(function(H){this[k]=ne(this,U,H,this[k])}):this[0]&&this[0][k]},removeProp:function(k){return k=w[k]||k,this.each(function(){delete this[k]})},data:function(k,U){var H="data-"+k.replace(t,"-$1").toLowerCase(),Q=1 in arguments?this.attr(H,U):this.attr(H);return Q!==null?de(Q):r},val:function(k){return 0 in arguments?(k==null&&(k=""),this.each(function(U){this.value=ne(this,k,U,this.value)})):this[0]&&(this[0].multiple?s(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(k){if(k)return this.each(function(H){var Q=s(this),q=ne(this,k,H,Q.offset()),ie=Q.offsetParent().offset(),oe={top:q.top-ie.top,left:q.left-ie.left};Q.css("position")=="static"&&(oe.position="relative"),Q.css(oe)});if(!this.length)return null;if(f.documentElement!==this[0]&&!s.contains(f.documentElement,this[0]))return{top:0,left:0};var U=this[0].getBoundingClientRect();return{left:U.left+window.pageXOffset,top:U.top+window.pageYOffset,width:Math.round(U.width),height:Math.round(U.height)}},css:function(k,U){if(arguments.length<2){var H=this[0];if(typeof k=="string")return H?H.style[O(k)]||getComputedStyle(H,"").getPropertyValue(k):void 0;if(F(k)){if(!H)return;var Q={},q=getComputedStyle(H,"");return s.each(k,function(oe,fe){Q[fe]=H.style[O(fe)]||q.getPropertyValue(fe)}),Q}}var ie="";if(B(k)=="string")!U&&U!==0?this.each(function(){this.style.removeProperty(V(k))}):ie=V(k)+":"+Y(k,U);else for(h in k)!k[h]&&k[h]!==0?this.each(function(){this.style.removeProperty(V(h))}):ie+=V(h)+":"+Y(h,k[h])+";";return this.each(function(){this.style.cssText+=";"+ie})},index:function(k){return k?this.indexOf(s(k)[0]):this.parent().children().indexOf(this[0])},hasClass:function(k){return k?_.some.call(this,function(U){return this.test(ae(U))},W(k)):!1},addClass:function(k){return k?this.each(function(U){if("className"in this){A=[];var H=ae(this),Q=ne(this,k,U,H);Q.split(/\s+/g).forEach(function(q){s(this).hasClass(q)||A.push(q)},this),A.length&&ae(this,H+(H?" ":"")+A.join(" "))}}):this},removeClass:function(k){return this.each(function(U){if("className"in this){if(k===r)return ae(this,"");A=ae(this),ne(this,k,U,A).split(/\s+/g).forEach(function(H){A=A.replace(W(H)," ")}),ae(this,A.trim())}})},toggleClass:function(k,U){return k?this.each(function(H){var Q=s(this),q=ne(this,k,H,ae(this));q.split(/\s+/g).forEach(function(ie){(U===r?!Q.hasClass(ie):U)?Q.addClass(ie):Q.removeClass(ie)})}):this},scrollTop:function(k){if(!!this.length){var U="scrollTop"in this[0];return k===r?U?this[0].scrollTop:this[0].pageYOffset:this.each(U?function(){this.scrollTop=k}:function(){this.scrollTo(this.scrollX,k)})}},scrollLeft:function(k){if(!!this.length){var U="scrollLeft"in this[0];return k===r?U?this[0].scrollLeft:this[0].pageXOffset:this.each(U?function(){this.scrollLeft=k}:function(){this.scrollTo(k,this.scrollY)})}},position:function(){if(!!this.length){var k=this[0],U=this.offsetParent(),H=this.offset(),Q=l.test(U[0].nodeName)?{top:0,left:0}:U.offset();return H.top-=parseFloat(s(k).css("margin-top"))||0,H.left-=parseFloat(s(k).css("margin-left"))||0,Q.top+=parseFloat(s(U[0]).css("border-top-width"))||0,Q.left+=parseFloat(s(U[0]).css("border-left-width"))||0,{top:H.top-Q.top,left:H.left-Q.left}}},offsetParent:function(){return this.map(function(){for(var k=this.offsetParent||f.body;k&&!l.test(k.nodeName)&&s(k).css("position")=="static";)k=k.offsetParent;return k})}},s.fn.detach=s.fn.remove,["width","height"].forEach(function(k){var U=k.replace(/./,function(H){return H[0].toUpperCase()});s.fn[k]=function(H){var Q,q=this[0];return H===r?N(q)?q["inner"+U]:I(q)?q.documentElement["scroll"+U]:(Q=this.offset())&&Q[k]:this.each(function(ie){q=s(this),q.css(k,ne(this,H,ie,q[k]()))})}});function he(k,U){U(k);for(var H=0,Q=k.childNodes.length;H<Q;H++)he(k.childNodes[H],U)}return c.forEach(function(k,U){var H=U%2;s.fn[k]=function(){var Q,q=s.map(arguments,function(fe){var pe=[];return Q=B(fe),Q=="array"?(fe.forEach(function(ve){if(ve.nodeType!==r)return pe.push(ve);if(s.zepto.isZ(ve))return pe=pe.concat(ve.get());pe=pe.concat(R.fragment(ve))}),pe):Q=="object"||fe==null?fe:R.fragment(fe)}),ie,oe=this.length>1;return q.length<1?this:this.each(function(fe,pe){ie=H?pe:pe.parentNode,pe=U==0?pe.nextSibling:U==1?pe.firstChild:U==2?pe:null;var ve=s.contains(f.documentElement,ie);q.forEach(function(ye){if(oe)ye=ye.cloneNode(!0);else if(!ie)return s(ye).remove();ie.insertBefore(ye,pe),ve&&he(ye,function(ge){if(ge.nodeName!=null&&ge.nodeName.toUpperCase()==="SCRIPT"&&(!ge.type||ge.type==="text/javascript")&&!ge.src){var xe=ge.ownerDocument?ge.ownerDocument.defaultView:window;xe.eval.call(xe,ge.innerHTML)}})})})},s.fn[H?k+"To":"insert"+(U?"Before":"After")]=function(Q){return s(Q)[k](this),this}}),R.Z.prototype=ce.prototype=s.fn,R.uniq=j,R.deserializeValue=de,s.zepto=R,s}();window.Zepto=e,window.$===void 0&&(window.$=e),function(r){var h=+new Date,s=window.document,A,_,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,v=/^(?:text|application)\/javascript/i,u=/^(?:text|application)\/xml/i,f="application/json",m="text/html",S=/^\s*$/,i=s.createElement("a");i.href=window.location.href;function p(j,D,w){var F=r.Event(D);return r(j).trigger(F,w),!F.isDefaultPrevented()}function y(j,D,w,F){if(j.global)return p(D||s,w,F)}r.active=0;function o(j){j.global&&r.active++===0&&y(j,null,"ajaxStart")}function l(j){j.global&&!--r.active&&y(j,null,"ajaxStop")}function t(j,D){var w=D.context;if(D.beforeSend.call(w,j,D)===!1||y(D,w,"ajaxBeforeSend",[j,D])===!1)return!1;y(D,w,"ajaxSend",[j,D])}function n(j,D,w,F){var B=w.context,M="success";w.success.call(B,j,M,D),F&&F.resolveWith(B,[j,M,D]),y(w,B,"ajaxSuccess",[D,w,j]),b(M,D,w)}function c(j,D,w,F,B){var M=F.context;F.error.call(M,w,D,j),B&&B.rejectWith(M,[w,D,j]),y(F,M,"ajaxError",[w,F,j||D]),b(D,w,F)}function b(j,D,w){var F=w.context;w.complete.call(F,D,j),y(w,F,"ajaxComplete",[D,w]),l(w)}function x(j,D,w){if(w.dataFilter==a)return j;var F=w.context;return w.dataFilter.call(F,j,D)}function a(){}r.ajaxJSONP=function(j,D){if(!("type"in j))return r.ajax(j);var w=j.jsonpCallback,F=(r.isFunction(w)?w():w)||"Zepto"+h++,B=s.createElement("script"),M=window[F],N,I=function(ee){r(B).triggerHandler("error",ee||"abort")},X={abort:I},$;return D&&D.promise(X),r(B).on("load error",function(ee,K){clearTimeout($),r(B).off().remove(),ee.type=="error"||!N?c(null,K||"error",X,j,D):n(N[0],X,j,D),window[F]=M,N&&r.isFunction(M)&&M(N[0]),M=N=void 0}),t(X,j)===!1?(I("abort"),X):(window[F]=function(){N=arguments},B.src=j.url.replace(/\?(.+)=\?/,"?$1="+F),s.head.appendChild(B),j.timeout>0&&($=setTimeout(function(){I("timeout")},j.timeout)),X)},r.ajaxSettings={type:"GET",beforeSend:a,success:a,error:a,complete:a,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:f,xml:"application/xml, text/xml",html:m,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:a};function d(j){return j&&(j=j.split(";",2)[0]),j&&(j==m?"html":j==f?"json":v.test(j)?"script":u.test(j)&&"xml")||"text"}function C(j,D){return D==""?j:(j+"&"+D).replace(/[&?]{1,2}/,"?")}function T(j){j.processData&&j.data&&r.type(j.data)!="string"&&(j.data=r.param(j.data,j.traditional)),j.data&&(!j.type||j.type.toUpperCase()=="GET"||j.dataType=="jsonp")&&(j.url=C(j.url,j.data),j.data=void 0)}r.ajax=function(j){var D=r.extend({},j||{}),w=r.Deferred&&r.Deferred(),F,B;for(A in r.ajaxSettings)D[A]===void 0&&(D[A]=r.ajaxSettings[A]);o(D),D.crossDomain||(F=s.createElement("a"),F.href=D.url,F.href=F.href,D.crossDomain=i.protocol+"//"+i.host!=F.protocol+"//"+F.host),D.url||(D.url=window.location.toString()),(B=D.url.indexOf("#"))>-1&&(D.url=D.url.slice(0,B)),T(D);var M=D.dataType,N=/\?.+=\?/.test(D.url);if(N&&(M="jsonp"),(D.cache===!1||(!j||j.cache!==!0)&&(M=="script"||M=="jsonp"))&&(D.url=C(D.url,"_="+Date.now())),M=="jsonp")return N||(D.url=C(D.url,D.jsonp?D.jsonp+"=?":D.jsonp===!1?"":"callback=?")),r.ajaxJSONP(D,w);var I=D.accepts[M],X={},$=function(Y,te){X[Y.toLowerCase()]=[Y,te]},ee=/^([\w-]+:)\/\//.test(D.url)?RegExp.$1:window.location.protocol,K=D.xhr(),J=K.setRequestHeader,V;if(w&&w.promise(K),D.crossDomain||$("X-Requested-With","XMLHttpRequest"),$("Accept",I||"*/*"),(I=D.mimeType||I)&&(I.indexOf(",")>-1&&(I=I.split(",",2)[0]),K.overrideMimeType&&K.overrideMimeType(I)),(D.contentType||D.contentType!==!1&&D.data&&D.type.toUpperCase()!="GET")&&$("Content-Type",D.contentType||"application/x-www-form-urlencoded"),D.headers)for(_ in D.headers)$(_,D.headers[_]);if(K.setRequestHeader=$,K.onreadystatechange=function(){if(K.readyState==4){K.onreadystatechange=a,clearTimeout(V);var Y,te=!1;if(K.status>=200&&K.status<300||K.status==304||K.status==0&&ee=="file:"){if(M=M||d(D.mimeType||K.getResponseHeader("content-type")),K.responseType=="arraybuffer"||K.responseType=="blob")Y=K.response;else{Y=K.responseText;try{Y=x(Y,M,D),M=="script"?(0,eval)(Y):M=="xml"?Y=K.responseXML:M=="json"&&(Y=S.test(Y)?null:r.parseJSON(Y))}catch(se){te=se}if(te)return c(te,"parsererror",K,D,w)}n(Y,K,D,w)}else c(K.statusText||null,K.status?"error":"abort",K,D,w)}},t(K,D)===!1)return K.abort(),c(null,"abort",K,D,w),K;var W="async"in D?D.async:!0;if(K.open(D.type,D.url,W,D.username,D.password),D.xhrFields)for(_ in D.xhrFields)K[_]=D.xhrFields[_];for(_ in X)J.apply(K,X[_]);return D.timeout>0&&(V=setTimeout(function(){K.onreadystatechange=a,K.abort(),c(null,"timeout",K,D,w)},D.timeout)),K.send(D.data?D.data:null),K};function L(j,D,w,F){return r.isFunction(D)&&(F=w,w=D,D=void 0),r.isFunction(w)||(F=w,w=void 0),{url:j,data:D,success:w,dataType:F}}r.get=function(){return r.ajax(L.apply(null,arguments))},r.post=function(){var j=L.apply(null,arguments);return j.type="POST",r.ajax(j)},r.getJSON=function(){var j=L.apply(null,arguments);return j.dataType="json",r.ajax(j)},r.fn.load=function(j,D,w){if(!this.length)return this;var F=this,B=j.split(/\s/),M,N=L(j,D,w),I=N.success;return B.length>1&&(N.url=B[0],M=B[1]),N.success=function(X){F.html(M?r("<div>").html(X.replace(g,"")).find(M):X),I&&I.apply(F,arguments)},r.ajax(N),this};var R=encodeURIComponent;function O(j,D,w,F){var B,M=r.isArray(D),N=r.isPlainObject(D);r.each(D,function(I,X){B=r.type(X),F&&(I=w?F:F+"["+(N||B=="object"||B=="array"?I:"")+"]"),!F&&M?j.add(X.name,X.value):B=="array"||!w&&B=="object"?O(j,X,w,I):j.add(I,X)})}r.param=function(j,D){var w=[];return w.add=function(F,B){r.isFunction(B)&&(B=B()),B==null&&(B=""),this.push(R(F)+"="+R(B))},O(w,j,D),w.join("&").replace(/%20/g,"+")}}(e),function(r){r.Callbacks=function(h){h=r.extend({},h);var s,A,_,g,v,u,f=[],m=!h.once&&[],S=function(p){for(s=h.memory&&p,A=!0,u=g||0,g=0,v=f.length,_=!0;f&&u<v;++u)if(f[u].apply(p[0],p[1])===!1&&h.stopOnFalse){s=!1;break}_=!1,f&&(m?m.length&&S(m.shift()):s?f.length=0:i.disable())},i={add:function(){if(f){var p=f.length,y=function(o){r.each(o,function(l,t){typeof t=="function"?(!h.unique||!i.has(t))&&f.push(t):t&&t.length&&typeof t!="string"&&y(t)})};y(arguments),_?v=f.length:s&&(g=p,S(s))}return this},remove:function(){return f&&r.each(arguments,function(p,y){for(var o;(o=r.inArray(y,f,o))>-1;)f.splice(o,1),_&&(o<=v&&--v,o<=u&&--u)}),this},has:function(p){return!!(f&&(p?r.inArray(p,f)>-1:f.length))},empty:function(){return v=f.length=0,this},disable:function(){return f=m=s=void 0,this},disabled:function(){return!f},lock:function(){return m=void 0,s||i.disable(),this},locked:function(){return!m},fireWith:function(p,y){return f&&(!A||m)&&(y=y||[],y=[p,y.slice?y.slice():y],_?m.push(y):S(y)),this},fire:function(){return i.fireWith(this,arguments)},fired:function(){return!!A}};return i}}(e),function(r){var h=Array.prototype.slice;function s(A){var _=[["resolve","done",r.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",r.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",r.Callbacks({memory:1})]],g="pending",v={state:function(){return g},always:function(){return u.done(arguments).fail(arguments),this},then:function(){var f=arguments;return s(function(m){r.each(_,function(S,i){var p=r.isFunction(f[S])&&f[S];u[i[1]](function(){var y=p&&p.apply(this,arguments);if(y&&r.isFunction(y.promise))y.promise().done(m.resolve).fail(m.reject).progress(m.notify);else{var o=this===v?m.promise():this,l=p?[y]:arguments;m[i[0]+"With"](o,l)}})}),f=null}).promise()},promise:function(f){return f!=null?r.extend(f,v):v}},u={};return r.each(_,function(f,m){var S=m[2],i=m[3];v[m[1]]=S.add,i&&S.add(function(){g=i},_[f^1][2].disable,_[2][2].lock),u[m[0]]=function(){return u[m[0]+"With"](this===u?v:this,arguments),this},u[m[0]+"With"]=S.fireWith}),v.promise(u),A&&A.call(u,u),u}r.when=function(A){var _=h.call(arguments),g=_.length,v=0,u=g!==1||A&&r.isFunction(A.promise)?g:0,f=u===1?A:s(),m,S,i,p=function(y,o,l){return function(t){o[y]=this,l[y]=arguments.length>1?h.call(arguments):t,l===m?f.notifyWith(o,l):--u||f.resolveWith(o,l)}};if(g>1)for(m=new Array(g),S=new Array(g),i=new Array(g);v<g;++v)_[v]&&r.isFunction(_[v].promise)?_[v].promise().done(p(v,i,_)).fail(f.reject).progress(p(v,S,m)):--u;return u||f.resolveWith(i,_),f.promise()},r.Deferred=s}(e),function(r){var h=1,s,A=Array.prototype.slice,_=r.isFunction,g=function(L){return typeof L=="string"},v={},u={},f="onfocusin"in window,m={focus:"focusin",blur:"focusout"},S={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents";function i(L){return L._zid||(L._zid=h++)}function p(L,R,O,j){if(R=y(R),R.ns)var D=o(R.ns);return(v[i(L)]||[]).filter(function(w){return w&&(!R.e||w.e==R.e)&&(!R.ns||D.test(w.ns))&&(!O||i(w.fn)===i(O))&&(!j||w.sel==j)})}function y(L){var R=(""+L).split(".");return{e:R[0],ns:R.slice(1).sort().join(" ")}}function o(L){return new RegExp("(?:^| )"+L.replace(" "," .* ?")+"(?: |$)")}function l(L,R){return L.del&&!f&&L.e in m||!!R}function t(L){return S[L]||f&&m[L]||L}function n(L,R,O,j,D,w,F){var B=i(L),M=v[B]||(v[B]=[]);R.split(/\s/).forEach(function(N){if(N=="ready")return r(document).ready(O);var I=y(N);I.fn=O,I.sel=D,I.e in S&&(O=function($){var ee=$.relatedTarget;if(!ee||ee!==this&&!r.contains(this,ee))return I.fn.apply(this,arguments)}),I.del=w;var X=w||O;I.proxy=function($){if($=C($),!$.isImmediatePropagationStopped()){$.data=j;var ee=X.apply(L,$._args==s?[$]:[$].concat($._args));return ee===!1&&($.preventDefault(),$.stopPropagation()),ee}},I.i=M.length,M.push(I),"addEventListener"in L&&L.addEventListener(t(I.e),I.proxy,l(I,F))})}function c(L,R,O,j,D){var w=i(L);(R||"").split(/\s/).forEach(function(F){p(L,F,O,j).forEach(function(B){delete v[w][B.i],"removeEventListener"in L&&L.removeEventListener(t(B.e),B.proxy,l(B,D))})})}r.event={add:n,remove:c},r.proxy=function(L,R){var O=2 in arguments&&A.call(arguments,2);if(_(L)){var j=function(){return L.apply(R,O?O.concat(A.call(arguments)):arguments)};return j._zid=i(L),j}else{if(g(R))return O?(O.unshift(L[R],L),r.proxy.apply(null,O)):r.proxy(L[R],L);throw new TypeError("expected function")}},r.fn.bind=function(L,R,O){return this.on(L,R,O)},r.fn.unbind=function(L,R){return this.off(L,R)},r.fn.one=function(L,R,O,j){return this.on(L,R,O,j,1)};var b=function(){return!0},x=function(){return!1},a=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function C(L,R){return(R||!L.isDefaultPrevented)&&(R||(R=L),r.each(d,function(O,j){var D=R[O];L[O]=function(){return this[j]=b,D&&D.apply(R,arguments)},L[j]=x}),L.timeStamp||(L.timeStamp=Date.now()),(R.defaultPrevented!==s?R.defaultPrevented:"returnValue"in R?R.returnValue===!1:R.getPreventDefault&&R.getPreventDefault())&&(L.isDefaultPrevented=b)),L}function T(L){var R,O={originalEvent:L};for(R in L)!a.test(R)&&L[R]!==s&&(O[R]=L[R]);return C(O,L)}r.fn.delegate=function(L,R,O){return this.on(R,L,O)},r.fn.undelegate=function(L,R,O){return this.off(R,L,O)},r.fn.live=function(L,R){return r(document.body).delegate(this.selector,L,R),this},r.fn.die=function(L,R){return r(document.body).undelegate(this.selector,L,R),this},r.fn.on=function(L,R,O,j,D){var w,F,B=this;return L&&!g(L)?(r.each(L,function(M,N){B.on(M,R,O,N,D)}),B):(!g(R)&&!_(j)&&j!==!1&&(j=O,O=R,R=s),(j===s||O===!1)&&(j=O,O=s),j===!1&&(j=x),B.each(function(M,N){D&&(w=function(I){return c(N,I.type,j),j.apply(this,arguments)}),R&&(F=function(I){var X,$=r(I.target).closest(R,N).get(0);if($&&$!==N)return X=r.extend(T(I),{currentTarget:$,liveFired:N}),(w||j).apply($,[X].concat(A.call(arguments,1)))}),n(N,L,j,O,R,F||w)}))},r.fn.off=function(L,R,O){var j=this;return L&&!g(L)?(r.each(L,function(D,w){j.off(D,R,w)}),j):(!g(R)&&!_(O)&&O!==!1&&(O=R,R=s),O===!1&&(O=x),j.each(function(){c(this,L,O,R)}))},r.fn.trigger=function(L,R){return L=g(L)||r.isPlainObject(L)?r.Event(L):C(L),L._args=R,this.each(function(){L.type in m&&typeof this[L.type]=="function"?this[L.type]():"dispatchEvent"in this?this.dispatchEvent(L):r(this).triggerHandler(L,R)})},r.fn.triggerHandler=function(L,R){var O,j;return this.each(function(D,w){O=T(g(L)?r.Event(L):L),O._args=R,O.target=w,r.each(p(w,L.type||L),function(F,B){if(j=B.proxy(O),O.isImmediatePropagationStopped())return!1})}),j},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(L){r.fn[L]=function(R){return 0 in arguments?this.bind(L,R):this.trigger(L)}}),r.Event=function(L,R){g(L)||(R=L,L=R.type);var O=document.createEvent(u[L]||"Events"),j=!0;if(R)for(var D in R)D=="bubbles"?j=!!R[D]:O[D]=R[D];return O.initEvent(L,j,!0),C(O)}}(e),function(){try{getComputedStyle(void 0)}catch{var r=getComputedStyle;window.getComputedStyle=function(s,A){try{return r(s,A)}catch{return null}}}}(),function(r){var h=r.zepto,s=h.qsa,A=h.matches;function _(S){return S=r(S),!!(S.width()||S.height())&&S.css("display")!=="none"}var g=r.expr[":"]={visible:function(){if(_(this))return this},hidden:function(){if(!_(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(S){if(S===0)return this},last:function(S,i){if(S===i.length-1)return this},eq:function(S,i,p){if(S===p)return this},contains:function(S,i,p){if(r(this).text().indexOf(p)>-1)return this},has:function(S,i,p){if(h.qsa(this,p).length)return this}},v=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),u=/^\s*>/,f="Zepto"+ +new Date;function m(S,i){S=S.replace(/=#\]/g,'="#"]');var p,y,o=v.exec(S);if(o&&o[2]in g&&(p=g[o[2]],y=o[3],S=o[1],y)){var l=Number(y);isNaN(l)?y=y.replace(/^["']|["']$/g,""):y=l}return i(S,p,y)}h.qsa=function(S,i){return m(i,function(p,y,o){try{var l;!p&&y?p="*":u.test(p)&&(l=r(S).addClass(f),p="."+f+" "+p);var t=s(S,p)}catch(n){throw console.error("error performing selector: %o",i),n}finally{l&&l.removeClass(f)}return y?h.uniq(r.map(t,function(n,c){return y.call(n,c,t,o)})):t})},h.matches=function(S,i){return m(i,function(p,y,o){return(!p||A(S,p))&&(!y||y.call(S,null,o)===S)})}}(e),P.exports=e},"./node_modules/core-js/library/fn/array/from.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.string.iterator.js"),e("./node_modules/core-js/library/modules/es6.array.from.js"),P.exports=e("./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/get-iterator.js":function(P,E,e){e("./node_modules/core-js/library/modules/web.dom.iterable.js"),e("./node_modules/core-js/library/modules/es6.string.iterator.js"),P.exports=e("./node_modules/core-js/library/modules/core.get-iterator.js")},"./node_modules/core-js/library/fn/json/stringify.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_core.js"),h=r.JSON||(r.JSON={stringify:JSON.stringify});P.exports=function(A){return h.stringify.apply(h,arguments)}},"./node_modules/core-js/library/fn/object/assign.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.assign.js"),P.exports=e("./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/object/create.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.create.js");var r=e("./node_modules/core-js/library/modules/_core.js").Object;P.exports=function(s,A){return r.create(s,A)}},"./node_modules/core-js/library/fn/object/define-property.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.define-property.js");var r=e("./node_modules/core-js/library/modules/_core.js").Object;P.exports=function(s,A,_){return r.defineProperty(s,A,_)}},"./node_modules/core-js/library/fn/object/get-own-property-descriptor.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js");var r=e("./node_modules/core-js/library/modules/_core.js").Object;P.exports=function(s,A){return r.getOwnPropertyDescriptor(s,A)}},"./node_modules/core-js/library/fn/object/keys.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.keys.js"),P.exports=e("./node_modules/core-js/library/modules/_core.js").Object.keys},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),P.exports=e("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/symbol/index.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.symbol.js"),e("./node_modules/core-js/library/modules/es6.object.to-string.js"),e("./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),e("./node_modules/core-js/library/modules/es7.symbol.observable.js"),P.exports=e("./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.string.iterator.js"),e("./node_modules/core-js/library/modules/web.dom.iterable.js"),P.exports=e("./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":function(P,E){P.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":function(P,E){P.exports=function(){}},"./node_modules/core-js/library/modules/_an-object.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_is-object.js");P.exports=function(h){if(!r(h))throw TypeError(h+" is not an object!");return h}},"./node_modules/core-js/library/modules/_array-includes.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-iobject.js"),h=e("./node_modules/core-js/library/modules/_to-length.js"),s=e("./node_modules/core-js/library/modules/_to-index.js");P.exports=function(A){return function(_,g,v){var u=r(_),f=h(u.length),m=s(v,f),S;if(A&&g!=g){for(;f>m;)if(S=u[m++],S!=S)return!0}else for(;f>m;m++)if((A||m in u)&&u[m]===g)return A||m||0;return!A&&-1}}},"./node_modules/core-js/library/modules/_classof.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_cof.js"),h=e("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),s=r(function(){return arguments}())=="Arguments",A=function(_,g){try{return _[g]}catch{}};P.exports=function(_){var g,v,u;return _===void 0?"Undefined":_===null?"Null":typeof(v=A(g=Object(_),h))=="string"?v:s?r(g):(u=r(g))=="Object"&&typeof g.callee=="function"?"Arguments":u}},"./node_modules/core-js/library/modules/_cof.js":function(P,E){var e={}.toString;P.exports=function(r){return e.call(r).slice(8,-1)}},"./node_modules/core-js/library/modules/_core.js":function(P,E){var e=P.exports={version:"2.4.0"};typeof __e=="number"&&(__e=e)},"./node_modules/core-js/library/modules/_create-property.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-dp.js"),h=e("./node_modules/core-js/library/modules/_property-desc.js");P.exports=function(s,A,_){A in s?r.f(s,A,h(0,_)):s[A]=_}},"./node_modules/core-js/library/modules/_ctx.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_a-function.js");P.exports=function(h,s,A){if(r(h),s===void 0)return h;switch(A){case 1:return function(_){return h.call(s,_)};case 2:return function(_,g){return h.call(s,_,g)};case 3:return function(_,g,v){return h.call(s,_,g,v)}}return function(){return h.apply(s,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":function(P,E){P.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":function(P,E,e){P.exports=!e("./node_modules/core-js/library/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/library/modules/_dom-create.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_is-object.js"),h=e("./node_modules/core-js/library/modules/_global.js").document,s=r(h)&&r(h.createElement);P.exports=function(A){return s?h.createElement(A):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":function(P,E){P.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-keys.js"),h=e("./node_modules/core-js/library/modules/_object-gops.js"),s=e("./node_modules/core-js/library/modules/_object-pie.js");P.exports=function(A){var _=r(A),g=h.f;if(g)for(var v=g(A),u=s.f,f=0,m;v.length>f;)u.call(A,m=v[f++])&&_.push(m);return _}},"./node_modules/core-js/library/modules/_export.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_global.js"),h=e("./node_modules/core-js/library/modules/_core.js"),s=e("./node_modules/core-js/library/modules/_ctx.js"),A=e("./node_modules/core-js/library/modules/_hide.js"),_="prototype",g=function(v,u,f){var m=v&g.F,S=v&g.G,i=v&g.S,p=v&g.P,y=v&g.B,o=v&g.W,l=S?h:h[u]||(h[u]={}),t=l[_],n=S?r:i?r[u]:(r[u]||{})[_],c,b,x;S&&(f=u);for(c in f)b=!m&&n&&n[c]!==void 0,!(b&&c in l)&&(x=b?n[c]:f[c],l[c]=S&&typeof n[c]!="function"?f[c]:y&&b?s(x,r):o&&n[c]==x?function(a){var d=function(C,T,L){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(C);case 2:return new a(C,T)}return new a(C,T,L)}return a.apply(this,arguments)};return d[_]=a[_],d}(x):p&&typeof x=="function"?s(Function.call,x):x,p&&((l.virtual||(l.virtual={}))[c]=x,v&g.R&&t&&!t[c]&&A(t,c,x)))};g.F=1,g.G=2,g.S=4,g.P=8,g.B=16,g.W=32,g.U=64,g.R=128,P.exports=g},"./node_modules/core-js/library/modules/_fails.js":function(P,E){P.exports=function(e){try{return!!e()}catch{return!0}}},"./node_modules/core-js/library/modules/_global.js":function(P,E){var e=P.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},"./node_modules/core-js/library/modules/_has.js":function(P,E){var e={}.hasOwnProperty;P.exports=function(r,h){return e.call(r,h)}},"./node_modules/core-js/library/modules/_hide.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-dp.js"),h=e("./node_modules/core-js/library/modules/_property-desc.js");P.exports=e("./node_modules/core-js/library/modules/_descriptors.js")?function(s,A,_){return r.f(s,A,h(1,_))}:function(s,A,_){return s[A]=_,s}},"./node_modules/core-js/library/modules/_html.js":function(P,E,e){P.exports=e("./node_modules/core-js/library/modules/_global.js").document&&document.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":function(P,E,e){P.exports=!e("./node_modules/core-js/library/modules/_descriptors.js")&&!e("./node_modules/core-js/library/modules/_fails.js")(function(){return Object.defineProperty(e("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/library/modules/_iobject.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_cof.js");P.exports=Object("z").propertyIsEnumerable(0)?Object:function(h){return r(h)=="String"?h.split(""):Object(h)}},"./node_modules/core-js/library/modules/_is-array-iter.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_iterators.js"),h=e("./node_modules/core-js/library/modules/_wks.js")("iterator"),s=Array.prototype;P.exports=function(A){return A!==void 0&&(r.Array===A||s[h]===A)}},"./node_modules/core-js/library/modules/_is-array.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_cof.js");P.exports=Array.isArray||function(s){return r(s)=="Array"}},"./node_modules/core-js/library/modules/_is-object.js":function(P,E){P.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},"./node_modules/core-js/library/modules/_iter-call.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_an-object.js");P.exports=function(h,s,A,_){try{return _?s(r(A)[0],A[1]):s(A)}catch(v){var g=h.return;throw g!==void 0&&r(g.call(h)),v}}},"./node_modules/core-js/library/modules/_iter-create.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-create.js"),h=e("./node_modules/core-js/library/modules/_property-desc.js"),s=e("./node_modules/core-js/library/modules/_set-to-string-tag.js"),A={};e("./node_modules/core-js/library/modules/_hide.js")(A,e("./node_modules/core-js/library/modules/_wks.js")("iterator"),function(){return this}),P.exports=function(_,g,v){_.prototype=r(A,{next:h(1,v)}),s(_,g+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_library.js"),h=e("./node_modules/core-js/library/modules/_export.js"),s=e("./node_modules/core-js/library/modules/_redefine.js"),A=e("./node_modules/core-js/library/modules/_hide.js"),_=e("./node_modules/core-js/library/modules/_has.js"),g=e("./node_modules/core-js/library/modules/_iterators.js"),v=e("./node_modules/core-js/library/modules/_iter-create.js"),u=e("./node_modules/core-js/library/modules/_set-to-string-tag.js"),f=e("./node_modules/core-js/library/modules/_object-gpo.js"),m=e("./node_modules/core-js/library/modules/_wks.js")("iterator"),S=!([].keys&&"next"in[].keys()),i="@@iterator",p="keys",y="values",o=function(){return this};P.exports=function(l,t,n,c,b,x,a){v(n,t,c);var d=function(N){if(!S&&N in R)return R[N];switch(N){case p:return function(){return new n(this,N)};case y:return function(){return new n(this,N)}}return function(){return new n(this,N)}},C=t+" Iterator",T=b==y,L=!1,R=l.prototype,O=R[m]||R[i]||b&&R[b],j=O||d(b),D=b?T?d("entries"):j:void 0,w=t=="Array"&&R.entries||O,F,B,M;if(w&&(M=f(w.call(new l)),M!==Object.prototype&&(u(M,C,!0),!r&&!_(M,m)&&A(M,m,o))),T&&O&&O.name!==y&&(L=!0,j=function(){return O.call(this)}),(!r||a)&&(S||L||!R[m])&&A(R,m,j),g[t]=j,g[C]=o,b)if(F={values:T?j:d(y),keys:x?j:d(p),entries:D},a)for(B in F)B in R||s(R,B,F[B]);else h(h.P+h.F*(S||L),t,F);return F}},"./node_modules/core-js/library/modules/_iter-detect.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_wks.js")("iterator"),h=!1;try{var s=[7][r]();s.return=function(){h=!0},Array.from(s,function(){throw 2})}catch{}P.exports=function(A,_){if(!_&&!h)return!1;var g=!1;try{var v=[7],u=v[r]();u.next=function(){return{done:g=!0}},v[r]=function(){return u},A(v)}catch{}return g}},"./node_modules/core-js/library/modules/_iter-step.js":function(P,E){P.exports=function(e,r){return{value:r,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":function(P,E){P.exports={}},"./node_modules/core-js/library/modules/_keyof.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-keys.js"),h=e("./node_modules/core-js/library/modules/_to-iobject.js");P.exports=function(s,A){for(var _=h(s),g=r(_),v=g.length,u=0,f;v>u;)if(_[f=g[u++]]===A)return f}},"./node_modules/core-js/library/modules/_library.js":function(P,E){P.exports=!0},"./node_modules/core-js/library/modules/_meta.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_uid.js")("meta"),h=e("./node_modules/core-js/library/modules/_is-object.js"),s=e("./node_modules/core-js/library/modules/_has.js"),A=e("./node_modules/core-js/library/modules/_object-dp.js").f,_=0,g=Object.isExtensible||function(){return!0},v=!e("./node_modules/core-js/library/modules/_fails.js")(function(){return g(Object.preventExtensions({}))}),u=function(p){A(p,r,{value:{i:"O"+ ++_,w:{}}})},f=function(p,y){if(!h(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!s(p,r)){if(!g(p))return"F";if(!y)return"E";u(p)}return p[r].i},m=function(p,y){if(!s(p,r)){if(!g(p))return!0;if(!y)return!1;u(p)}return p[r].w},S=function(p){return v&&i.NEED&&g(p)&&!s(p,r)&&u(p),p},i=P.exports={KEY:r,NEED:!1,fastKey:f,getWeak:m,onFreeze:S}},"./node_modules/core-js/library/modules/_object-assign.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-keys.js"),h=e("./node_modules/core-js/library/modules/_object-gops.js"),s=e("./node_modules/core-js/library/modules/_object-pie.js"),A=e("./node_modules/core-js/library/modules/_to-object.js"),_=e("./node_modules/core-js/library/modules/_iobject.js"),g=Object.assign;P.exports=!g||e("./node_modules/core-js/library/modules/_fails.js")(function(){var v={},u={},f=Symbol(),m="abcdefghijklmnopqrst";return v[f]=7,m.split("").forEach(function(S){u[S]=S}),g({},v)[f]!=7||Object.keys(g({},u)).join("")!=m})?function(u,f){for(var m=A(u),S=arguments.length,i=1,p=h.f,y=s.f;S>i;)for(var o=_(arguments[i++]),l=p?r(o).concat(p(o)):r(o),t=l.length,n=0,c;t>n;)y.call(o,c=l[n++])&&(m[c]=o[c]);return m}:g},"./node_modules/core-js/library/modules/_object-create.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_an-object.js"),h=e("./node_modules/core-js/library/modules/_object-dps.js"),s=e("./node_modules/core-js/library/modules/_enum-bug-keys.js"),A=e("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),_=function(){},g="prototype",v=function(){var u=e("./node_modules/core-js/library/modules/_dom-create.js")("iframe"),f=s.length,m="<",S=">",i;for(u.style.display="none",e("./node_modules/core-js/library/modules/_html.js").appendChild(u),u.src="javascript:",i=u.contentWindow.document,i.open(),i.write(m+"script"+S+"document.F=Object"+m+"/script"+S),i.close(),v=i.F;f--;)delete v[g][s[f]];return v()};P.exports=Object.create||function(f,m){var S;return f!==null?(_[g]=r(f),S=new _,_[g]=null,S[A]=f):S=v(),m===void 0?S:h(S,m)}},"./node_modules/core-js/library/modules/_object-dp.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_an-object.js"),h=e("./node_modules/core-js/library/modules/_ie8-dom-define.js"),s=e("./node_modules/core-js/library/modules/_to-primitive.js"),A=Object.defineProperty;E.f=e("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(g,v,u){if(r(g),v=s(v,!0),r(u),h)try{return A(g,v,u)}catch{}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(g[v]=u.value),g}},"./node_modules/core-js/library/modules/_object-dps.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-dp.js"),h=e("./node_modules/core-js/library/modules/_an-object.js"),s=e("./node_modules/core-js/library/modules/_object-keys.js");P.exports=e("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(_,g){h(_);for(var v=s(g),u=v.length,f=0,m;u>f;)r.f(_,m=v[f++],g[m]);return _}},"./node_modules/core-js/library/modules/_object-gopd.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-pie.js"),h=e("./node_modules/core-js/library/modules/_property-desc.js"),s=e("./node_modules/core-js/library/modules/_to-iobject.js"),A=e("./node_modules/core-js/library/modules/_to-primitive.js"),_=e("./node_modules/core-js/library/modules/_has.js"),g=e("./node_modules/core-js/library/modules/_ie8-dom-define.js"),v=Object.getOwnPropertyDescriptor;E.f=e("./node_modules/core-js/library/modules/_descriptors.js")?v:function(f,m){if(f=s(f),m=A(m,!0),g)try{return v(f,m)}catch{}if(_(f,m))return h(!r.f.call(f,m),f[m])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-iobject.js"),h=e("./node_modules/core-js/library/modules/_object-gopn.js").f,s={}.toString,A=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_=function(g){try{return h(g)}catch{return A.slice()}};P.exports.f=function(v){return A&&s.call(v)=="[object Window]"?_(v):h(r(v))}},"./node_modules/core-js/library/modules/_object-gopn.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-keys-internal.js"),h=e("./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");E.f=Object.getOwnPropertyNames||function(A){return r(A,h)}},"./node_modules/core-js/library/modules/_object-gops.js":function(P,E){E.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_has.js"),h=e("./node_modules/core-js/library/modules/_to-object.js"),s=e("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),A=Object.prototype;P.exports=Object.getPrototypeOf||function(_){return _=h(_),r(_,s)?_[s]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?A:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_has.js"),h=e("./node_modules/core-js/library/modules/_to-iobject.js"),s=e("./node_modules/core-js/library/modules/_array-includes.js")(!1),A=e("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");P.exports=function(_,g){var v=h(_),u=0,f=[],m;for(m in v)m!=A&&r(v,m)&&f.push(m);for(;g.length>u;)r(v,m=g[u++])&&(~s(f,m)||f.push(m));return f}},"./node_modules/core-js/library/modules/_object-keys.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-keys-internal.js"),h=e("./node_modules/core-js/library/modules/_enum-bug-keys.js");P.exports=Object.keys||function(A){return r(A,h)}},"./node_modules/core-js/library/modules/_object-pie.js":function(P,E){E.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_export.js"),h=e("./node_modules/core-js/library/modules/_core.js"),s=e("./node_modules/core-js/library/modules/_fails.js");P.exports=function(A,_){var g=(h.Object||{})[A]||Object[A],v={};v[A]=_(g),r(r.S+r.F*s(function(){g(1)}),"Object",v)}},"./node_modules/core-js/library/modules/_property-desc.js":function(P,E){P.exports=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}}},"./node_modules/core-js/library/modules/_redefine.js":function(P,E,e){P.exports=e("./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-proto.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_is-object.js"),h=e("./node_modules/core-js/library/modules/_an-object.js"),s=function(A,_){if(h(A),!r(_)&&_!==null)throw TypeError(_+": can't set as prototype!")};P.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(A,_,g){try{g=e("./node_modules/core-js/library/modules/_ctx.js")(Function.call,e("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2),g(A,[]),_=!(A instanceof Array)}catch{_=!0}return function(u,f){return s(u,f),_?u.__proto__=f:g(u,f),u}}({},!1):void 0),check:s}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_object-dp.js").f,h=e("./node_modules/core-js/library/modules/_has.js"),s=e("./node_modules/core-js/library/modules/_wks.js")("toStringTag");P.exports=function(A,_,g){A&&!h(A=g?A:A.prototype,s)&&r(A,s,{configurable:!0,value:_})}},"./node_modules/core-js/library/modules/_shared-key.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_shared.js")("keys"),h=e("./node_modules/core-js/library/modules/_uid.js");P.exports=function(s){return r[s]||(r[s]=h(s))}},"./node_modules/core-js/library/modules/_shared.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_global.js"),h="__core-js_shared__",s=r[h]||(r[h]={});P.exports=function(A){return s[A]||(s[A]={})}},"./node_modules/core-js/library/modules/_string-at.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-integer.js"),h=e("./node_modules/core-js/library/modules/_defined.js");P.exports=function(s){return function(A,_){var g=String(h(A)),v=r(_),u=g.length,f,m;return v<0||v>=u?s?"":void 0:(f=g.charCodeAt(v),f<55296||f>56319||v+1===u||(m=g.charCodeAt(v+1))<56320||m>57343?s?g.charAt(v):f:s?g.slice(v,v+2):(f-55296<<10)+(m-56320)+65536)}}},"./node_modules/core-js/library/modules/_to-index.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-integer.js"),h=Math.max,s=Math.min;P.exports=function(A,_){return A=r(A),A<0?h(A+_,0):s(A,_)}},"./node_modules/core-js/library/modules/_to-integer.js":function(P,E){var e=Math.ceil,r=Math.floor;P.exports=function(h){return isNaN(h=+h)?0:(h>0?r:e)(h)}},"./node_modules/core-js/library/modules/_to-iobject.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_iobject.js"),h=e("./node_modules/core-js/library/modules/_defined.js");P.exports=function(s){return r(h(s))}},"./node_modules/core-js/library/modules/_to-length.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-integer.js"),h=Math.min;P.exports=function(s){return s>0?h(r(s),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_defined.js");P.exports=function(h){return Object(r(h))}},"./node_modules/core-js/library/modules/_to-primitive.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_is-object.js");P.exports=function(h,s){if(!r(h))return h;var A,_;if(s&&typeof(A=h.toString)=="function"&&!r(_=A.call(h))||typeof(A=h.valueOf)=="function"&&!r(_=A.call(h))||!s&&typeof(A=h.toString)=="function"&&!r(_=A.call(h)))return _;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":function(P,E){var e=0,r=Math.random();P.exports=function(h){return"Symbol(".concat(h===void 0?"":h,")_",(++e+r).toString(36))}},"./node_modules/core-js/library/modules/_wks-define.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_global.js"),h=e("./node_modules/core-js/library/modules/_core.js"),s=e("./node_modules/core-js/library/modules/_library.js"),A=e("./node_modules/core-js/library/modules/_wks-ext.js"),_=e("./node_modules/core-js/library/modules/_object-dp.js").f;P.exports=function(g){var v=h.Symbol||(h.Symbol=s?{}:r.Symbol||{});g.charAt(0)!="_"&&!(g in v)&&_(v,g,{value:A.f(g)})}},"./node_modules/core-js/library/modules/_wks-ext.js":function(P,E,e){E.f=e("./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_shared.js")("wks"),h=e("./node_modules/core-js/library/modules/_uid.js"),s=e("./node_modules/core-js/library/modules/_global.js").Symbol,A=typeof s=="function",_=P.exports=function(g){return r[g]||(r[g]=A&&s[g]||(A?s:h)("Symbol."+g))};_.store=r},"./node_modules/core-js/library/modules/core.get-iterator-method.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_classof.js"),h=e("./node_modules/core-js/library/modules/_wks.js")("iterator"),s=e("./node_modules/core-js/library/modules/_iterators.js");P.exports=e("./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(A){if(A!=null)return A[h]||A["@@iterator"]||s[r(A)]}},"./node_modules/core-js/library/modules/core.get-iterator.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_an-object.js"),h=e("./node_modules/core-js/library/modules/core.get-iterator-method.js");P.exports=e("./node_modules/core-js/library/modules/_core.js").getIterator=function(s){var A=h(s);if(typeof A!="function")throw TypeError(s+" is not iterable!");return r(A.call(s))}},"./node_modules/core-js/library/modules/es6.array.from.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_ctx.js"),h=e("./node_modules/core-js/library/modules/_export.js"),s=e("./node_modules/core-js/library/modules/_to-object.js"),A=e("./node_modules/core-js/library/modules/_iter-call.js"),_=e("./node_modules/core-js/library/modules/_is-array-iter.js"),g=e("./node_modules/core-js/library/modules/_to-length.js"),v=e("./node_modules/core-js/library/modules/_create-property.js"),u=e("./node_modules/core-js/library/modules/core.get-iterator-method.js");h(h.S+h.F*!e("./node_modules/core-js/library/modules/_iter-detect.js")(function(f){Array.from(f)}),"Array",{from:function(m){var S=s(m),i=typeof this=="function"?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,o=y!==void 0,l=0,t=u(S),n,c,b,x;if(o&&(y=r(y,p>2?arguments[2]:void 0,2)),t!=null&&!(i==Array&&_(t)))for(x=t.call(S),c=new i;!(b=x.next()).done;l++)v(c,l,o?A(x,y,[b.value,l],!0):b.value);else for(n=g(S.length),c=new i(n);n>l;l++)v(c,l,o?y(S[l],l):S[l]);return c.length=l,c}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_add-to-unscopables.js"),h=e("./node_modules/core-js/library/modules/_iter-step.js"),s=e("./node_modules/core-js/library/modules/_iterators.js"),A=e("./node_modules/core-js/library/modules/_to-iobject.js");P.exports=e("./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",function(_,g){this._t=A(_),this._i=0,this._k=g},function(){var _=this._t,g=this._k,v=this._i++;return!_||v>=_.length?(this._t=void 0,h(1)):g=="keys"?h(0,v):g=="values"?h(0,_[v]):h(0,[v,_[v]])},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},"./node_modules/core-js/library/modules/es6.object.assign.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_export.js");r(r.S+r.F,"Object",{assign:e("./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.create.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{create:e("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_export.js");r(r.S+r.F*!e("./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:e("./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-iobject.js"),h=e("./node_modules/core-js/library/modules/_object-gopd.js").f;e("./node_modules/core-js/library/modules/_object-sap.js")("getOwnPropertyDescriptor",function(){return function(A,_){return h(r(A),_)}})},"./node_modules/core-js/library/modules/es6.object.keys.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_to-object.js"),h=e("./node_modules/core-js/library/modules/_object-keys.js");e("./node_modules/core-js/library/modules/_object-sap.js")("keys",function(){return function(A){return h(r(A))}})},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_export.js");r(r.S,"Object",{setPrototypeOf:e("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":function(P,E){},"./node_modules/core-js/library/modules/es6.string.iterator.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_string-at.js")(!0);e("./node_modules/core-js/library/modules/_iter-define.js")(String,"String",function(h){this._t=String(h),this._i=0},function(){var h=this._t,s=this._i,A;return s>=h.length?{value:void 0,done:!0}:(A=r(h,s),this._i+=A.length,{value:A,done:!1})})},"./node_modules/core-js/library/modules/es6.symbol.js":function(P,E,e){var r=e("./node_modules/core-js/library/modules/_global.js"),h=e("./node_modules/core-js/library/modules/_has.js"),s=e("./node_modules/core-js/library/modules/_descriptors.js"),A=e("./node_modules/core-js/library/modules/_export.js"),_=e("./node_modules/core-js/library/modules/_redefine.js"),g=e("./node_modules/core-js/library/modules/_meta.js").KEY,v=e("./node_modules/core-js/library/modules/_fails.js"),u=e("./node_modules/core-js/library/modules/_shared.js"),f=e("./node_modules/core-js/library/modules/_set-to-string-tag.js"),m=e("./node_modules/core-js/library/modules/_uid.js"),S=e("./node_modules/core-js/library/modules/_wks.js"),i=e("./node_modules/core-js/library/modules/_wks-ext.js"),p=e("./node_modules/core-js/library/modules/_wks-define.js"),y=e("./node_modules/core-js/library/modules/_keyof.js"),o=e("./node_modules/core-js/library/modules/_enum-keys.js"),l=e("./node_modules/core-js/library/modules/_is-array.js"),t=e("./node_modules/core-js/library/modules/_an-object.js"),n=e("./node_modules/core-js/library/modules/_to-iobject.js"),c=e("./node_modules/core-js/library/modules/_to-primitive.js"),b=e("./node_modules/core-js/library/modules/_property-desc.js"),x=e("./node_modules/core-js/library/modules/_object-create.js"),a=e("./node_modules/core-js/library/modules/_object-gopn-ext.js"),d=e("./node_modules/core-js/library/modules/_object-gopd.js"),C=e("./node_modules/core-js/library/modules/_object-dp.js"),T=e("./node_modules/core-js/library/modules/_object-keys.js"),L=d.f,R=C.f,O=a.f,j=r.Symbol,D=r.JSON,w=D&&D.stringify,F="prototype",B=S("_hidden"),M=S("toPrimitive"),N={}.propertyIsEnumerable,I=u("symbol-registry"),X=u("symbols"),$=u("op-symbols"),ee=Object[F],K=typeof j=="function",J=r.QObject,V=!J||!J[F]||!J[F].findChild,W=s&&v(function(){return x(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a!=7})?function(k,U,H){var Q=L(ee,U);Q&&delete ee[U],R(k,U,H),Q&&k!==ee&&R(ee,U,Q)}:R,Y=function(k){var U=X[k]=x(j[F]);return U._k=k,U},te=K&&typeof j.iterator=="symbol"?function(k){return typeof k=="symbol"}:function(k){return k instanceof j},se=function(U,H,Q){return U===ee&&se($,H,Q),t(U),H=c(H,!0),t(Q),h(X,H)?(Q.enumerable?(h(U,B)&&U[B][H]&&(U[B][H]=!1),Q=x(Q,{enumerable:b(0,!1)})):(h(U,B)||R(U,B,b(1,{})),U[B][H]=!0),W(U,H,Q)):R(U,H,Q)},ce=function(U,H){t(U);for(var Q=o(H=n(H)),q=0,ie=Q.length,oe;ie>q;)se(U,oe=Q[q++],H[oe]);return U},ue=function(U,H){return H===void 0?x(U):ce(x(U),H)},re=function(U){var H=N.call(this,U=c(U,!0));return this===ee&&h(X,U)&&!h($,U)?!1:H||!h(this,U)||!h(X,U)||h(this,B)&&this[B][U]?H:!0},ne=function(U,H){if(U=n(U),H=c(H,!0),!(U===ee&&h(X,H)&&!h($,H))){var Q=L(U,H);return Q&&h(X,H)&&!(h(U,B)&&U[B][H])&&(Q.enumerable=!0),Q}},z=function(U){for(var H=O(n(U)),Q=[],q=0,ie;H.length>q;)!h(X,ie=H[q++])&&ie!=B&&ie!=g&&Q.push(ie);return Q},ae=function(U){for(var H=U===ee,Q=O(H?$:n(U)),q=[],ie=0,oe;Q.length>ie;)h(X,oe=Q[ie++])&&(H?h(ee,oe):!0)&&q.push(X[oe]);return q};K||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var U=m(arguments.length>0?arguments[0]:void 0),H=function(Q){this===ee&&H.call($,Q),h(this,B)&&h(this[B],U)&&(this[B][U]=!1),W(this,U,b(1,Q))};return s&&V&&W(ee,U,{configurable:!0,set:H}),Y(U)},_(j[F],"toString",function(){return this._k}),d.f=ne,C.f=se,e("./node_modules/core-js/library/modules/_object-gopn.js").f=a.f=z,e("./node_modules/core-js/library/modules/_object-pie.js").f=re,e("./node_modules/core-js/library/modules/_object-gops.js").f=ae,s&&!e("./node_modules/core-js/library/modules/_library.js")&&_(ee,"propertyIsEnumerable",re,!0),i.f=function(k){return Y(S(k))}),A(A.G+A.W+A.F*!K,{Symbol:j});for(var de="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),he=0;de.length>he;)S(de[he++]);for(var de=T(S.store),he=0;de.length>he;)p(de[he++]);A(A.S+A.F*!K,"Symbol",{for:function(k){return h(I,k+="")?I[k]:I[k]=j(k)},keyFor:function(U){if(te(U))return y(I,U);throw TypeError(U+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),A(A.S+A.F*!K,"Object",{create:ue,defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:ne,getOwnPropertyNames:z,getOwnPropertySymbols:ae}),D&&A(A.S+A.F*(!K||v(function(){var k=j();return w([k])!="[null]"||w({a:k})!="{}"||w(Object(k))!="{}"})),"JSON",{stringify:function(U){if(!(U===void 0||te(U))){for(var H=[U],Q=1,q,ie;arguments.length>Q;)H.push(arguments[Q++]);return q=H[1],typeof q=="function"&&(ie=q),(ie||!l(q))&&(q=function(oe,fe){if(ie&&(fe=ie.call(this,oe,fe)),!te(fe))return fe}),H[1]=q,w.apply(D,H)}}}),j[F][M]||e("./node_modules/core-js/library/modules/_hide.js")(j[F],M,j[F].valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":function(P,E,e){e("./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":function(P,E,e){e("./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":function(P,E,e){e("./node_modules/core-js/library/modules/es6.array.iterator.js");for(var r=e("./node_modules/core-js/library/modules/_global.js"),h=e("./node_modules/core-js/library/modules/_hide.js"),s=e("./node_modules/core-js/library/modules/_iterators.js"),A=e("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),_=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],g=0;g<5;g++){var v=_[g],u=r[v],f=u&&u.prototype;f&&!f[A]&&h(f,A,v),s[v]=s.Array}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/components/container/public/style.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.container[data-container] {
  position: absolute;
  background-color: black;
  height: 100%;
  width: 100%;
  max-width: 100%; }
  .container[data-container] .chromeless {
    cursor: default; }

[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {
  cursor: pointer; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/components/core/public/style.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`[data-player] {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-transform: translate3d(0, 0, 0);
          transform: translate3d(0, 0, 0);
  position: relative;
  margin: 0;
  padding: 0;
  border: 0;
  font-style: normal;
  font-weight: normal;
  text-align: center;
  overflow: hidden;
  font-size: 100%;
  font-family: "Roboto", "Open Sans", Arial, sans-serif;
  text-shadow: 0 0 0;
  box-sizing: border-box; }
  [data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,
  [data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,
  [data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,
  [data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,
  [data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,
  [data-player] b, [data-player] u, [data-player] i, [data-player] center,
  [data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,
  [data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,
  [data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,
  [data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,
  [data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,
  [data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,
  [data-player] time, [data-player] mark, [data-player] audio, [data-player] video {
    margin: 0;
    padding: 0;
    border: 0;
    font: inherit;
    font-size: 100%;
    vertical-align: baseline; }
  [data-player] table {
    border-collapse: collapse;
    border-spacing: 0; }
  [data-player] caption, [data-player] th, [data-player] td {
    text-align: left;
    font-weight: normal;
    vertical-align: middle; }
  [data-player] q, [data-player] blockquote {
    quotes: none; }
    [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {
      content: "";
      content: none; }
  [data-player] a img {
    border: none; }
  [data-player]:focus {
    outline: 0; }
  [data-player] * {
    max-width: none;
    box-sizing: inherit;
    float: none; }
  [data-player] div {
    display: block; }
  [data-player].fullscreen {
    width: 100% !important;
    height: 100% !important;
    top: 0;
    left: 0; }
  [data-player].nocursor {
    cursor: none; }

.clappr-style {
  display: none !important; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.clappr-flash-playback[data-flash-playback] {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  pointer-events: none; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`[data-html5-video] {
  position: absolute;
  height: 100%;
  width: 100%;
  display: block; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`[data-html-img] {
  max-width: 100%;
  max-height: 100%; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`[data-no-op] {
  position: absolute;
  height: 100%;
  width: 100%;
  text-align: center; }

[data-no-op] p[data-no-op-msg] {
  position: absolute;
  text-align: center;
  font-size: 25px;
  left: 0;
  right: 0;
  color: white;
  padding: 10px;
  /* center vertically */
  top: 50%;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%);
  max-height: 100%;
  overflow: auto; }

[data-no-op] canvas[data-no-op-canvas] {
  background-color: #777;
  height: 100%;
  width: 100%; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.cc-controls[data-cc-controls] {
  float: right;
  position: relative;
  display: none; }
  .cc-controls[data-cc-controls].available {
    display: block; }
  .cc-controls[data-cc-controls] .cc-button {
    padding: 6px !important; }
    .cc-controls[data-cc-controls] .cc-button.enabled {
      display: block;
      opacity: 1.0; }
      .cc-controls[data-cc-controls] .cc-button.enabled:hover {
        opacity: 1.0;
        text-shadow: none; }
  .cc-controls[data-cc-controls] > ul {
    list-style-type: none;
    position: absolute;
    bottom: 25px;
    border: 1px solid black;
    display: none;
    background-color: #e6e6e6; }
  .cc-controls[data-cc-controls] li {
    font-size: 10px; }
    .cc-controls[data-cc-controls] li[data-title] {
      background-color: #c3c2c2;
      padding: 5px; }
    .cc-controls[data-cc-controls] li a {
      color: #444;
      padding: 2px 10px;
      display: block;
      text-decoration: none; }
      .cc-controls[data-cc-controls] li a:hover {
        background-color: #555;
        color: white; }
        .cc-controls[data-cc-controls] li a:hover a {
          color: white;
          text-decoration: none; }
    .cc-controls[data-cc-controls] li.current a {
      color: #f00; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.dvr-controls[data-dvr-controls] {
  display: inline-block;
  float: left;
  color: #fff;
  line-height: 32px;
  font-size: 10px;
  font-weight: bold;
  margin-left: 6px; }
  .dvr-controls[data-dvr-controls] .live-info {
    cursor: default;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase; }
    .dvr-controls[data-dvr-controls] .live-info:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #ff0101; }
    .dvr-controls[data-dvr-controls] .live-info.disabled {
      opacity: 0.3; }
      .dvr-controls[data-dvr-controls] .live-info.disabled:before {
        background-color: #fff; }
  .dvr-controls[data-dvr-controls] .live-button {
    cursor: pointer;
    outline: none;
    display: none;
    border: 0;
    color: #fff;
    background-color: transparent;
    height: 32px;
    padding: 0;
    opacity: 0.7;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase;
    transition: all 0.1s ease; }
    .dvr-controls[data-dvr-controls] .live-button:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #fff; }
    .dvr-controls[data-dvr-controls] .live-button:hover {
      opacity: 1;
      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }

.dvr .dvr-controls[data-dvr-controls] .live-info {
  display: none; }

.dvr .dvr-controls[data-dvr-controls] .live-button {
  display: block; }

.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #005aff; }

.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #ff0101; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`div.player-error-screen {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: #CCCACA;
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 2000;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center; }
  div.player-error-screen__content[data-error-screen] {
    font-size: 14px;
    color: #CCCACA;
    margin-top: 45px; }
  div.player-error-screen__title[data-error-screen] {
    font-weight: bold;
    line-height: 30px;
    font-size: 18px; }
  div.player-error-screen__message[data-error-screen] {
    width: 90%;
    margin: 0 auto; }
  div.player-error-screen__code[data-error-screen] {
    font-size: 13px;
    margin-top: 15px; }
  div.player-error-screen__reload {
    cursor: pointer;
    width: 30px;
    margin: 15px auto 0; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss":function(P,E,e){var r=e("./node_modules/css-loader/lib/url/escape.js");E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.media-control-notransition {
  transition: none !important; }

.media-control[data-media-control] {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 9999;
  pointer-events: none; }
  .media-control[data-media-control].dragging {
    pointer-events: auto;
    cursor: -webkit-grabbing !important;
    cursor: grabbing !important;
    cursor: url(`+r(e("./src/plugins/media_control/public/closed-hand.cur"))+`), move; }
    .media-control[data-media-control].dragging * {
      cursor: -webkit-grabbing !important;
      cursor: grabbing !important;
      cursor: url(`+r(e("./src/plugins/media_control/public/closed-hand.cur"))+`), move; }
  .media-control[data-media-control] .media-control-background[data-background] {
    position: absolute;
    height: 40%;
    width: 100%;
    bottom: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
    transition: opacity 0.6s ease-out; }
  .media-control[data-media-control] .media-control-icon {
    line-height: 0;
    letter-spacing: 0;
    speak: none;
    color: #fff;
    opacity: 0.5;
    vertical-align: middle;
    text-align: left;
    transition: all 0.1s ease; }
  .media-control[data-media-control] .media-control-icon:hover {
    color: white;
    opacity: 0.75;
    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }
  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {
    opacity: 0; }
  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {
    bottom: -50px; }
    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
      opacity: 0; }
  .media-control[data-media-control] .media-control-layer[data-controls] {
    position: absolute;
    bottom: 7px;
    width: 100%;
    height: 32px;
    font-size: 0;
    vertical-align: middle;
    pointer-events: auto;
    transition: bottom 0.4s ease-out; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {
      position: absolute;
      top: 0;
      left: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {
      height: 100%;
      text-align: center;
      line-height: 32px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {
      position: absolute;
      top: 0;
      right: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {
      background-color: transparent;
      border: 0;
      margin: 0 6px;
      padding: 0;
      cursor: pointer;
      display: inline-block;
      width: 32px;
      height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {
        width: 100%;
        height: 22px; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {
          fill: white; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {
        outline: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {
        float: right;
        background-color: transparent;
        border: 0;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {
        background-color: transparent;
        border: 0;
        cursor: default;
        display: none;
        float: right;
        height: 100%; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {
          display: block;
          opacity: 1.0; }
          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {
            opacity: 1.0;
            text-shadow: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {
        float: left; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {
        float: left; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      display: inline-block;
      font-size: 10px;
      color: white;
      cursor: default;
      line-height: 32px;
      position: relative; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {
      margin: 0 6px 0 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      color: rgba(255, 255, 255, 0.5);
      margin-right: 6px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {
        content: "|";
        margin-right: 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {
      position: absolute;
      top: -20px;
      left: 0;
      display: inline-block;
      vertical-align: middle;
      width: 100%;
      height: 25px;
      cursor: pointer; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {
        width: 100%;
        height: 1px;
        position: relative;
        top: 12px;
        background-color: #666666; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #c2c2c2;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #005aff;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0;
          position: absolute;
          top: -3px;
          width: 5px;
          height: 7px;
          background-color: rgba(255, 255, 255, 0.5);
          transition: opacity 0.1s ease; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
        opacity: 1; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {
        cursor: default; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
        position: absolute;
        -webkit-transform: translateX(-50%);
                transform: translateX(-50%);
        top: 2px;
        left: 0;
        width: 20px;
        height: 20px;
        opacity: 1;
        transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {
          position: absolute;
          left: 6px;
          top: 6px;
          width: 8px;
          height: 8px;
          border-radius: 10px;
          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
          background-color: white; }
    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {
      float: right;
      display: inline-block;
      height: 32px;
      cursor: pointer;
      margin: 0 6px;
      box-sizing: border-box; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {
        float: left;
        bottom: 0; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {
          background-color: transparent;
          border: 0;
          box-sizing: content-box;
          width: 32px;
          height: 32px;
          opacity: 0.5; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {
            opacity: 0.75; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {
            height: 24px;
            position: relative;
            top: 3px; }
            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {
              fill: white; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {
            margin-left: 2px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {
        float: left;
        position: relative;
        overflow: hidden;
        top: 6px;
        width: 42px;
        height: 18px;
        padding: 3px 0;
        transition: width .2s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {
          height: 1px;
          position: relative;
          top: 7px;
          margin: 0 3px;
          background-color: #666666; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #c2c2c2;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #005aff;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {
            opacity: 0;
            position: absolute;
            top: -3px;
            width: 5px;
            height: 7px;
            background-color: rgba(255, 255, 255, 0.5);
            transition: opacity 0.1s ease; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {
          position: absolute;
          -webkit-transform: translateX(-50%);
                  transform: translateX(-50%);
          top: 0px;
          left: 0;
          width: 20px;
          height: 20px;
          opacity: 1;
          transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {
            position: absolute;
            left: 6px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 10px;
            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
            background-color: white; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {
          float: left;
          width: 4px;
          padding-left: 2px;
          height: 12px;
          opacity: 0.5;
          box-shadow: inset 2px 0 0 white;
          transition: -webkit-transform .2s ease-out;
          transition: transform .2s ease-out;
          transition: transform .2s ease-out, -webkit-transform .2s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {
            box-shadow: inset 2px 0 0 #fff;
            opacity: 1; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {
            padding-left: 0; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {
            -webkit-transform: scaleY(1.5);
                    transform: scaleY(1.5); }
  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {
    width: 0;
    height: 12px;
    top: 9px;
    padding: 0; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/poster/public/poster.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.player-poster[data-poster] {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  position: absolute;
  height: 100%;
  width: 100%;
  z-index: 998;
  top: 0;
  left: 0;
  background-color: #000;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: 50% 50%; }
  .player-poster[data-poster].clickable {
    cursor: pointer; }
  .player-poster[data-poster]:hover .play-wrapper[data-poster] {
    opacity: 1; }
  .player-poster[data-poster] .play-wrapper[data-poster] {
    width: 100%;
    height: 25%;
    margin: 0 auto;
    opacity: 0.75;
    transition: opacity 0.1s ease; }
    .player-poster[data-poster] .play-wrapper[data-poster] svg {
      height: 100%; }
      .player-poster[data-poster] .play-wrapper[data-poster] svg path {
        fill: #fff; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.seek-time[data-seek-time] {
  position: absolute;
  white-space: nowrap;
  height: 20px;
  line-height: 20px;
  font-size: 0;
  left: -100%;
  bottom: 55px;
  background-color: rgba(2, 2, 2, 0.5);
  z-index: 9999;
  transition: opacity 0.1s ease; }
  .seek-time[data-seek-time].hidden[data-seek-time] {
    opacity: 0; }
  .seek-time[data-seek-time] [data-seek-time] {
    display: inline-block;
    color: white;
    font-size: 10px;
    padding-left: 7px;
    padding-right: 7px;
    vertical-align: top; }
  .seek-time[data-seek-time] [data-duration] {
    display: inline-block;
    color: rgba(255, 255, 255, 0.5);
    font-size: 10px;
    padding-right: 7px;
    vertical-align: top; }
    .seek-time[data-seek-time] [data-duration]:before {
      content: "|";
      margin-right: 7px; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.spinner-three-bounce[data-spinner] {
  position: absolute;
  margin: 0 auto;
  width: 70px;
  text-align: center;
  z-index: 999;
  left: 0;
  right: 0;
  margin-left: auto;
  margin-right: auto;
  /* center vertically */
  top: 50%;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%); }
  .spinner-three-bounce[data-spinner] > div {
    width: 18px;
    height: 18px;
    background-color: #FFFFFF;
    border-radius: 100%;
    display: inline-block;
    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
            animation: bouncedelay 1.4s infinite ease-in-out;
    /* Prevent first frame from flickering when animation starts */
    -webkit-animation-fill-mode: both;
            animation-fill-mode: both; }
  .spinner-three-bounce[data-spinner] [data-bounce1] {
    -webkit-animation-delay: -0.32s;
            animation-delay: -0.32s; }
  .spinner-three-bounce[data-spinner] [data-bounce2] {
    -webkit-animation-delay: -0.16s;
            animation-delay: -0.16s; }

@-webkit-keyframes bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0);
            transform: scale(0); }
  40% {
    -webkit-transform: scale(1);
            transform: scale(1); } }

@keyframes bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0);
            transform: scale(0); }
  40% {
    -webkit-transform: scale(1);
            transform: scale(1); } }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss":function(P,E,e){E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`.clappr-watermark[data-watermark] {
  position: absolute;
  min-width: 70px;
  max-width: 200px;
  width: 12%;
  text-align: center;
  z-index: 10; }

.clappr-watermark[data-watermark] a {
  outline: none;
  cursor: pointer; }

.clappr-watermark[data-watermark] img {
  max-width: 100%; }

.clappr-watermark[data-watermark-bottom-left] {
  bottom: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-bottom-right] {
  bottom: 10px;
  right: 42px; }

.clappr-watermark[data-watermark-top-left] {
  top: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-top-right] {
  top: 10px;
  right: 37px; }
`,""])},"./node_modules/css-loader/lib/css-base.js":function(P,E){P.exports=function(h){var s=[];return s.toString=function(){return this.map(function(_){var g=e(_,h);return _[2]?"@media "+_[2]+"{"+g+"}":g}).join("")},s.i=function(A,_){typeof A=="string"&&(A=[[null,A,""]]);for(var g={},v=0;v<this.length;v++){var u=this[v][0];typeof u=="number"&&(g[u]=!0)}for(v=0;v<A.length;v++){var f=A[v];(typeof f[0]!="number"||!g[f[0]])&&(_&&!f[2]?f[2]=_:_&&(f[2]="("+f[2]+") and ("+_+")"),s.push(f))}},s};function e(h,s){var A=h[1]||"",_=h[3];if(!_)return A;if(s&&typeof btoa=="function"){var g=r(_),v=_.sources.map(function(u){return"/*# sourceURL="+_.sourceRoot+u+" */"});return[A].concat(v).concat([g]).join(`
`)}return[A].join(`
`)}function r(h){var s=btoa(unescape(encodeURIComponent(JSON.stringify(h)))),A="sourceMappingURL=data:application/json;charset=utf-8;base64,"+s;return"/*# "+A+" */"}},"./node_modules/css-loader/lib/url/escape.js":function(P,E){P.exports=function(r){return typeof r!="string"?r:(/^['"].*['"]$/.test(r)&&(r=r.slice(1,-1)),/["'() \t\n]/.test(r)?'"'+r.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':r)}},"./node_modules/hls.js/dist/hls.js":function(P,E,e){typeof window<"u"&&function(h,s){P.exports=s()}(this,function(){return function(r){var h={};function s(A){if(h[A])return h[A].exports;var _=h[A]={i:A,l:!1,exports:{}};return r[A].call(_.exports,_,_.exports,s),_.l=!0,_.exports}return s.m=r,s.c=h,s.d=function(A,_,g){s.o(A,_)||Object.defineProperty(A,_,{enumerable:!0,get:g})},s.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},s.t=function(A,_){if(_&1&&(A=s(A)),_&8||_&4&&typeof A=="object"&&A&&A.__esModule)return A;var g=Object.create(null);if(s.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:A}),_&2&&typeof A!="string")for(var v in A)s.d(g,v,function(u){return A[u]}.bind(null,v));return g},s.n=function(A){var _=A&&A.__esModule?function(){return A.default}:function(){return A};return s.d(_,"a",_),_},s.o=function(A,_){return Object.prototype.hasOwnProperty.call(A,_)},s.p="/dist/",s(s.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(r,h,s){var A=Object.prototype.hasOwnProperty,_="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(_=!1));function v(S,i,p){this.fn=S,this.context=i,this.once=p||!1}function u(S,i,p,y,o){if(typeof p!="function")throw new TypeError("The listener must be a function");var l=new v(p,y||S,o),t=_?_+i:i;return S._events[t]?S._events[t].fn?S._events[t]=[S._events[t],l]:S._events[t].push(l):(S._events[t]=l,S._eventsCount++),S}function f(S,i){--S._eventsCount===0?S._events=new g:delete S._events[i]}function m(){this._events=new g,this._eventsCount=0}m.prototype.eventNames=function(){var i=[],p,y;if(this._eventsCount===0)return i;for(y in p=this._events)A.call(p,y)&&i.push(_?y.slice(1):y);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(p)):i},m.prototype.listeners=function(i){var p=_?_+i:i,y=this._events[p];if(!y)return[];if(y.fn)return[y.fn];for(var o=0,l=y.length,t=new Array(l);o<l;o++)t[o]=y[o].fn;return t},m.prototype.listenerCount=function(i){var p=_?_+i:i,y=this._events[p];return y?y.fn?1:y.length:0},m.prototype.emit=function(i,p,y,o,l,t){var n=_?_+i:i;if(!this._events[n])return!1;var c=this._events[n],b=arguments.length,x,a;if(c.fn){switch(c.once&&this.removeListener(i,c.fn,void 0,!0),b){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,p),!0;case 3:return c.fn.call(c.context,p,y),!0;case 4:return c.fn.call(c.context,p,y,o),!0;case 5:return c.fn.call(c.context,p,y,o,l),!0;case 6:return c.fn.call(c.context,p,y,o,l,t),!0}for(a=1,x=new Array(b-1);a<b;a++)x[a-1]=arguments[a];c.fn.apply(c.context,x)}else{var d=c.length,C;for(a=0;a<d;a++)switch(c[a].once&&this.removeListener(i,c[a].fn,void 0,!0),b){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,p);break;case 3:c[a].fn.call(c[a].context,p,y);break;case 4:c[a].fn.call(c[a].context,p,y,o);break;default:if(!x)for(C=1,x=new Array(b-1);C<b;C++)x[C-1]=arguments[C];c[a].fn.apply(c[a].context,x)}}return!0},m.prototype.on=function(i,p,y){return u(this,i,p,y,!1)},m.prototype.once=function(i,p,y){return u(this,i,p,y,!0)},m.prototype.removeListener=function(i,p,y,o){var l=_?_+i:i;if(!this._events[l])return this;if(!p)return f(this,l),this;var t=this._events[l];if(t.fn)t.fn===p&&(!o||t.once)&&(!y||t.context===y)&&f(this,l);else{for(var n=0,c=[],b=t.length;n<b;n++)(t[n].fn!==p||o&&!t[n].once||y&&t[n].context!==y)&&c.push(t[n]);c.length?this._events[l]=c.length===1?c[0]:c:f(this,l)}return this},m.prototype.removeAllListeners=function(i){var p;return i?(p=_?_+i:i,this._events[p]&&f(this,p)):(this._events=new g,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=_,m.EventEmitter=m,r.exports=m},"./node_modules/node-libs-browser/node_modules/events/events.js":function(r,h){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}r.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(u){if(!_(u)||u<0||isNaN(u))throw TypeError("n must be a positive number");return this._maxListeners=u,this},s.prototype.emit=function(u){var f,m,S,i,p,y;if(this._events||(this._events={}),u==="error"&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;var o=new Error('Uncaught, unspecified "error" event. ('+f+")");throw o.context=f,o}if(m=this._events[u],v(m))return!1;if(A(m))switch(arguments.length){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),m.apply(this,i)}else if(g(m))for(i=Array.prototype.slice.call(arguments,1),y=m.slice(),S=y.length,p=0;p<S;p++)y[p].apply(this,i);return!0},s.prototype.addListener=function(u,f){var m;if(!A(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",u,A(f.listener)?f.listener:f),this._events[u]?g(this._events[u])?this._events[u].push(f):this._events[u]=[this._events[u],f]:this._events[u]=f,g(this._events[u])&&!this._events[u].warned&&(v(this._maxListeners)?m=s.defaultMaxListeners:m=this._maxListeners,m&&m>0&&this._events[u].length>m&&(this._events[u].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[u].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(u,f){if(!A(f))throw TypeError("listener must be a function");var m=!1;function S(){this.removeListener(u,S),m||(m=!0,f.apply(this,arguments))}return S.listener=f,this.on(u,S),this},s.prototype.removeListener=function(u,f){var m,S,i,p;if(!A(f))throw TypeError("listener must be a function");if(!this._events||!this._events[u])return this;if(m=this._events[u],i=m.length,S=-1,m===f||A(m.listener)&&m.listener===f)delete this._events[u],this._events.removeListener&&this.emit("removeListener",u,f);else if(g(m)){for(p=i;p-- >0;)if(m[p]===f||m[p].listener&&m[p].listener===f){S=p;break}if(S<0)return this;m.length===1?(m.length=0,delete this._events[u]):m.splice(S,1),this._events.removeListener&&this.emit("removeListener",u,f)}return this},s.prototype.removeAllListeners=function(u){var f,m;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[u]&&delete this._events[u],this;if(arguments.length===0){for(f in this._events)f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(m=this._events[u],A(m))this.removeListener(u,m);else if(m)for(;m.length;)this.removeListener(u,m[m.length-1]);return delete this._events[u],this},s.prototype.listeners=function(u){var f;return!this._events||!this._events[u]?f=[]:A(this._events[u])?f=[this._events[u]]:f=this._events[u].slice(),f},s.prototype.listenerCount=function(u){if(this._events){var f=this._events[u];if(A(f))return 1;if(f)return f.length}return 0},s.listenerCount=function(u,f){return u.listenerCount(f)};function A(u){return typeof u=="function"}function _(u){return typeof u=="number"}function g(u){return typeof u=="object"&&u!==null}function v(u){return u===void 0}},"./node_modules/url-toolkit/src/url-toolkit.js":function(r,h,s){(function(A){var _=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,g=/^([^\/?#]*)(.*)$/,v=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,f={buildAbsoluteURL:function(m,S,i){if(i=i||{},m=m.trim(),S=S.trim(),!S){if(!i.alwaysNormalize)return m;var p=f.parseURL(m);if(!p)throw new Error("Error trying to parse base URL.");return p.path=f.normalizePath(p.path),f.buildURLFromParts(p)}var y=f.parseURL(S);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return i.alwaysNormalize?(y.path=f.normalizePath(y.path),f.buildURLFromParts(y)):S;var o=f.parseURL(m);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&o.path[0]!=="/"){var l=g.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var t={scheme:o.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(t.netLoc=o.netLoc,y.path[0]!=="/"))if(!y.path)t.path=o.path,y.params||(t.params=o.params,y.query||(t.query=o.query));else{var n=o.path,c=n.substring(0,n.lastIndexOf("/")+1)+y.path;t.path=f.normalizePath(c)}return t.path===null&&(t.path=i.alwaysNormalize?f.normalizePath(y.path):y.path),f.buildURLFromParts(t)},parseURL:function(m){var S=_.exec(m);return S?{scheme:S[1]||"",netLoc:S[2]||"",path:S[3]||"",params:S[4]||"",query:S[5]||"",fragment:S[6]||""}:null},normalizePath:function(m){for(m=m.split("").reverse().join("").replace(v,"");m.length!==(m=m.replace(u,"")).length;);return m.split("").reverse().join("")},buildURLFromParts:function(m){return m.scheme+m.netLoc+m.path+m.params+m.query+m.fragment}};r.exports=f})()},"./node_modules/webworkify-webpack/index.js":function(r,h,s){function A(i){var p={};function y(l){if(p[l])return p[l].exports;var t=p[l]={i:l,l:!1,exports:{}};return i[l].call(t.exports,t,t.exports,y),t.l=!0,t.exports}y.m=i,y.c=p,y.i=function(l){return l},y.d=function(l,t,n){y.o(l,t)||Object.defineProperty(l,t,{configurable:!1,enumerable:!0,get:n})},y.r=function(l){Object.defineProperty(l,"__esModule",{value:!0})},y.n=function(l){var t=l&&l.__esModule?function(){return l.default}:function(){return l};return y.d(t,"a",t),t},y.o=function(l,t){return Object.prototype.hasOwnProperty.call(l,t)},y.p="/",y.oe=function(l){throw console.error(l),l};var o=y(y.s=ENTRY_MODULE);return o.default||o}var _="[\\.|\\-|\\+|\\w|/|@]+",g="\\((/\\*.*?\\*/)?s?.*?("+_+").*?\\)";function v(i){return(i+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(i){return!isNaN(1*i)}function f(i,p,y){var o={};o[y]=[];var l=p.toString(),t=l.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!t)return o;for(var n=t[1],c=new RegExp("(\\\\n|\\W)"+v(n)+g,"g"),b;b=c.exec(l);)b[3]!=="dll-reference"&&o[y].push(b[3]);for(c=new RegExp("\\("+v(n)+'\\("(dll-reference\\s('+_+'))"\\)\\)'+g,"g");b=c.exec(l);)i[b[2]]||(o[y].push(b[1]),i[b[2]]=s(b[1]).m),o[b[2]]=o[b[2]]||[],o[b[2]].push(b[4]);for(var x=Object.keys(o),a=0;a<x.length;a++)for(var d=0;d<o[x[a]].length;d++)u(o[x[a]][d])&&(o[x[a]][d]=1*o[x[a]][d]);return o}function m(i){var p=Object.keys(i);return p.reduce(function(y,o){return y||i[o].length>0},!1)}function S(i,p){for(var y={main:[p]},o={main:[]},l={main:{}};m(y);)for(var t=Object.keys(y),n=0;n<t.length;n++){var c=t[n],b=y[c],x=b.pop();if(l[c]=l[c]||{},!(l[c][x]||!i[c][x])){l[c][x]=!0,o[c]=o[c]||[],o[c].push(x);for(var a=f(i,i[c][x],c),d=Object.keys(a),C=0;C<d.length;C++)y[d[C]]=y[d[C]]||[],y[d[C]]=y[d[C]].concat(a[d[C]])}}return o}r.exports=function(i,p){p=p||{};var y={main:s.m},o=p.all?{main:Object.keys(y.main)}:S(y,i),l="";Object.keys(o).filter(function(x){return x!=="main"}).forEach(function(x){for(var a=0;o[x][a];)a++;o[x].push(a),y[x][a]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+x+" = ("+A.toString().replace("ENTRY_MODULE",JSON.stringify(a))+")({"+o[x].map(function(d){return""+JSON.stringify(d)+": "+y[x][d].toString()}).join(",")+`});
`}),l=l+"new (("+A.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+o.main.map(function(x){return""+JSON.stringify(x)+": "+y.main[x].toString()}).join(",")+"}))(self);";var t=new window.Blob([l],{type:"text/javascript"});if(p.bare)return t;var n=window.URL||window.webkitURL||window.mozURL||window.msURL,c=n.createObjectURL(t),b=new window.Worker(c);return b.objectURL=c,b}},"./src/config.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/controller/abr-controller.js"),_=s("./src/controller/buffer-controller.js"),g=s("./src/controller/cap-level-controller.js"),v=s("./src/controller/fps-controller.js"),u=s("./src/utils/xhr-loader.js"),f=s("./src/controller/audio-track-controller.js"),m=s("./src/controller/audio-stream-controller.js"),S=s("./src/utils/cues.js"),i=s("./src/controller/timeline-controller.js"),p=s("./src/controller/subtitle-track-controller.js"),y=s("./src/controller/subtitle-stream-controller.js"),o=s("./src/controller/eme-controller.js"),l=s("./src/utils/mediakeys-helper.js");h.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:u.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:A.default,bufferController:_.default,capLevelController:g.default,fpsController:v.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:l.requestMediaKeySystemAccess},h.hlsDefaultConfig.subtitleStreamController=y.SubtitleStreamController,h.hlsDefaultConfig.subtitleTrackController=p.default,h.hlsDefaultConfig.timelineController=i.default,h.hlsDefaultConfig.cueHandler=S,h.hlsDefaultConfig.enableCEA708Captions=!0,h.hlsDefaultConfig.enableWebVTT=!0,h.hlsDefaultConfig.captionsTextTrack1Label="English",h.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",h.hlsDefaultConfig.captionsTextTrack2Label="Spanish",h.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",h.hlsDefaultConfig.audioStreamController=m.default,h.hlsDefaultConfig.audioTrackController=f.default,h.hlsDefaultConfig.emeController=o.default},"./src/controller/abr-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var t in l)l.hasOwnProperty(t)&&(o[t]=l[t])};return function(o,l){y(o,l);function t(){this.constructor=o}o.prototype=l===null?Object.create(l):(t.prototype=l.prototype,new t)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=s("./src/utils/buffer-helper.js"),f=s("./src/errors.js"),m=s("./src/utils/logger.js"),S=s("./src/utils/ewma-bandwidth-estimator.js"),i=window.performance,p=function(y){_(o,y);function o(l){var t=y.call(this,l,g.default.FRAG_LOADING,g.default.FRAG_LOADED,g.default.FRAG_BUFFERED,g.default.ERROR)||this;return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=l,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}return o.prototype.destroy=function(){this.clearTimer(),v.default.prototype.destroy.call(this)},o.prototype.onFragLoading=function(l){var t=l.frag;if(t.type==="main"&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n=this.hls,c=n.config,b=t.level,x=n.levels[b].details.live,a=void 0,d=void 0;x?(a=c.abrEwmaFastLive,d=c.abrEwmaSlowLive):(a=c.abrEwmaFastVoD,d=c.abrEwmaSlowVoD),this._bwEstimator=new S.default(n,d,a,c.abrEwmaDefaultEstimate)}},o.prototype._abandonRulesCheck=function(){var l=this.hls,t=l.media,n=this.fragCurrent;if(!!n){var c=n.loader,b=l.minAutoLevel;if(!c||c.stats&&c.stats.aborted){m.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var x=c.stats;if(t&&x&&(!t.paused&&t.playbackRate!==0||!t.readyState)&&n.autoLevel&&n.level){var a=i.now()-x.trequest,d=Math.abs(t.playbackRate);if(a>500*n.duration/d){var C=l.levels,T=Math.max(1,x.bw?x.bw/8:x.loaded*1e3/a),L=C[n.level],R=L.realBitrate?Math.max(L.realBitrate,L.bitrate):L.bitrate,O=x.total?x.total:Math.max(x.loaded,Math.round(n.duration*R/8)),j=t.currentTime,D=(O-x.loaded)/T,w=(u.BufferHelper.bufferInfo(t,j,l.config.maxBufferHole).end-j)/d;if(w<2*n.duration/d&&D>w){var F=void 0,B=void 0;for(B=n.level-1;B>b;B--){var M=C[B].realBitrate?Math.max(C[B].realBitrate,C[B].bitrate):C[B].bitrate;if(F=n.duration*M/(8*.8*T),F<w)break}F<D&&(m.logger.warn("loading too slow, abort fragment loading and switch to level "+B+":fragLoadedDelay["+B+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+F.toFixed(1)+"<"+D.toFixed(1)+":"+w.toFixed(1)),l.nextLoadLevel=B,this._bwEstimator.sample(a,x.loaded),c.abort(),this.clearTimer(),l.trigger(g.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:x}))}}}}},o.prototype.onFragLoaded=function(l){var t=l.frag;if(t.type==="main"&&A.isFinite(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],c=(n.loaded?n.loaded.bytes:0)+l.stats.loaded,b=(n.loaded?n.loaded.duration:0)+l.frag.duration;n.loaded={bytes:c,duration:b},n.realBitrate=Math.round(8*c/b)}if(l.frag.bitrateTest){var x=l.stats;x.tparsed=x.tbuffered=x.tload,this.onFragBuffered(l)}}},o.prototype.onFragBuffered=function(l){var t=l.stats,n=l.frag;if(t.aborted!==!0&&n.type==="main"&&A.isFinite(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var c=t.tparsed-t.trequest;m.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(c,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=c/1e3:this.bitrateTestDelay=0}},o.prototype.onError=function(l){switch(l.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},o.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(o.prototype,"nextAutoLevel",{get:function(){var l=this._nextAutoLevel,t=this._bwEstimator;if(l!==-1&&(!t||!t.canEstimate()))return l;var n=this._nextABRAutoLevel;return l!==-1&&(n=Math.min(l,n)),n},set:function(l){this._nextAutoLevel=l},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_nextABRAutoLevel",{get:function(){var l=this.hls,t=l.maxAutoLevel,n=l.levels,c=l.config,b=l.minAutoLevel,x=l.media,a=this.lastLoadedFragLevel,d=this.fragCurrent?this.fragCurrent.duration:0,C=x?x.currentTime:0,T=x&&x.playbackRate!==0?Math.abs(x.playbackRate):1,L=this._bwEstimator?this._bwEstimator.getEstimate():c.abrEwmaDefaultEstimate,R=(u.BufferHelper.bufferInfo(x,C,c.maxBufferHole).end-C)/T,O=this._findBestLevel(a,d,L,b,t,R,c.abrBandWidthFactor,c.abrBandWidthUpFactor,n);if(O>=0)return O;m.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var j=d?Math.min(d,c.maxStarvationDelay):c.maxStarvationDelay,D=c.abrBandWidthFactor,w=c.abrBandWidthUpFactor;if(R===0){var F=this.bitrateTestDelay;if(F){var B=d?Math.min(d,c.maxLoadingDelay):c.maxLoadingDelay;j=B-F,m.logger.trace("bitrate test took "+Math.round(1e3*F)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*j)+" ms"),D=w=1}}return O=this._findBestLevel(a,d,L,b,t,R+j,D,w,n),Math.max(O,0)},enumerable:!0,configurable:!0}),o.prototype._findBestLevel=function(l,t,n,c,b,x,a,d,C){for(var T=b;T>=c;T--){var L=C[T];if(!!L){var R=L.details,O=R?R.totalduration/R.fragments.length:t,j=R?R.live:!1,D=void 0;T<=l?D=a*n:D=d*n;var w=C[T].realBitrate?Math.max(C[T].realBitrate,C[T].bitrate):C[T].bitrate,F=w*O/D;if(m.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+T+"/"+Math.round(D)+"/"+w+"/"+O+"/"+x+"/"+F),D>w&&(!F||j&&!this.bitrateTestDelay||F<x))return T}}return-1},o}(v.default);h.default=p}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var C in d)d.hasOwnProperty(C)&&(a[C]=d[C])};return function(a,d){x(a,d);function C(){this.constructor=a}a.prototype=d===null?Object.create(d):(C.prototype=d.prototype,new C)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/utils/binary-search.js"),v=s("./src/utils/buffer-helper.js"),u=s("./src/demux/demuxer.js"),f=s("./src/events.js"),m=s("./src/controller/level-helper.js"),S=s("./src/utils/time-ranges.js"),i=s("./src/errors.js"),p=s("./src/utils/logger.js"),y=s("./src/utils/discontinuities.js"),o=s("./src/controller/fragment-tracker.js"),l=s("./src/loader/fragment.js"),t=s("./src/controller/base-stream-controller.js"),n=window.performance,c=100,b=function(x){_(a,x);function a(d,C){var T=x.call(this,d,f.default.MEDIA_ATTACHED,f.default.MEDIA_DETACHING,f.default.AUDIO_TRACKS_UPDATED,f.default.AUDIO_TRACK_SWITCHING,f.default.AUDIO_TRACK_LOADED,f.default.KEY_LOADED,f.default.FRAG_LOADED,f.default.FRAG_PARSING_INIT_SEGMENT,f.default.FRAG_PARSING_DATA,f.default.FRAG_PARSED,f.default.ERROR,f.default.BUFFER_RESET,f.default.BUFFER_CREATED,f.default.BUFFER_APPENDED,f.default.BUFFER_FLUSHED,f.default.INIT_PTS_FOUND)||this;return T.fragmentTracker=C,T.config=d.config,T.audioCodecSwap=!1,T._state=t.State.STOPPED,T.initPTS=[],T.waitingFragment=null,T.videoTrackCC=null,T}return a.prototype.onHandlerDestroying=function(){this.stopLoad(),x.prototype.onHandlerDestroying.call(this)},a.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null,x.prototype.onHandlerDestroyed.call(this)},a.prototype.onInitPtsFound=function(d){var C=d.id,T=d.frag.cc,L=d.initPTS;C==="main"&&(this.initPTS[T]=L,this.videoTrackCC=T,p.logger.log("InitPTS for cc: "+T+" found from video track: "+L),this.state===t.State.WAITING_INIT_PTS&&this.tick())},a.prototype.startLoad=function(d){if(this.tracks){var C=this.lastCurrentTime;this.stopLoad(),this.setInterval(c),this.fragLoadError=0,C>0&&d===-1?(p.logger.log("audio:override startPosition with lastCurrentTime @"+C.toFixed(3)),this.state=t.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:d,this.state=t.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=d,this.state=t.State.STOPPED},a.prototype.stopLoad=function(){var d=this.fragCurrent;d&&(d.loader&&d.loader.abort(),this.fragmentTracker.removeFragment(d),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=t.State.STOPPED},Object.defineProperty(a.prototype,"state",{get:function(){return this._state},set:function(d){if(this.state!==d){var C=this.state;this._state=d,p.logger.log("audio stream:"+C+"->"+d)}},enumerable:!0,configurable:!0}),a.prototype.doTick=function(){var d,C,T,L=this.hls,R=L.config;switch(this.state){case t.State.ERROR:case t.State.PAUSED:case t.State.BUFFER_FLUSHING:break;case t.State.STARTING:this.state=t.State.WAITING_TRACK,this.loadedmetadata=!1;break;case t.State.IDLE:var O=this.tracks;if(!O||!this.media&&(this.startFragRequested||!R.startFragPrefetch))break;if(this.loadedmetadata)d=this.media.currentTime;else if(d=this.nextLoadPosition,d===void 0)break;var j=this.mediaBuffer?this.mediaBuffer:this.media,D=this.videoBuffer?this.videoBuffer:this.media,w=v.BufferHelper.bufferInfo(j,d,R.maxBufferHole),F=v.BufferHelper.bufferInfo(D,d,R.maxBufferHole),B=w.len,M=w.end,N=this.fragPrevious,I=Math.min(R.maxBufferLength,R.maxMaxBufferLength),X=Math.max(I,F.len),$=this.audioSwitch,ee=this.trackId;if((B<X||$)&&ee<O.length){if(T=O[ee].details,typeof T>"u"){this.state=t.State.WAITING_TRACK;break}if(!$&&this._streamEnded(w,T)){this.hls.trigger(f.default.BUFFER_EOS,{type:"audio"}),this.state=t.State.ENDED;return}var K=T.fragments,J=K.length,V=K[0].start,W=K[J-1].start+K[J-1].duration,Y=void 0;if($){if(T.live&&!T.PTSKnown)p.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),M=0;else if(M=d,T.PTSKnown&&d<V)if(w.end>V||w.nextStart)p.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=V+.05;else return}if(T.initSegment&&!T.initSegment.data)Y=T.initSegment;else if(M<=V){if(Y=K[0],this.videoTrackCC!==null&&Y.cc!==this.videoTrackCC&&(Y=y.findFragWithCC(K,this.videoTrackCC)),T.live&&Y.loadIdx&&Y.loadIdx===this.fragLoadIdx){var te=w.nextStart?w.nextStart:V;p.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(te+.05)),this.media.currentTime=te+.05;return}}else{var se=void 0,ce=R.maxFragLookUpTolerance,ue=N?K[N.sn-K[0].sn+1]:void 0,re=function(U){var H=Math.min(ce,U.duration);return U.start+U.duration-H<=M?1:U.start-H>M&&U.start?-1:0};M<W?(M>W-ce&&(ce=0),ue&&!re(ue)?se=ue:se=g.default.search(K,re)):se=K[J-1],se&&(Y=se,V=se.start,N&&Y.level===N.level&&Y.sn===N.sn&&(Y.sn<T.endSN?(Y=K[Y.sn+1-T.startSN],p.logger.log("SN just loaded, load next one: "+Y.sn)):Y=null))}Y&&(Y.encrypted?(p.logger.log("Loading key for "+Y.sn+" of ["+T.startSN+" ,"+T.endSN+"],track "+ee),this.state=t.State.KEY_LOADING,L.trigger(f.default.KEY_LOADING,{frag:Y})):(p.logger.log("Loading "+Y.sn+", cc: "+Y.cc+" of ["+T.startSN+" ,"+T.endSN+"],track "+ee+", currentTime:"+d+",bufferEnd:"+M.toFixed(3)),this.fragCurrent=Y,($||this.fragmentTracker.getState(Y)===o.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,A.isFinite(Y.sn)&&(this.nextLoadPosition=Y.start+Y.duration),L.trigger(f.default.FRAG_LOADING,{frag:Y}),this.state=t.State.FRAG_LOADING)))}break;case t.State.WAITING_TRACK:C=this.tracks[this.trackId],C&&C.details&&(this.state=t.State.IDLE);break;case t.State.FRAG_LOADING_WAITING_RETRY:var ne=n.now(),z=this.retryDate;j=this.media;var ae=j&&j.seeking;(!z||ne>=z||ae)&&(p.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=t.State.IDLE);break;case t.State.WAITING_INIT_PTS:var de=this.videoTrackCC;if(this.initPTS[de]===void 0)break;var he=this.waitingFragment;if(he){var k=he.frag.cc;de!==k?(C=this.tracks[this.trackId],C.details&&C.details.live&&(p.logger.warn("Waiting fragment CC ("+k+") does not match video track CC ("+de+")"),this.waitingFragment=null,this.state=t.State.IDLE)):(this.state=t.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=t.State.IDLE;break;case t.State.STOPPED:case t.State.FRAG_LOADING:case t.State.PARSING:case t.State.PARSED:case t.State.ENDED:break}},a.prototype.onMediaAttached=function(d){var C=this.media=this.mediaBuffer=d.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),C.addEventListener("seeking",this.onvseeking),C.addEventListener("ended",this.onvended);var T=this.config;this.tracks&&T.autoStartLoad&&this.startLoad(T.startPosition)},a.prototype.onMediaDetaching=function(){var d=this.media;d&&d.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),d&&(d.removeEventListener("seeking",this.onvseeking),d.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},a.prototype.onAudioTracksUpdated=function(d){p.logger.log("audio tracks updated"),this.tracks=d.audioTracks},a.prototype.onAudioTrackSwitching=function(d){var C=!!d.url;this.trackId=d.id,this.fragCurrent=null,this.state=t.State.PAUSED,this.waitingFragment=null,C?this.setInterval(c):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),C&&(this.audioSwitch=!0,this.state=t.State.IDLE),this.tick()},a.prototype.onAudioTrackLoaded=function(d){var C=d.details,T=d.id,L=this.tracks[T],R=C.totalduration,O=0;if(p.logger.log("track "+T+" loaded ["+C.startSN+","+C.endSN+"],duration:"+R),C.live){var j=L.details;j&&C.fragments.length>0?(m.mergeDetails(j,C),O=C.fragments[0].start,C.PTSKnown?p.logger.log("live audio playlist sliding:"+O.toFixed(3)):p.logger.log("live audio playlist - outdated PTS, unknown sliding")):(C.PTSKnown=!1,p.logger.log("live audio playlist - first load, unknown sliding"))}else C.PTSKnown=!1;if(L.details=C,!this.startFragRequested){if(this.startPosition===-1){var D=C.startTimeOffset;A.isFinite(D)?(p.logger.log("start time offset found in playlist, adjust startPosition to "+D),this.startPosition=D):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===t.State.WAITING_TRACK&&(this.state=t.State.IDLE),this.tick()},a.prototype.onKeyLoaded=function(){this.state===t.State.KEY_LOADING&&(this.state=t.State.IDLE,this.tick())},a.prototype.onFragLoaded=function(d){var C=this.fragCurrent,T=d.frag;if(this.state===t.State.FRAG_LOADING&&C&&T.type==="audio"&&T.level===C.level&&T.sn===C.sn){var L=this.tracks[this.trackId],R=L.details,O=R.totalduration,j=C.level,D=C.sn,w=C.cc,F=this.config.defaultAudioCodec||L.audioCodec||"mp4a.40.2",B=this.stats=d.stats;if(D==="initSegment")this.state=t.State.IDLE,B.tparsed=B.tbuffered=n.now(),R.initSegment.data=d.payload,this.hls.trigger(f.default.FRAG_BUFFERED,{stats:B,frag:C,id:"audio"}),this.tick();else{this.state=t.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new u.default(this.hls,"audio"));var M=this.initPTS[w],N=R.initSegment?R.initSegment.data:[];if(R.initSegment||M!==void 0){this.pendingBuffering=!0,p.logger.log("Demuxing "+D+" of ["+R.startSN+" ,"+R.endSN+"],track "+j);var I=!1;this.demuxer.push(d.payload,N,F,null,C,O,I,M)}else p.logger.log("unknown video PTS for continuity counter "+w+", waiting for video PTS before demuxing audio frag "+D+" of ["+R.startSN+" ,"+R.endSN+"],track "+j),this.waitingFragment=d,this.state=t.State.WAITING_INIT_PTS}}this.fragLoadError=0},a.prototype.onFragParsingInitSegment=function(d){var C=this.fragCurrent,T=d.frag;if(C&&d.id==="audio"&&T.sn===C.sn&&T.level===C.level&&this.state===t.State.PARSING){var L=d.tracks,R=void 0;if(L.video&&delete L.video,R=L.audio,R){R.levelCodec=R.codec,R.id=d.id,this.hls.trigger(f.default.BUFFER_CODECS,L),p.logger.log("audio track:audio,container:"+R.container+",codecs[level/parsed]=["+R.levelCodec+"/"+R.codec+"]");var O=R.initSegment;if(O){var j={type:"audio",data:O,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[j]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.default.BUFFER_APPENDING,j))}this.tick()}}},a.prototype.onFragParsingData=function(d){var C=this,T=this.fragCurrent,L=d.frag;if(T&&d.id==="audio"&&d.type==="audio"&&L.sn===T.sn&&L.level===T.level&&this.state===t.State.PARSING){var R=this.trackId,O=this.tracks[R],j=this.hls;A.isFinite(d.endPTS)||(d.endPTS=d.startPTS+T.duration,d.endDTS=d.startDTS+T.duration),T.addElementaryStream(l.default.ElementaryStreamTypes.AUDIO),p.logger.log("parsed "+d.type+",PTS:["+d.startPTS.toFixed(3)+","+d.endPTS.toFixed(3)+"],DTS:["+d.startDTS.toFixed(3)+"/"+d.endDTS.toFixed(3)+"],nb:"+d.nb),m.updateFragPTSDTS(O.details,T,d.startPTS,d.endPTS);var D=this.audioSwitch,w=this.media,F=!1;if(D&&w)if(w.readyState){var B=w.currentTime;p.logger.log("switching audio track : currentTime:"+B),B>=d.startPTS&&(p.logger.log("switching audio track : flushing all audio"),this.state=t.State.BUFFER_FLUSHING,j.trigger(f.default.BUFFER_FLUSHING,{startOffset:0,endOffset:A.POSITIVE_INFINITY,type:"audio"}),F=!0,this.audioSwitch=!1,j.trigger(f.default.AUDIO_TRACK_SWITCHED,{id:R}))}else this.audioSwitch=!1,j.trigger(f.default.AUDIO_TRACK_SWITCHED,{id:R});var M=this.pendingData;if(!M){p.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),j.trigger(f.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([d.data1,d.data2].forEach(function(N){N&&N.length&&M.push({type:d.type,data:N,parent:"audio",content:"data"})}),!F&&M.length&&(M.forEach(function(N){C.state===t.State.PARSING&&(C.pendingBuffering=!0,C.hls.trigger(f.default.BUFFER_APPENDING,N))}),this.pendingData=[],this.appended=!0)),this.tick()}},a.prototype.onFragParsed=function(d){var C=this.fragCurrent,T=d.frag;C&&d.id==="audio"&&T.sn===C.sn&&T.level===C.level&&this.state===t.State.PARSING&&(this.stats.tparsed=n.now(),this.state=t.State.PARSED,this._checkAppendedParsed())},a.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},a.prototype.onBufferCreated=function(d){var C=d.tracks.audio;C&&(this.mediaBuffer=C.buffer,this.loadedmetadata=!0),d.tracks.video&&(this.videoBuffer=d.tracks.video.buffer)},a.prototype.onBufferAppended=function(d){if(d.parent==="audio"){var C=this.state;(C===t.State.PARSING||C===t.State.PARSED)&&(this.pendingBuffering=d.pending>0,this._checkAppendedParsed())}},a.prototype._checkAppendedParsed=function(){if(this.state===t.State.PARSED&&(!this.appended||!this.pendingBuffering)){var d=this.fragCurrent,C=this.stats,T=this.hls;if(d){this.fragPrevious=d,C.tbuffered=n.now(),T.trigger(f.default.FRAG_BUFFERED,{stats:C,frag:d,id:"audio"});var L=this.mediaBuffer?this.mediaBuffer:this.media;p.logger.log("audio buffered : "+S.default.toString(L.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,T.trigger(f.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=t.State.IDLE}this.tick()}},a.prototype.onError=function(d){var C=d.frag;if(!(C&&C.type!=="audio"))switch(d.details){case i.ErrorDetails.FRAG_LOAD_ERROR:case i.ErrorDetails.FRAG_LOAD_TIMEOUT:var T=d.frag;if(T&&T.type!=="audio")break;if(!d.fatal){var L=this.fragLoadError;L?L++:L=1;var R=this.config;if(L<=R.fragLoadingMaxRetry){this.fragLoadError=L;var O=Math.min(Math.pow(2,L-1)*R.fragLoadingRetryDelay,R.fragLoadingMaxRetryTimeout);p.logger.warn("AudioStreamController: frag loading failed, retry in "+O+" ms"),this.retryDate=n.now()+O,this.state=t.State.FRAG_LOADING_WAITING_RETRY}else p.logger.error("AudioStreamController: "+d.details+" reaches max retry, redispatch as fatal ..."),d.fatal=!0,this.state=t.State.ERROR}break;case i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case i.ErrorDetails.KEY_LOAD_ERROR:case i.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==t.State.ERROR&&(this.state=d.fatal?t.State.ERROR:t.State.IDLE,p.logger.warn("AudioStreamController: "+d.details+" while loading frag, now switching to "+this.state+" state ..."));break;case i.ErrorDetails.BUFFER_FULL_ERROR:if(d.parent==="audio"&&(this.state===t.State.PARSING||this.state===t.State.PARSED)){var j=this.mediaBuffer,D=this.media.currentTime,w=j&&v.BufferHelper.isBuffered(j,D)&&v.BufferHelper.isBuffered(j,D+.5);if(w){var R=this.config;R.maxMaxBufferLength>=R.maxBufferLength&&(R.maxMaxBufferLength/=2,p.logger.warn("AudioStreamController: reduce max buffer length to "+R.maxMaxBufferLength+"s")),this.state=t.State.IDLE}else p.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=t.State.BUFFER_FLUSHING,this.hls.trigger(f.default.BUFFER_FLUSHING,{startOffset:0,endOffset:A.POSITIVE_INFINITY,type:"audio"})}break}},a.prototype.onBufferFlushed=function(){var d=this,C=this.pendingData;C&&C.length?(p.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),C.forEach(function(T){d.hls.trigger(f.default.BUFFER_APPENDING,T)}),this.appended=!0,this.pendingData=[],this.state=t.State.PARSED):(this.state=t.State.IDLE,this.fragPrevious=null,this.tick())},a}(t.default);h.default=b}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var p in i)i.hasOwnProperty(p)&&(S[p]=i[p])};return function(S,i){m(S,i);function p(){this.constructor=S}S.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/task-loop.js"),v=s("./src/utils/logger.js"),u=s("./src/errors.js"),f=function(m){A(S,m);function S(i){var p=m.call(this,i,_.default.MANIFEST_LOADING,_.default.MANIFEST_PARSED,_.default.AUDIO_TRACK_LOADED,_.default.AUDIO_TRACK_SWITCHED,_.default.LEVEL_LOADED,_.default.ERROR)||this;return p._trackId=-1,p._selectDefaultTrack=!0,p.tracks=[],p.trackIdBlacklist=Object.create(null),p.audioGroupId=null,p}return S.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},S.prototype.onManifestParsed=function(i){var p=this.tracks=i.audioTracks||[];this.hls.trigger(_.default.AUDIO_TRACKS_UPDATED,{audioTracks:p})},S.prototype.onAudioTrackLoaded=function(i){if(i.id>=this.tracks.length){v.logger.warn("Invalid audio track id:",i.id);return}if(v.logger.log("audioTrack "+i.id+" loaded"),this.tracks[i.id].details=i.details,i.details.live&&!this.hasInterval()){var p=i.details.targetduration*1e3;this.setInterval(p)}!i.details.live&&this.hasInterval()&&this.clearInterval()},S.prototype.onAudioTrackSwitched=function(i){var p=this.tracks[i.id].groupId;p&&this.audioGroupId!==p&&(this.audioGroupId=p)},S.prototype.onLevelLoaded=function(i){var p=this.hls.levels[i.level];if(!!p.audioGroupIds){var y=p.audioGroupIds[p.urlId];this.audioGroupId!==y&&(this.audioGroupId=y,this._selectInitialAudioTrack())}},S.prototype.onError=function(i){i.type===u.ErrorTypes.NETWORK_ERROR&&(i.fatal&&this.clearInterval(),i.details===u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(v.logger.warn("Network failure on audio-track id:",i.context.id),this._handleLoadError()))},Object.defineProperty(S.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"audioTrack",{get:function(){return this._trackId},set:function(i){this._setAudioTrack(i),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),S.prototype._setAudioTrack=function(i){if(this._trackId===i&&this.tracks[this._trackId].details){v.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(i<0||i>=this.tracks.length){v.logger.warn("Invalid id passed to audio-track controller");return}var p=this.tracks[i];v.logger.log("Now switching to audio-track index "+i),this.clearInterval(),this._trackId=i;var y=p.url,o=p.type,l=p.id;this.hls.trigger(_.default.AUDIO_TRACK_SWITCHING,{id:l,type:o,url:y}),this._loadTrackDetailsIfNeeded(p)},S.prototype.doTick=function(){this._updateTrack(this._trackId)},S.prototype._selectInitialAudioTrack=function(){var i=this,p=this.tracks;if(!!p.length){var y=this.tracks[this._trackId],o=null;if(y&&(o=y.name),this._selectDefaultTrack){var l=p.filter(function(c){return c.default});l.length?p=l:v.logger.warn("No default audio tracks defined")}var t=!1,n=function(){p.forEach(function(c){t||(!i.audioGroupId||c.groupId===i.audioGroupId)&&(!o||o===c.name)&&(i._setAudioTrack(c.id),t=!0)})};n(),t||(o=null,n()),t||(v.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(_.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},S.prototype._needsTrackLoading=function(i){var p=i.details,y=i.url;return!p||p.live?!!y:!1},S.prototype._loadTrackDetailsIfNeeded=function(i){if(this._needsTrackLoading(i)){var p=i.url,y=i.id;v.logger.log("loading audio-track playlist for id: "+y),this.hls.trigger(_.default.AUDIO_TRACK_LOADING,{url:p,id:y})}},S.prototype._updateTrack=function(i){if(!(i<0||i>=this.tracks.length)){this.clearInterval(),this._trackId=i,v.logger.log("trying to update audio-track "+i);var p=this.tracks[i];this._loadTrackDetailsIfNeeded(p)}},S.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var i=this._trackId,p=this.tracks[i],y=p.name,o=p.language,l=p.groupId;v.logger.warn("Loading failed on audio track id: "+i+", group-id: "+l+', name/language: "'+y+'" / "'+o+'"');for(var t=i,n=0;n<this.tracks.length;n++)if(!this.trackIdBlacklist[n]){var c=this.tracks[n];if(c.name===y){t=n;break}}if(t===i){v.logger.warn('No fallback audio-track found for name/language: "'+y+'" / "'+o+'"');return}v.logger.log("Attempting audio-track fallback id:",t,"group-id:",this.tracks[t].groupId),this._setAudioTrack(t)},S}(g.default);h.default=f},"./src/controller/base-stream-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,p){i.__proto__=p}||function(i,p){for(var y in p)p.hasOwnProperty(y)&&(i[y]=p[y])};return function(i,p){S(i,p);function y(){this.constructor=i}i.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/task-loop.js"),v=s("./src/controller/fragment-tracker.js"),u=s("./src/utils/buffer-helper.js"),f=s("./src/utils/logger.js");h.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var m=function(S){_(i,S);function i(){return S!==null&&S.apply(this,arguments)||this}return i.prototype.doTick=function(){},i.prototype._streamEnded=function(p,y){var o=this,l=o.fragCurrent,t=o.fragmentTracker;if(!y.live&&l&&!l.backtracked&&l.sn===y.endSN&&!p.nextStart){var n=t.getState(l);return n===v.FragmentState.PARTIAL||n===v.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var p=this,y=p.config,o=p.media,l=p.mediaBuffer,t=p.state,n=o?o.currentTime:null,c=u.BufferHelper.bufferInfo(l||o,n,this.config.maxBufferHole);if(A.isFinite(n)&&f.logger.log("media seeking to "+n.toFixed(3)),t===h.State.FRAG_LOADING){var b=this.fragCurrent;if(c.len===0&&b){var x=y.maxFragLookUpTolerance,a=b.start-x,d=b.start+b.duration+x;n<a||n>d?(b.loader&&(f.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),b.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=h.State.IDLE):f.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else t===h.State.ENDED&&(c.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=h.State.IDLE);o&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i}(g.default);h.default=m}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,o){y.__proto__=o}||function(y,o){for(var l in o)o.hasOwnProperty(l)&&(y[l]=o[l])};return function(y,o){p(y,o);function l(){this.constructor=y}y.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=s("./src/utils/logger.js"),f=s("./src/errors.js"),m=s("./src/utils/mediasource-helper.js"),S=m.getMediaSource(),i=function(p){_(y,p);function y(o){var l=p.call(this,o,g.default.MEDIA_ATTACHING,g.default.MEDIA_DETACHING,g.default.MANIFEST_PARSED,g.default.BUFFER_RESET,g.default.BUFFER_APPENDING,g.default.BUFFER_CODECS,g.default.BUFFER_EOS,g.default.BUFFER_FLUSHING,g.default.LEVEL_PTS_UPDATED,g.default.LEVEL_UPDATED)||this;return l._msDuration=null,l._levelDuration=null,l._levelTargetDuration=10,l._live=null,l._objectUrl=null,l.bufferCodecEventsExpected=0,l.onsbue=l.onSBUpdateEnd.bind(l),l.onsbe=l.onSBUpdateError.bind(l),l.pendingTracks={},l.tracks={},l}return y.prototype.destroy=function(){v.default.prototype.destroy.call(this)},y.prototype.onLevelPtsUpdated=function(o){var l=o.type,t=this.tracks.audio;if(l==="audio"&&t&&t.container==="audio/mpeg"){var n=this.sourceBuffer.audio,c=Math.abs(n.timestampOffset-o.start);if(c>.1){var b=n.updating;try{n.abort()}catch(x){u.logger.warn("can not abort audio buffer: "+x)}b?this.audioTimestampOffset=o.start:(u.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+o.start),n.timestampOffset=o.start)}}},y.prototype.onManifestParsed=function(o){this.bufferCodecEventsExpected=o.altAudio?2:1,u.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},y.prototype.onMediaAttaching=function(o){var l=this.media=o.media;if(l){var t=this.mediaSource=new S;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),t.addEventListener("sourceopen",this.onmso),t.addEventListener("sourceended",this.onmse),t.addEventListener("sourceclose",this.onmsc),l.src=window.URL.createObjectURL(t),this._objectUrl=l.src}},y.prototype.onMediaDetaching=function(){u.logger.log("media source detaching");var o=this.mediaSource;if(o){if(o.readyState==="open")try{o.endOfStream()}catch(l){u.logger.warn("onMediaDetaching:"+l.message+" while calling endOfStream")}o.removeEventListener("sourceopen",this.onmso),o.removeEventListener("sourceended",this.onmse),o.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(g.default.MEDIA_DETACHED)},y.prototype.onMediaSourceOpen=function(){u.logger.log("media source opened"),this.hls.trigger(g.default.MEDIA_ATTACHED,{media:this.media});var o=this.mediaSource;o&&o.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},y.prototype.checkPendingTracks=function(){var o=this,l=o.bufferCodecEventsExpected,t=o.pendingTracks,n=Object.keys(t).length;(n&&!l||n===2)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},y.prototype.onMediaSourceClose=function(){u.logger.log("media source closed")},y.prototype.onMediaSourceEnded=function(){u.logger.log("media source ended")},y.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var o=this.sourceBuffer.audio;u.logger.warn("change mpeg audio timestamp offset from "+o.timestampOffset+" to "+this.audioTimestampOffset),o.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var l=this.parent,t=this.segments.reduce(function(x,a){return a.parent===l?x+1:x},0),n={},c=this.sourceBuffer;for(var b in c)n[b]=c[b].buffered;this.hls.trigger(g.default.BUFFER_APPENDED,{parent:l,pending:t,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),t===0&&this.flushLiveBackBuffer()},y.prototype.onSBUpdateError=function(o){u.logger.error("sourceBuffer error:",o),this.hls.trigger(g.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},y.prototype.onBufferReset=function(){var o=this.sourceBuffer;for(var l in o){var t=o[l];try{this.mediaSource.removeSourceBuffer(t),t.removeEventListener("updateend",this.onsbue),t.removeEventListener("error",this.onsbe)}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},y.prototype.onBufferCodecs=function(o){var l=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(o).forEach(function(n){l.pendingTracks[n]=o[n]});var t=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),t&&t.readyState==="open"&&this.checkPendingTracks()}},y.prototype.createSourceBuffers=function(o){var l=this.sourceBuffer,t=this.mediaSource;for(var n in o)if(!l[n]){var c=o[n],b=c.levelCodec||c.codec,x=c.container+";codecs="+b;u.logger.log("creating sourceBuffer("+x+")");try{var a=l[n]=t.addSourceBuffer(x);a.addEventListener("updateend",this.onsbue),a.addEventListener("error",this.onsbe),this.tracks[n]={codec:b,container:c.container},c.buffer=a}catch(d){u.logger.error("error while trying to add sourceBuffer:"+d.message),this.hls.trigger(g.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:d,mimeType:x})}}this.hls.trigger(g.default.BUFFER_CREATED,{tracks:o})},y.prototype.onBufferAppending=function(o){this._needsFlush||(this.segments?this.segments.push(o):this.segments=[o],this.doAppending())},y.prototype.onBufferAppendFail=function(o){u.logger.error("sourceBuffer error:",o.event),this.hls.trigger(g.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},y.prototype.onBufferEos=function(o){var l=this.sourceBuffer,t=o.type;for(var n in l)(!t||n===t)&&(l[n].ended||(l[n].ended=!0,u.logger.log(n+" sourceBuffer now EOS")));this.checkEos()},y.prototype.checkEos=function(){var o=this.sourceBuffer,l=this.mediaSource;if(!l||l.readyState!=="open"){this._needsEos=!1;return}for(var t in o){var n=o[t];if(!n.ended)return;if(n.updating){this._needsEos=!0;return}}u.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{l.endOfStream()}catch{u.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},y.prototype.onBufferFlushing=function(o){this.flushRange.push({start:o.startOffset,end:o.endOffset,type:o.type}),this.flushBufferCounter=0,this.doFlush()},y.prototype.flushLiveBackBuffer=function(){if(!!this._live){var o=this.hls.config.liveBackBufferLength;if(!(!isFinite(o)||o<0))for(var l=this.media.currentTime,t=this.sourceBuffer,n=Object.keys(t),c=l-Math.max(o,this._levelTargetDuration),b=n.length-1;b>=0;b--){var x=n[b],a=t[x].buffered;a.length>0&&c>a.start(0)&&this.removeBufferRange(x,t[x],0,c)}}},y.prototype.onLevelUpdated=function(o){var l=o.details;l.fragments.length>0&&(this._levelDuration=l.totalduration+l.fragments[0].start,this._levelTargetDuration=l.averagetargetduration||l.targetduration||10,this._live=l.live,this.updateMediaElementDuration())},y.prototype.updateMediaElementDuration=function(){var o=this.hls.config,l;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var t in this.sourceBuffer)if(this.sourceBuffer[t].updating===!0)return;l=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&o.liveDurationInfinity===!0?(u.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>l||!A.isFinite(l))&&(u.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},y.prototype.doFlush=function(){for(;this.flushRange.length;){var o=this.flushRange[0];if(this.flushBuffer(o.start,o.end,o.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var l=0,t=this.sourceBuffer;try{for(var n in t)l+=t[n].buffered.length}catch{u.logger.error("error while accessing sourceBuffer.buffered")}this.appended=l,this.hls.trigger(g.default.BUFFER_FLUSHED)}},y.prototype.doAppending=function(){var o=this,l=o.hls,t=o.segments,n=o.sourceBuffer;if(Object.keys(n).length){if(this.media.error){this.segments=[],u.logger.error("trying to append although a media error occured, flush segment and abort");return}if(this.appending)return;if(t&&t.length){var c=t.shift();try{var b=c.type,x=n[b];x?x.updating?t.unshift(c):(x.ended=!1,this.parent=c.parent,x.appendBuffer(c.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(d){u.logger.error("error while trying to append buffer:"+d.message),t.unshift(c);var a={type:f.ErrorTypes.MEDIA_ERROR,parent:c.parent};d.code!==22?(this.appendError?this.appendError++:this.appendError=1,a.details=f.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>l.config.appendErrorMaxRetry?(u.logger.log("fail "+l.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0,l.trigger(g.default.ERROR,a)):(a.fatal=!1,l.trigger(g.default.ERROR,a))):(this.segments=[],a.details=f.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,l.trigger(g.default.ERROR,a))}}}},y.prototype.flushBuffer=function(o,l,t){var n,c=this.sourceBuffer;if(Object.keys(c).length){if(u.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+o+"/"+l),this.flushBufferCounter<this.appended){for(var b in c)if(!(t&&b!==t)){if(n=c[b],n.ended=!1,n.updating)return u.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(b,n,o,l))return this.flushBufferCounter++,!1}}else u.logger.warn("abort flushing too many retries");u.logger.log("buffer flushed")}return!0},y.prototype.removeBufferRange=function(o,l,t,n){try{for(var c=0;c<l.buffered.length;c++){var b=l.buffered.start(c),x=l.buffered.end(c),a=Math.max(b,t),d=Math.min(x,n);if(Math.min(d,x)-a>.5)return u.logger.log("sb remove "+o+" ["+a+","+d+"], of ["+b+","+x+"], pos:"+this.media.currentTime),l.remove(a,d),!0}}catch(C){u.logger.warn("removeBufferRange failed",C)}return!1},y}(v.default);h.default=i}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var i in S)S.hasOwnProperty(i)&&(m[i]=S[i])};return function(m,S){f(m,S);function i(){this.constructor=m}m.prototype=S===null?Object.create(S):(i.prototype=S.prototype,new i)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=function(f){_(m,f);function m(S){var i=f.call(this,S,g.default.FPS_DROP_LEVEL_CAPPING,g.default.MEDIA_ATTACHING,g.default.MANIFEST_PARSED,g.default.BUFFER_CODECS,g.default.MEDIA_DETACHING)||this;return i.autoLevelCapping=A.POSITIVE_INFINITY,i.firstLevel=null,i.levels=[],i.media=null,i.restrictedLevels=[],i.timer=null,i}return m.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},m.prototype.onFpsDropLevelCapping=function(S){m.isLevelAllowed(S.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(S.droppedLevel)},m.prototype.onMediaAttaching=function(S){this.media=S.media instanceof window.HTMLVideoElement?S.media:null},m.prototype.onManifestParsed=function(S){var i=this.hls;this.restrictedLevels=[],this.levels=S.levels,this.firstLevel=S.firstLevel,i.config.capLevelToPlayerSize&&S.video&&this._startCapping()},m.prototype.onBufferCodecs=function(S){var i=this.hls;i.config.capLevelToPlayerSize&&S.video&&this._startCapping()},m.prototype.onLevelsUpdated=function(S){this.levels=S.levels},m.prototype.onMediaDetaching=function(){this._stopCapping()},m.prototype.detectPlayerSize=function(){if(this.media){var S=this.levels?this.levels.length:0;if(S){var i=this.hls;i.autoLevelCapping=this.getMaxLevel(S-1),i.autoLevelCapping>this.autoLevelCapping&&i.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}},m.prototype.getMaxLevel=function(S){var i=this;if(!this.levels)return-1;var p=this.levels.filter(function(y,o){return m.isLevelAllowed(o,i.restrictedLevels)&&o<=S});return m.getMaxLevelByMediaSize(p,this.mediaWidth,this.mediaHeight)},m.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=A.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},m.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=A.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(m.prototype,"mediaWidth",{get:function(){var S,i=this.media;return i&&(S=i.width||i.clientWidth||i.offsetWidth,S*=m.contentScaleFactor),S},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"mediaHeight",{get:function(){var S,i=this.media;return i&&(S=i.height||i.clientHeight||i.offsetHeight,S*=m.contentScaleFactor),S},enumerable:!0,configurable:!0}),Object.defineProperty(m,"contentScaleFactor",{get:function(){var S=1;try{S=window.devicePixelRatio}catch{}return S},enumerable:!0,configurable:!0}),m.isLevelAllowed=function(S,i){return i===void 0&&(i=[]),i.indexOf(S)===-1},m.getMaxLevelByMediaSize=function(S,i,p){if(!S||S&&!S.length)return-1;for(var y=function(n,c){return c?n.width!==c.width||n.height!==c.height:!0},o=S.length-1,l=0;l<S.length;l+=1){var t=S[l];if((t.width>=i||t.height>=p)&&y(t,S[l+1])){o=l;break}}return o},m}(v.default);h.default=u}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,t){l.__proto__=t}||function(l,t){for(var n in t)t.hasOwnProperty(n)&&(l[n]=t[n])};return function(l,t){o(l,t);function n(){this.constructor=l}l.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/event-handler.js"),g=s("./src/events.js"),v=s("./src/errors.js"),u=s("./src/utils/logger.js"),f=window.XMLHttpRequest,m=3,S={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},i=function(o,l,t){var n={videoCapabilities:[]};return l.forEach(function(c){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+c+'"'})}),[n]},p=function(o,l,t){switch(o){case S.WIDEVINE:return i(l,t);default:throw Error("Unknown key-system: "+o)}},y=function(o){A(l,o);function l(t){var n=o.call(this,t,g.default.MEDIA_ATTACHED,g.default.MANIFEST_PARSED)||this;return n._widevineLicenseUrl=t.config.widevineLicenseUrl,n._licenseXhrSetup=t.config.licenseXhrSetup,n._emeEnabled=t.config.emeEnabled,n._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._isMediaEncrypted=!1,n._requestLicenseFailureCount=0,n}return l.prototype.getLicenseServerUrl=function(t){var n;switch(t){case S.WIDEVINE:n=this._widevineLicenseUrl;break;default:n=null;break}return n||(u.logger.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),n},l.prototype._attemptKeySystemAccess=function(t,n,c){var b=this,x=p(t,n,c);if(!x){u.logger.warn("Can not create config for key-system (maybe because platform is not supported):",t);return}u.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,x).then(function(a){b._onMediaKeySystemAccessObtained(t,a)}).catch(function(a){u.logger.error('Failed to obtain key-system "'+t+'" access:',a)})},Object.defineProperty(l.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),l.prototype._onMediaKeySystemAccessObtained=function(t,n){var c=this;u.logger.log('Access for key-system "'+t+'" obtained');var b={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:n,mediaKeySystemDomain:t};this._mediaKeysList.push(b),n.createMediaKeys().then(function(x){b.mediaKeys=x,u.logger.log('Media-keys created for key-system "'+t+'"'),c._onMediaKeysCreated()}).catch(function(x){u.logger.error("Failed to create media-keys:",x)})},l.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(n){n.mediaKeysSession||(n.mediaKeysSession=n.mediaKeys.createSession(),t._onNewMediaKeySession(n.mediaKeysSession))})},l.prototype._onNewMediaKeySession=function(t){var n=this;u.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(c){n._onKeySessionMessage(t,c.message)},!1)},l.prototype._onKeySessionMessage=function(t,n){u.logger.log("Got EME message event, creating license request"),this._requestLicense(n,function(c){u.logger.log("Received license data, updating key-session"),t.update(c)})},l.prototype._onMediaEncrypted=function(t,n){u.logger.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=n,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},l.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys){u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}u.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l.prototype._generateRequestWithPreferredKeySession=function(){var t=this,n=this._mediaKeysList[0];if(!n){u.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(n.mediaKeysSessionInitialized){u.logger.warn("Key-Session already initialized but requested again");return}var c=n.mediaKeysSession;c||(u.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var b=this._mediaEncryptionInitDataType,x=this._mediaEncryptionInitData;u.logger.log('Generating key-session request for "'+b+'" init data type'),n.mediaKeysSessionInitialized=!0,c.generateRequest(b,x).then(function(){u.logger.debug("Key-session generation succeeded")}).catch(function(a){u.logger.error("Error generating key-session request:",a),t.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},l.prototype._createLicenseXhr=function(t,n,c){var b=new f,x=this._licenseXhrSetup;try{if(x)try{x(b,t)}catch{b.open("POST",t,!0),x(b,t)}b.readyState||b.open("POST",t,!0)}catch(a){u.logger.error("Error setting up key-system license XHR",a),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}return b.responseType="arraybuffer",b.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,b,t,n,c),b},l.prototype._onLicenseRequestReadyStageChange=function(t,n,c,b){switch(t.readyState){case 4:if(t.status===200)this._requestLicenseFailureCount=0,u.logger.log("License request succeeded"),b(t.response);else{if(u.logger.error("License Request XHR failed ("+n+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=m){var x=m-this._requestLicenseFailureCount+1;u.logger.warn("Retrying license request, "+x+" attempts left"),this._requestLicense(c,b);return}this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}break}},l.prototype._generateLicenseRequestChallenge=function(t,n){var c;return t.mediaKeySystemDomain===S.PLAYREADY?u.logger.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===S.WIDEVINE?c=n:u.logger.error("Unsupported key-system:",t.mediaKeySystemDomain),c},l.prototype._requestLicense=function(t,n){u.logger.log("Requesting content license for key-system");var c=this._mediaKeysList[0];if(!c){u.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(g.default.ERROR,{type:v.ErrorTypes.KEY_SYSTEM_ERROR,details:v.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}var b=this.getLicenseServerUrl(c.mediaKeySystemDomain),x=this._createLicenseXhr(b,t,n);u.logger.log("Sending license request to URL: "+b),x.send(this._generateLicenseRequestChallenge(c,t))},l.prototype.onMediaAttached=function(t){var n=this;if(!!this._emeEnabled){var c=t.media;this._media=c,c.addEventListener("encrypted",function(b){n._onMediaEncrypted(b.initDataType,b.initData)})}},l.prototype.onManifestParsed=function(t){if(!!this._emeEnabled){var n=t.levels.map(function(b){return b.audioCodec}),c=t.levels.map(function(b){return b.videoCodec});this._attemptKeySystemAccess(S.WIDEVINE,n,c)}},l}(_.default);h.default=y},"./src/controller/fps-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var p in i)i.hasOwnProperty(p)&&(S[p]=i[p])};return function(S,i){m(S,i);function p(){this.constructor=S}S.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/event-handler.js"),v=s("./src/utils/logger.js"),u=window.performance,f=function(m){A(S,m);function S(i){return m.call(this,i,_.default.MEDIA_ATTACHING)||this}return S.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},S.prototype.onMediaAttaching=function(i){var p=this.hls.config;if(p.capLevelOnFPSDrop){var y=this.video=i.media instanceof window.HTMLVideoElement?i.media:null;typeof y.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),p.fpsDroppedMonitoringPeriod)}},S.prototype.checkFPS=function(i,p,y){var o=u.now();if(p){if(this.lastTime){var l=o-this.lastTime,t=y-this.lastDroppedFrames,n=p-this.lastDecodedFrames,c=1e3*t/l,b=this.hls;if(b.trigger(_.default.FPS_DROP,{currentDropped:t,currentDecoded:n,totalDroppedFrames:y}),c>0&&t>b.config.fpsDroppedMonitoringThreshold*n){var x=b.currentLevel;v.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+x),x>0&&(b.autoLevelCapping===-1||b.autoLevelCapping>=x)&&(x=x-1,b.trigger(_.default.FPS_DROP_LEVEL_CAPPING,{level:x,droppedLevel:b.currentLevel}),b.autoLevelCapping=x,b.streamController.nextLevelSwitch())}}this.lastTime=o,this.lastDroppedFrames=y,this.lastDecodedFrames=p}},S.prototype.checkFPSInterval=function(){var i=this.video;if(i)if(this.isVideoPlaybackQualityAvailable){var p=i.getVideoPlaybackQuality();this.checkFPS(i,p.totalVideoFrames,p.droppedVideoFrames)}else this.checkFPS(i,i.webkitDecodedFrameCount,i.webkitDroppedFrameCount)},S}(g.default);h.default=f},"./src/controller/fragment-finders.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/utils/binary-search.js");function g(m,S,i){if(!Array.isArray(m)||!m.length||!A.isFinite(S)||S<m[0].programDateTime||S>=m[m.length-1].endProgramDateTime)return null;i=i||0;for(var p=0;p<m.length;++p){var y=m[p];if(f(S,i,y))return y}return null}h.findFragmentByPDT=g;function v(m,S,i,p){i===void 0&&(i=0),p===void 0&&(p=0);var y=m?S[m.sn-S[0].sn+1]:null;return y&&!u(i,p,y)?y:_.default.search(S,u.bind(null,i,p))}h.findFragmentByPTS=v;function u(m,S,i){m===void 0&&(m=0),S===void 0&&(S=0);var p=Math.min(S,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-p<=m?1:i.start-p>m&&i.start?-1:0}h.fragmentWithinToleranceTest=u;function f(m,S,i){var p=Math.min(S,i.duration+(i.deltaPTS?i.deltaPTS:0))*1e3;return i.endProgramDateTime-p>m}h.pdtWithinToleranceTest=f}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var i in S)S.hasOwnProperty(i)&&(m[i]=S[i])};return function(m,S){f(m,S);function i(){this.constructor=m}m.prototype=S===null?Object.create(S):(i.prototype=S.prototype,new i)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/event-handler.js"),v=s("./src/events.js");h.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var u=function(f){_(m,f);function m(S){var i=f.call(this,S,v.default.BUFFER_APPENDED,v.default.FRAG_BUFFERED,v.default.FRAG_LOADED)||this;return i.bufferPadding=.2,i.fragments=Object.create(null),i.timeRanges=Object.create(null),i.config=S.config,i}return m.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,g.default.prototype.destroy.call(this),f.prototype.destroy.call(this)},m.prototype.getBufferedFrag=function(S,i){var p=this.fragments,y=Object.keys(p).filter(function(l){var t=p[l];if(t.body.type!==i||!t.buffered)return!1;var n=t.body;return n.startPTS<=S&&S<=n.endPTS});if(y.length===0)return null;var o=y.pop();return p[o].body},m.prototype.detectEvictedFragments=function(S,i){var p=this,y,o;Object.keys(this.fragments).forEach(function(l){var t=p.fragments[l];if(t.buffered===!0){var n=t.range[S];if(n){y=n.time;for(var c=0;c<y.length;c++)if(o=y[c],p.isTimeBuffered(o.startPTS,o.endPTS,i)===!1){p.removeFragment(t.body);break}}}})},m.prototype.detectPartialFragments=function(S){var i=this,p=this.getFragmentKey(S),y=this.fragments[p];y&&(y.buffered=!0,Object.keys(this.timeRanges).forEach(function(o){if(S.hasElementaryStream(o)){var l=i.timeRanges[o];y.range[o]=i.getBufferedTimes(S.startPTS,S.endPTS,l)}}))},m.prototype.getBufferedTimes=function(S,i,p){for(var y=[],o,l,t=!1,n=0;n<p.length;n++)if(o=p.start(n)-this.bufferPadding,l=p.end(n)+this.bufferPadding,S>=o&&i<=l){y.push({startPTS:Math.max(S,p.start(n)),endPTS:Math.min(i,p.end(n))});break}else if(S<l&&i>o)y.push({startPTS:Math.max(S,p.start(n)),endPTS:Math.min(i,p.end(n))}),t=!0;else if(i<=o)break;return{time:y,partial:t}},m.prototype.getFragmentKey=function(S){return S.type+"_"+S.level+"_"+S.urlId+"_"+S.sn},m.prototype.getPartialFragment=function(S){var i=this,p,y,o,l=null,t=0;return Object.keys(this.fragments).forEach(function(n){var c=i.fragments[n];i.isPartial(c)&&(y=c.body.startPTS-i.bufferPadding,o=c.body.endPTS+i.bufferPadding,S>=y&&S<=o&&(p=Math.min(S-y,o-S),t<=p&&(l=c.body,t=p)))}),l},m.prototype.getState=function(S){var i=this.getFragmentKey(S),p=this.fragments[i],y=h.FragmentState.NOT_LOADED;return p!==void 0&&(p.buffered?this.isPartial(p)===!0?y=h.FragmentState.PARTIAL:y=h.FragmentState.OK:y=h.FragmentState.APPENDING),y},m.prototype.isPartial=function(S){return S.buffered===!0&&(S.range.video!==void 0&&S.range.video.partial===!0||S.range.audio!==void 0&&S.range.audio.partial===!0)},m.prototype.isTimeBuffered=function(S,i,p){for(var y,o,l=0;l<p.length;l++){if(y=p.start(l)-this.bufferPadding,o=p.end(l)+this.bufferPadding,S>=y&&i<=o)return!0;if(i<=y)return!1}return!1},m.prototype.onFragLoaded=function(S){var i=S.frag;A.isFinite(i.sn)&&!i.bitrateTest&&(this.fragments[this.getFragmentKey(i)]={body:i,range:Object.create(null),buffered:!1})},m.prototype.onBufferAppended=function(S){var i=this;this.timeRanges=S.timeRanges,Object.keys(this.timeRanges).forEach(function(p){var y=i.timeRanges[p];i.detectEvictedFragments(p,y)})},m.prototype.onFragBuffered=function(S){this.detectPartialFragments(S.frag)},m.prototype.hasFragment=function(S){var i=this.getFragmentKey(S);return this.fragments[i]!==void 0},m.prototype.removeFragment=function(S){var i=this.getFragmentKey(S);delete this.fragments[i]},m.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},m}(g.default);h.FragmentTracker=u}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/buffer-helper.js"),_=s("./src/errors.js"),g=s("./src/events.js"),v=s("./src/utils/logger.js"),u=1e3,f=.5,m=function(){function S(i,p,y,o){this.config=i,this.media=p,this.fragmentTracker=y,this.hls=o,this.stallReported=!1}return S.prototype.poll=function(i,p){var y=this,o=y.config,l=y.media,t=l.currentTime,n=window.performance.now();if(t!==i){this.stallReported&&(v.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(n-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;return}if(!(l.ended||!l.buffered.length||l.readyState>2)&&!(l.seeking&&A.BufferHelper.isBuffered(l,t))){var c=n-this.stalled,b=A.BufferHelper.bufferInfo(l,t,o.maxBufferHole);if(this.stalled)c>=u&&this._reportStall(b.len);else{this.stalled=n;return}this._tryFixBufferStall(b,c)}},S.prototype._tryFixBufferStall=function(i,p){var y=this,o=y.config,l=y.fragmentTracker,t=y.media,n=t.currentTime,c=l.getPartialFragment(n);c&&this._trySkipBufferHole(c),i.len>f&&p>o.highBufferWatchdogPeriod*1e3&&(this.stalled=null,this._tryNudgeBuffer())},S.prototype._reportStall=function(i){var p=this,y=p.hls,o=p.media,l=p.stallReported;l||(this.stallReported=!0,v.logger.warn("Playback stalling at @"+o.currentTime+" due to low buffer"),y.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:i}))},S.prototype._trySkipBufferHole=function(i){for(var p=this,y=p.hls,o=p.media,l=o.currentTime,t=0,n=0;n<o.buffered.length;n++){var c=o.buffered.start(n);if(l>=t&&l<c){o.currentTime=Math.max(c,o.currentTime+.1),v.logger.warn("skipping hole, adjusting currentTime from "+l+" to "+o.currentTime),this.stalled=null,y.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+l+" to "+o.currentTime,frag:i});return}t=o.buffered.end(n)}},S.prototype._tryNudgeBuffer=function(){var i=this,p=i.config,y=i.hls,o=i.media,l=o.currentTime,t=(this.nudgeRetry||0)+1;if(this.nudgeRetry=t,t<p.nudgeMaxRetry){var n=l+t*p.nudgeOffset;v.logger.log("adjust currentTime from "+l+" to "+n),o.currentTime=n,y.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else v.logger.error("still stuck in high buffer @"+l+" after "+p.nudgeMaxRetry+", raise fatal error"),y.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},S}();h.default=m},"./src/controller/id3-track-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var p in i)i.hasOwnProperty(p)&&(S[p]=i[p])};return function(S,i){m(S,i);function p(){this.constructor=S}S.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/event-handler.js"),v=s("./src/demux/id3.js"),u=s("./src/utils/texttrack-utils.js"),f=function(m){A(S,m);function S(i){var p=m.call(this,i,_.default.MEDIA_ATTACHED,_.default.MEDIA_DETACHING,_.default.FRAG_PARSING_METADATA)||this;return p.id3Track=void 0,p.media=void 0,p}return S.prototype.destroy=function(){g.default.prototype.destroy.call(this)},S.prototype.onMediaAttached=function(i){this.media=i.media,this.media},S.prototype.onMediaDetaching=function(){u.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},S.prototype.getID3Track=function(i){for(var p=0;p<i.length;p++){var y=i[p];if(y.kind==="metadata"&&y.label==="id3")return u.sendAddTrackEvent(y,this.media),y}return this.media.addTextTrack("metadata","id3")},S.prototype.onFragParsingMetadata=function(i){var p=i.frag,y=i.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var o=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,l=0;l<y.length;l++){var t=v.default.getID3Frames(y[l].data);if(t){var n=y[l].pts,c=l<y.length-1?y[l+1].pts:p.endPTS;n===c&&(c+=1e-4);for(var b=0;b<t.length;b++){var x=t[b];if(!v.default.isTimeStampFrame(x)){var a=new o(n,c,"");a.value=x,this.id3Track.addCue(a)}}}}},S}(g.default);h.default=f},"./src/controller/level-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var t in l)l.hasOwnProperty(t)&&(o[t]=l[t])};return function(o,l){y(o,l);function t(){this.constructor=o}o.prototype=l===null?Object.create(l):(t.prototype=l.prototype,new t)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/event-handler.js"),v=s("./src/utils/logger.js"),u=s("./src/errors.js"),f=s("./src/utils/codecs.js"),m=s("./src/controller/level-helper.js"),S=window.performance,i,p=function(y){A(o,y);function o(l){var t=y.call(this,l,_.default.MANIFEST_LOADED,_.default.LEVEL_LOADED,_.default.AUDIO_TRACK_SWITCHED,_.default.FRAG_LOADED,_.default.ERROR)||this;return t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),t}return o.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},o.prototype.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},o.prototype.startLoad=function(){var l=this._levels;this.canload=!0,this.levelRetryCount=0,l&&l.forEach(function(t){t.loadError=0;var n=t.details;n&&n.live&&(t.details=void 0)}),this.timer!==null&&this.loadLevel()},o.prototype.stopLoad=function(){this.canload=!1},o.prototype.onManifestLoaded=function(l){var t=[],n=[],c,b={},x=null,a=!1,d=!1;if(l.levels.forEach(function(T){var L=T.attrs;T.loadError=0,T.fragmentError=!1,a=a||!!T.videoCodec,d=d||!!T.audioCodec,i&&T.audioCodec&&T.audioCodec.indexOf("mp4a.40.34")!==-1&&(T.audioCodec=void 0),x=b[T.bitrate],x?x.url.push(T.url):(T.url=[T.url],T.urlId=0,b[T.bitrate]=T,t.push(T)),L&&(L.AUDIO&&(d=!0,m.addGroupId(x||T,"audio",L.AUDIO)),L.SUBTITLES&&m.addGroupId(x||T,"text",L.SUBTITLES))}),a&&d&&(t=t.filter(function(T){var L=T.videoCodec;return!!L})),t=t.filter(function(T){var L=T.audioCodec,R=T.videoCodec;return(!L||f.isCodecSupportedInMp4(L,"audio"))&&(!R||f.isCodecSupportedInMp4(R,"video"))}),l.audioTracks&&(n=l.audioTracks.filter(function(T){return!T.audioCodec||f.isCodecSupportedInMp4(T.audioCodec,"audio")}),n.forEach(function(T,L){T.id=L})),t.length>0){c=t[0].bitrate,t.sort(function(T,L){return T.bitrate-L.bitrate}),this._levels=t;for(var C=0;C<t.length;C++)if(t[C].bitrate===c){this._firstLevel=C,v.logger.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+c);break}this.hls.trigger(_.default.MANIFEST_PARSED,{levels:t,audioTracks:n,firstLevel:this._firstLevel,stats:l.stats,audio:d,video:a,altAudio:n.some(function(T){return!!T.url})})}else this.hls.trigger(_.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(o.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(l){var t=this._levels;t&&(l=Math.min(l,t.length-1),(this.currentLevelIndex!==l||!t[l].details)&&this.setLevelInternal(l))},enumerable:!0,configurable:!0}),o.prototype.setLevelInternal=function(l){var t=this._levels,n=this.hls;if(l>=0&&l<t.length){if(this.clearTimer(),this.currentLevelIndex!==l){v.logger.log("switching to level "+l),this.currentLevelIndex=l;var c=t[l];c.level=l,n.trigger(_.default.LEVEL_SWITCHING,c)}var b=t[l],x=b.details;if(!x||x.live){var a=b.urlId;n.trigger(_.default.LEVEL_LOADING,{url:b.url[a],level:l,id:a})}}else n.trigger(_.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:l,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(o.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(l){this.manualLevelIndex=l,this._startLevel===void 0&&(this._startLevel=l),l!==-1&&(this.level=l)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(l){this._firstLevel=l},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startLevel",{get:function(){if(this._startLevel===void 0){var l=this.hls.config.startLevel;return l!==void 0?l:this._firstLevel}else return this._startLevel},set:function(l){this._startLevel=l},enumerable:!0,configurable:!0}),o.prototype.onError=function(l){if(l.fatal){l.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var t=!1,n=!1,c;switch(l.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:c=l.frag.level,n=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:c=l.context.level,t=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:c=l.level,t=!0;break}c!==void 0&&this.recoverLevel(l,c,t,n)},o.prototype.recoverLevel=function(l,t,n,c){var b=this,x=this.hls.config,a=l.details,d=this._levels[t],C,T,L;if(d.loadError++,d.fragmentError=c,n)if(this.levelRetryCount+1<=x.levelLoadingMaxRetry)T=Math.min(Math.pow(2,this.levelRetryCount)*x.levelLoadingRetryDelay,x.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return b.loadLevel()},T),l.levelRetry=!0,this.levelRetryCount++,v.logger.warn("level controller, "+a+", retry in "+T+" ms, current retry count is "+this.levelRetryCount);else{v.logger.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.clearTimer(),l.fatal=!0;return}(n||c)&&(C=d.url.length,C>1&&d.loadError<C?(d.urlId=(d.urlId+1)%C,d.details=void 0,v.logger.warn("level controller, "+a+" for level "+t+": switching to redundant URL-id "+d.urlId)):this.manualLevelIndex===-1?(L=t===0?this._levels.length-1:t-1,v.logger.warn("level controller, "+a+": switch to "+L),this.hls.nextAutoLevel=this.currentLevelIndex=L):c&&(v.logger.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},o.prototype.onFragLoaded=function(l){var t=l.frag;if(t!==void 0&&t.type==="main"){var n=this._levels[t.level];n!==void 0&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},o.prototype.onLevelLoaded=function(l){var t=this,n=l.level;if(n===this.currentLevelIndex){var c=this._levels[n];c.fragmentError||(c.loadError=0,this.levelRetryCount=0);var b=l.details;if(b.live){var x=1e3*(b.averagetargetduration?b.averagetargetduration:b.targetduration),a=x,d=c.details;d&&b.endSN===d.endSN&&(a/=2,v.logger.log("same live playlist, reload twice faster")),a-=S.now()-l.stats.trequest,a=Math.max(x/2,Math.round(a)),v.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.clearTimer()}},o.prototype.onAudioTrackSwitched=function(l){var t=this.hls.audioTracks[l.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(!!n&&n.audioGroupIds){var c=n.audioGroupIds.findIndex(function(b){return b===t});c!==n.urlId&&(n.urlId=c,this.startLoad())}},o.prototype.loadLevel=function(){if(v.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var l=this._levels[this.currentLevelIndex];if(typeof l=="object"&&l.url.length>0){var t=this.currentLevelIndex,n=l.urlId,c=l.url[n];v.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(_.default.LEVEL_LOADING,{url:c,level:t,id:n})}}},Object.defineProperty(o.prototype,"nextLoadLevel",{get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(l){this.level=l,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=l)},enumerable:!0,configurable:!0}),o}(g.default);h.default=p},"./src/controller/level-helper.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/utils/logger.js");function g(m,S,i){switch(S){case"audio":m.audioGroupIds||(m.audioGroupIds=[]),m.audioGroupIds.push(i);break;case"text":m.textGroupIds||(m.textGroupIds=[]),m.textGroupIds.push(i);break}}h.addGroupId=g;function v(m,S,i){var p=m[S],y=m[i],o=y.startPTS;A.isFinite(o)?i>S?(p.duration=o-p.start,p.duration<0&&_.logger.warn("negative duration computed for frag "+p.sn+",level "+p.level+", there should be some duration drift between playlist and fragment!")):(y.duration=p.start-o,y.duration<0&&_.logger.warn("negative duration computed for frag "+y.sn+",level "+y.level+", there should be some duration drift between playlist and fragment!")):i>S?y.start=p.start+p.duration:y.start=Math.max(p.start-y.duration,0)}h.updatePTS=v;function u(m,S,i,p,y,o){var l=i;if(A.isFinite(S.startPTS)){var t=Math.abs(S.startPTS-i);A.isFinite(S.deltaPTS)?S.deltaPTS=Math.max(t,S.deltaPTS):S.deltaPTS=t,l=Math.max(i,S.startPTS),i=Math.min(i,S.startPTS),p=Math.max(p,S.endPTS),y=Math.min(y,S.startDTS),o=Math.max(o,S.endDTS)}var n=i-S.start;S.start=S.startPTS=i,S.maxStartPTS=l,S.endPTS=p,S.startDTS=y,S.endDTS=o,S.duration=p-i;var c=S.sn;if(!m||c<m.startSN||c>m.endSN)return 0;var b,x,a;for(b=c-m.startSN,x=m.fragments,x[b]=S,a=b;a>0;a--)v(x,a,a-1);for(a=b;a<x.length-1;a++)v(x,a,a+1);return m.PTSKnown=!0,n}h.updateFragPTSDTS=u;function f(m,S){var i=Math.max(m.startSN,S.startSN)-S.startSN,p=Math.min(m.endSN,S.endSN)-S.startSN,y=S.startSN-m.startSN,o=m.fragments,l=S.fragments,t=0,n;if(S.initSegment&&m.initSegment&&(S.initSegment=m.initSegment),p<i){S.PTSKnown=!1;return}for(var c=i;c<=p;c++){var b=o[y+c],x=l[c];x&&b&&(t=b.cc-x.cc,A.isFinite(b.startPTS)&&(x.start=x.startPTS=b.startPTS,x.endPTS=b.endPTS,x.duration=b.duration,x.backtracked=b.backtracked,x.dropped=b.dropped,n=x))}if(t)for(_.logger.log("discontinuity sliding from playlist, take drift into account"),c=0;c<l.length;c++)l[c].cc+=t;if(n)u(S,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(y>=0&&y<o.length){var a=o[y].start;for(c=0;c<l.length;c++)l[c].start+=a}S.PTSKnown=m.PTSKnown}h.mergeDetails=f}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var L in T)T.hasOwnProperty(L)&&(C[L]=T[L])};return function(C,T){d(C,T);function L(){this.constructor=C}C.prototype=T===null?Object.create(T):(L.prototype=T.prototype,new L)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/utils/binary-search.js"),v=s("./src/utils/buffer-helper.js"),u=s("./src/demux/demuxer.js"),f=s("./src/events.js"),m=s("./src/controller/fragment-tracker.js"),S=s("./src/loader/fragment.js"),i=s("./src/loader/playlist-loader.js"),p=s("./src/controller/level-helper.js"),y=s("./src/utils/time-ranges.js"),o=s("./src/errors.js"),l=s("./src/utils/logger.js"),t=s("./src/utils/discontinuities.js"),n=s("./src/controller/fragment-finders.js"),c=s("./src/controller/gap-controller.js"),b=s("./src/controller/base-stream-controller.js"),x=100,a=function(d){_(C,d);function C(T,L){var R=d.call(this,T,f.default.MEDIA_ATTACHED,f.default.MEDIA_DETACHING,f.default.MANIFEST_LOADING,f.default.MANIFEST_PARSED,f.default.LEVEL_LOADED,f.default.KEY_LOADED,f.default.FRAG_LOADED,f.default.FRAG_LOAD_EMERGENCY_ABORTED,f.default.FRAG_PARSING_INIT_SEGMENT,f.default.FRAG_PARSING_DATA,f.default.FRAG_PARSED,f.default.ERROR,f.default.AUDIO_TRACK_SWITCHING,f.default.AUDIO_TRACK_SWITCHED,f.default.BUFFER_CREATED,f.default.BUFFER_APPENDED,f.default.BUFFER_FLUSHED)||this;return R.fragmentTracker=L,R.config=T.config,R.audioCodecSwap=!1,R._state=b.State.STOPPED,R.stallReported=!1,R.gapController=null,R}return C.prototype.onHandlerDestroying=function(){this.stopLoad(),d.prototype.onHandlerDestroying.call(this)},C.prototype.onHandlerDestroyed=function(){this.state=b.State.STOPPED,this.fragmentTracker=null,d.prototype.onHandlerDestroyed.call(this)},C.prototype.startLoad=function(T){if(this.levels){var L=this.lastCurrentTime,R=this.hls;if(this.stopLoad(),this.setInterval(x),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var O=R.startLevel;O===-1&&(O=0,this.bitrateTest=!0),this.level=R.nextLoadLevel=O,this.loadedmetadata=!1}L>0&&T===-1&&(l.logger.log("override startPosition with lastCurrentTime @"+L.toFixed(3)),T=L),this.state=b.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=T,this.tick()}else this.forceStartLoad=!0,this.state=b.State.STOPPED},C.prototype.stopLoad=function(){var T=this.fragCurrent;T&&(T.loader&&T.loader.abort(),this.fragmentTracker.removeFragment(T),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=b.State.STOPPED,this.forceStartLoad=!1},C.prototype.doTick=function(){switch(this.state){case b.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case b.State.IDLE:this._doTickIdle();break;case b.State.WAITING_LEVEL:var T=this.levels[this.level];T&&T.details&&(this.state=b.State.IDLE);break;case b.State.FRAG_LOADING_WAITING_RETRY:var L=window.performance.now(),R=this.retryDate;(!R||L>=R||this.media&&this.media.seeking)&&(l.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=b.State.IDLE);break;case b.State.ERROR:case b.State.STOPPED:case b.State.FRAG_LOADING:case b.State.PARSING:case b.State.PARSED:case b.State.ENDED:break}this._checkBuffer(),this._checkFragmentChanged()},C.prototype._doTickIdle=function(){var T=this.hls,L=T.config,R=this.media;if(!(this.levelLastLoaded===void 0||!R&&(this.startFragRequested||!L.startFragPrefetch))){var O;this.loadedmetadata?O=R.currentTime:O=this.nextLoadPosition;var j=T.nextLoadLevel,D=this.levels[j];if(!!D){var w=D.bitrate,F;w?F=Math.max(8*L.maxBufferSize/w,L.maxBufferLength):F=L.maxBufferLength,F=Math.min(F,L.maxMaxBufferLength);var B=v.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:R,O,L.maxBufferHole),M=B.len;if(!(M>=F)){l.logger.trace("buffer length of "+M.toFixed(3)+" is below max of "+F.toFixed(3)+". checking for more payload ..."),this.level=T.nextLoadLevel=j;var N=D.details;if(!N||N.live&&this.levelLastLoaded!==j){this.state=b.State.WAITING_LEVEL;return}if(this._streamEnded(B,N)){var I={};this.altAudio&&(I.type="video"),this.hls.trigger(f.default.BUFFER_EOS,I),this.state=b.State.ENDED;return}this._fetchPayloadOrEos(O,B,N)}}}},C.prototype._fetchPayloadOrEos=function(T,L,R){var O=this.fragPrevious,j=this.level,D=R.fragments,w=D.length;if(w!==0){var F=D[0].start,B=D[w-1].start+D[w-1].duration,M=L.end,N;if(R.initSegment&&!R.initSegment.data)N=R.initSegment;else if(R.live){var I=this.config.initialLiveManifestSize;if(w<I){l.logger.warn("Can not start playback of a level, reason: not enough fragments "+w+" < "+I);return}if(N=this._ensureFragmentAtLivePoint(R,M,F,B,O,D,w),N===null)return}else M<F&&(N=D[0]);N||(N=this._findFragment(F,O,w,D,M,B,R)),N&&(N.encrypted?(l.logger.log("Loading key for "+N.sn+" of ["+R.startSN+" ,"+R.endSN+"],level "+j),this._loadKey(N)):(l.logger.log("Loading "+N.sn+" of ["+R.startSN+" ,"+R.endSN+"],level "+j+", currentTime:"+T.toFixed(3)+",bufferEnd:"+M.toFixed(3)),this._loadFragment(N)))}},C.prototype._ensureFragmentAtLivePoint=function(T,L,R,O,j,D,w){var F=this.hls.config,B=this.media,M,N=F.liveMaxLatencyDuration!==void 0?F.liveMaxLatencyDuration:F.liveMaxLatencyDurationCount*T.targetduration;if(L<Math.max(R-F.maxFragLookUpTolerance,O-N)){var I=this.liveSyncPosition=this.computeLivePosition(R,T);l.logger.log("buffer end: "+L.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+I.toFixed(3)),L=I,B&&B.readyState&&B.duration>I&&(B.currentTime=I),this.nextLoadPosition=I}if(T.PTSKnown&&L>O&&B&&B.readyState)return null;if(this.startFragRequested&&!T.PTSKnown){if(j)if(T.hasProgramDateTime)l.logger.log("live playlist, switching playlist, load frag with same PDT: "+j.programDateTime),M=n.findFragmentByPDT(D,j.endProgramDateTime,F.maxFragLookUpTolerance);else{var X=j.sn+1;if(X>=T.startSN&&X<=T.endSN){var $=D[X-T.startSN];j.cc===$.cc&&(M=$,l.logger.log("live playlist, switching playlist, load frag with next SN: "+M.sn))}M||(M=g.default.search(D,function(ee){return j.cc-ee.cc}),M&&l.logger.log("live playlist, switching playlist, load frag with same CC: "+M.sn))}M||(M=D[Math.min(w-1,Math.round(w/2))],l.logger.log("live playlist, switching playlist, unknown, load middle frag : "+M.sn))}return M},C.prototype._findFragment=function(T,L,R,O,j,D,w){var F=this.hls.config,B;if(j<D){var M=j>D-F.maxFragLookUpTolerance?0:F.maxFragLookUpTolerance;B=n.findFragmentByPTS(L,O,j,M)}else B=O[R-1];if(B){var N=B.sn-w.startSN,I=L&&B.level===L.level,X=O[N-1],$=O[N+1];if(L&&B.sn===L.sn)if(I&&!B.backtracked)if(B.sn<w.endSN){var ee=L.deltaPTS;ee&&ee>F.maxBufferHole&&L.dropped&&N?(B=X,l.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(B=$,l.logger.log("SN just loaded, load next one: "+B.sn,B))}else B=null;else B.backtracked&&($&&$.backtracked?(l.logger.warn("Already backtracked from fragment "+$.sn+", will not backtrack to fragment "+B.sn+". Loading fragment "+$.sn),B=$):(l.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),B.dropped=0,X?(B=X,B.backtracked=!0):N&&(B=null)))}return B},C.prototype._loadKey=function(T){this.state=b.State.KEY_LOADING,this.hls.trigger(f.default.KEY_LOADING,{frag:T})},C.prototype._loadFragment=function(T){var L=this.fragmentTracker.getState(T);this.fragCurrent=T,this.startFragRequested=!0,A.isFinite(T.sn)&&!T.bitrateTest&&(this.nextLoadPosition=T.start+T.duration),T.backtracked||L===m.FragmentState.NOT_LOADED||L===m.FragmentState.PARTIAL?(T.autoLevel=this.hls.autoLevelEnabled,T.bitrateTest=this.bitrateTest,this.hls.trigger(f.default.FRAG_LOADING,{frag:T}),this.demuxer||(this.demuxer=new u.default(this.hls,"main")),this.state=b.State.FRAG_LOADING):L===m.FragmentState.APPENDING&&this._reduceMaxBufferLength(T.duration)&&this.fragmentTracker.removeFragment(T)},Object.defineProperty(C.prototype,"state",{get:function(){return this._state},set:function(T){if(this.state!==T){var L=this.state;this._state=T,l.logger.log("main stream:"+L+"->"+T),this.hls.trigger(f.default.STREAM_STATE_TRANSITION,{previousState:L,nextState:T})}},enumerable:!0,configurable:!0}),C.prototype.getBufferedFrag=function(T){return this.fragmentTracker.getBufferedFrag(T,i.default.LevelType.MAIN)},Object.defineProperty(C.prototype,"currentLevel",{get:function(){var T=this.media;if(T){var L=this.getBufferedFrag(T.currentTime);if(L)return L.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"nextBufferedFrag",{get:function(){var T=this.media;return T?this.followingBufferedFrag(this.getBufferedFrag(T.currentTime)):null},enumerable:!0,configurable:!0}),C.prototype.followingBufferedFrag=function(T){return T?this.getBufferedFrag(T.endPTS+.5):null},Object.defineProperty(C.prototype,"nextLevel",{get:function(){var T=this.nextBufferedFrag;return T?T.level:-1},enumerable:!0,configurable:!0}),C.prototype._checkFragmentChanged=function(){var T,L,R=this.media;if(R&&R.readyState&&R.seeking===!1&&(L=R.currentTime,L>this.lastCurrentTime&&(this.lastCurrentTime=L),v.BufferHelper.isBuffered(R,L)?T=this.getBufferedFrag(L):v.BufferHelper.isBuffered(R,L+.1)&&(T=this.getBufferedFrag(L+.1)),T)){var O=T;if(O!==this.fragPlaying){this.hls.trigger(f.default.FRAG_CHANGED,{frag:O});var j=O.level;(!this.fragPlaying||this.fragPlaying.level!==j)&&this.hls.trigger(f.default.LEVEL_SWITCHED,{level:j}),this.fragPlaying=O}}},C.prototype.immediateLevelSwitch=function(){if(l.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var T=this.media,L=void 0;T?(L=T.paused,T.pause()):L=!0,this.previouslyPaused=L}var R=this.fragCurrent;R&&R.loader&&R.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,A.POSITIVE_INFINITY)},C.prototype.immediateLevelSwitchEnd=function(){var T=this.media;T&&T.buffered.length&&(this.immediateSwitch=!1,v.BufferHelper.isBuffered(T,T.currentTime)&&(T.currentTime-=1e-4),this.previouslyPaused||T.play())},C.prototype.nextLevelSwitch=function(){var T=this.media;if(T&&T.readyState){var L=void 0,R=void 0,O=void 0;if(R=this.getBufferedFrag(T.currentTime),R&&R.startPTS>1&&this.flushMainBuffer(0,R.startPTS-1),T.paused)L=0;else{var j=this.hls.nextLoadLevel,D=this.levels[j],w=this.fragLastKbps;w&&this.fragCurrent?L=this.fragCurrent.duration*D.bitrate/(1e3*w)+1:L=0}if(O=this.getBufferedFrag(T.currentTime+L),O&&(O=this.followingBufferedFrag(O),O)){var F=this.fragCurrent;F&&F.loader&&F.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(O.maxStartPTS,A.POSITIVE_INFINITY)}}},C.prototype.flushMainBuffer=function(T,L){this.state=b.State.BUFFER_FLUSHING;var R={startOffset:T,endOffset:L};this.altAudio&&(R.type="video"),this.hls.trigger(f.default.BUFFER_FLUSHING,R)},C.prototype.onMediaAttached=function(T){var L=this.media=this.mediaBuffer=T.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),L.addEventListener("seeking",this.onvseeking),L.addEventListener("seeked",this.onvseeked),L.addEventListener("ended",this.onvended);var R=this.config;this.levels&&R.autoStartLoad&&this.hls.startLoad(R.startPosition),this.gapController=new c.default(R,L,this.fragmentTracker,this.hls)},C.prototype.onMediaDetaching=function(){var T=this.media;T&&T.ended&&(l.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var L=this.levels;L&&L.forEach(function(R){R.details&&R.details.fragments.forEach(function(O){O.backtracked=void 0})}),T&&(T.removeEventListener("seeking",this.onvseeking),T.removeEventListener("seeked",this.onvseeked),T.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},C.prototype.onMediaSeeked=function(){var T=this.media,L=T?T.currentTime:void 0;A.isFinite(L)&&l.logger.log("media seeked to "+L.toFixed(3)),this.tick()},C.prototype.onManifestLoading=function(){l.logger.log("trigger BUFFER_RESET"),this.hls.trigger(f.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},C.prototype.onManifestParsed=function(T){var L=!1,R=!1,O;T.levels.forEach(function(D){O=D.audioCodec,O&&(O.indexOf("mp4a.40.2")!==-1&&(L=!0),O.indexOf("mp4a.40.5")!==-1&&(R=!0))}),this.audioCodecSwitch=L&&R,this.audioCodecSwitch&&l.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=T.levels,this.startFragRequested=!1;var j=this.config;(j.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(j.startPosition)},C.prototype.onLevelLoaded=function(T){var L=T.details,R=T.level,O=this.levels[this.levelLastLoaded],j=this.levels[R],D=L.totalduration,w=0;if(l.logger.log("level "+R+" loaded ["+L.startSN+","+L.endSN+"],duration:"+D),L.live){var F=j.details;F&&L.fragments.length>0?(p.mergeDetails(F,L),w=L.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(w,F),L.PTSKnown&&A.isFinite(w)?l.logger.log("live playlist sliding:"+w.toFixed(3)):(l.logger.log("live playlist - outdated PTS, unknown sliding"),t.alignStream(this.fragPrevious,O,L))):(l.logger.log("live playlist - first load, unknown sliding"),L.PTSKnown=!1,t.alignStream(this.fragPrevious,O,L))}else L.PTSKnown=!1;if(j.details=L,this.levelLastLoaded=R,this.hls.trigger(f.default.LEVEL_UPDATED,{details:L,level:R}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var B=L.startTimeOffset;A.isFinite(B)?(B<0&&(l.logger.log("negative start time offset "+B+", count from end of last fragment"),B=w+D+B),l.logger.log("start time offset found in playlist, adjust startPosition to "+B),this.startPosition=B):L.live?(this.startPosition=this.computeLivePosition(w,L),l.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===b.State.WAITING_LEVEL&&(this.state=b.State.IDLE),this.tick()},C.prototype.onKeyLoaded=function(){this.state===b.State.KEY_LOADING&&(this.state=b.State.IDLE,this.tick())},C.prototype.onFragLoaded=function(T){var L=this,R=L.fragCurrent,O=L.hls,j=L.levels,D=L.media,w=T.frag;if(this.state===b.State.FRAG_LOADING&&R&&w.type==="main"&&w.level===R.level&&w.sn===R.sn){var F=T.stats,B=j[R.level],M=B.details;if(this.bitrateTest=!1,this.stats=F,l.logger.log("Loaded "+R.sn+" of ["+M.startSN+" ,"+M.endSN+"],level "+R.level),w.bitrateTest&&O.nextLoadLevel)this.state=b.State.IDLE,this.startFragRequested=!1,F.tparsed=F.tbuffered=window.performance.now(),O.trigger(f.default.FRAG_BUFFERED,{stats:F,frag:R,id:"main"}),this.tick();else if(w.sn==="initSegment")this.state=b.State.IDLE,F.tparsed=F.tbuffered=window.performance.now(),M.initSegment.data=T.payload,O.trigger(f.default.FRAG_BUFFERED,{stats:F,frag:R,id:"main"}),this.tick();else{l.logger.log("Parsing "+R.sn+" of ["+M.startSN+" ,"+M.endSN+"],level "+R.level+", cc "+R.cc),this.state=b.State.PARSING,this.pendingBuffering=!0,this.appended=!1,w.bitrateTest&&(w.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:w}));var N=!(D&&D.seeking)&&(M.PTSKnown||!M.live),I=M.initSegment?M.initSegment.data:[],X=this._getAudioCodec(B),$=this.demuxer=this.demuxer||new u.default(this.hls,"main");$.push(T.payload,I,X,B.videoCodec,R,M.totalduration,N)}}this.fragLoadError=0},C.prototype.onFragParsingInitSegment=function(T){var L=this.fragCurrent,R=T.frag;if(L&&T.id==="main"&&R.sn===L.sn&&R.level===L.level&&this.state===b.State.PARSING){var O=T.tracks,j=void 0,D=void 0;if(O.audio&&this.altAudio&&delete O.audio,D=O.audio,D){var w=this.levels[this.level].audioCodec,F=navigator.userAgent.toLowerCase();w&&this.audioCodecSwap&&(l.logger.log("swapping playlist audio codec"),w.indexOf("mp4a.40.5")!==-1?w="mp4a.40.2":w="mp4a.40.5"),this.audioCodecSwitch&&D.metadata.channelCount!==1&&F.indexOf("firefox")===-1&&(w="mp4a.40.5"),F.indexOf("android")!==-1&&D.container!=="audio/mpeg"&&(w="mp4a.40.2",l.logger.log("Android: force audio codec to "+w)),D.levelCodec=w,D.id=T.id}D=O.video,D&&(D.levelCodec=this.levels[this.level].videoCodec,D.id=T.id),this.hls.trigger(f.default.BUFFER_CODECS,O);for(j in O){D=O[j],l.logger.log("main track:"+j+",container:"+D.container+",codecs[level/parsed]=["+D.levelCodec+"/"+D.codec+"]");var B=D.initSegment;B&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(f.default.BUFFER_APPENDING,{type:j,data:B,parent:"main",content:"initSegment"}))}this.tick()}},C.prototype.onFragParsingData=function(T){var L=this,R=this.fragCurrent,O=T.frag;if(R&&T.id==="main"&&O.sn===R.sn&&O.level===R.level&&!(T.type==="audio"&&this.altAudio)&&this.state===b.State.PARSING){var j=this.levels[this.level],D=R;if(A.isFinite(T.endPTS)||(T.endPTS=T.startPTS+R.duration,T.endDTS=T.startDTS+R.duration),T.hasAudio===!0&&D.addElementaryStream(S.default.ElementaryStreamTypes.AUDIO),T.hasVideo===!0&&D.addElementaryStream(S.default.ElementaryStreamTypes.VIDEO),l.logger.log("Parsed "+T.type+",PTS:["+T.startPTS.toFixed(3)+","+T.endPTS.toFixed(3)+"],DTS:["+T.startDTS.toFixed(3)+"/"+T.endDTS.toFixed(3)+"],nb:"+T.nb+",dropped:"+(T.dropped||0)),T.type==="video")if(D.dropped=T.dropped,D.dropped)if(D.backtracked)l.logger.warn("Already backtracked on this fragment, appending with the gap",D.sn);else{var w=j.details;if(w&&D.sn===w.startSN)l.logger.warn("missing video frame(s) on first frag, appending with gap",D.sn);else{l.logger.warn("missing video frame(s), backtracking fragment",D.sn),this.fragmentTracker.removeFragment(D),D.backtracked=!0,this.nextLoadPosition=T.startPTS,this.state=b.State.IDLE,this.fragPrevious=D,this.tick();return}}else D.backtracked=!1;var F=p.updateFragPTSDTS(j.details,D,T.startPTS,T.endPTS,T.startDTS,T.endDTS),B=this.hls;B.trigger(f.default.LEVEL_PTS_UPDATED,{details:j.details,level:this.level,drift:F,type:T.type,start:T.startPTS,end:T.endPTS}),[T.data1,T.data2].forEach(function(M){M&&M.length&&L.state===b.State.PARSING&&(L.appended=!0,L.pendingBuffering=!0,B.trigger(f.default.BUFFER_APPENDING,{type:T.type,data:M,parent:"main",content:"data"}))}),this.tick()}},C.prototype.onFragParsed=function(T){var L=this.fragCurrent,R=T.frag;L&&T.id==="main"&&R.sn===L.sn&&R.level===L.level&&this.state===b.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=b.State.PARSED,this._checkAppendedParsed())},C.prototype.onAudioTrackSwitching=function(T){var L=!!T.url,R=T.id;if(!L){if(this.mediaBuffer!==this.media){l.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var O=this.fragCurrent;O.loader&&(l.logger.log("switching to main audio track, cancel main fragment load"),O.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=b.State.IDLE}var j=this.hls;j.trigger(f.default.BUFFER_FLUSHING,{startOffset:0,endOffset:A.POSITIVE_INFINITY,type:"audio"}),j.trigger(f.default.AUDIO_TRACK_SWITCHED,{id:R}),this.altAudio=!1}},C.prototype.onAudioTrackSwitched=function(T){var L=T.id,R=!!this.hls.audioTracks[L].url;if(R){var O=this.videoBuffer;O&&this.mediaBuffer!==O&&(l.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=O)}this.altAudio=R,this.tick()},C.prototype.onBufferCreated=function(T){var L=T.tracks,R,O,j=!1;for(var D in L){var w=L[D];w.id==="main"?(O=D,R=w,D==="video"&&(this.videoBuffer=L[D].buffer)):j=!0}j&&R?(l.logger.log("alternate track found, use "+O+".buffered to schedule main fragment loading"),this.mediaBuffer=R.buffer):this.mediaBuffer=this.media},C.prototype.onBufferAppended=function(T){if(T.parent==="main"){var L=this.state;(L===b.State.PARSING||L===b.State.PARSED)&&(this.pendingBuffering=T.pending>0,this._checkAppendedParsed())}},C.prototype._checkAppendedParsed=function(){if(this.state===b.State.PARSED&&(!this.appended||!this.pendingBuffering)){var T=this.fragCurrent;if(T){var L=this.mediaBuffer?this.mediaBuffer:this.media;l.logger.log("main buffered : "+y.default.toString(L.buffered)),this.fragPrevious=T;var R=this.stats;R.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*R.total/(R.tbuffered-R.tfirst)),this.hls.trigger(f.default.FRAG_BUFFERED,{stats:R,frag:T,id:"main"}),this.state=b.State.IDLE}this.tick()}},C.prototype.onError=function(T){var L=T.frag||this.fragCurrent;if(!(L&&L.type!=="main")){var R=!!this.media&&v.BufferHelper.isBuffered(this.media,this.media.currentTime)&&v.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(T.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:if(!T.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var O=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);l.logger.warn("mediaController: frag loading failed, retry in "+O+" ms"),this.retryDate=window.performance.now()+O,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=b.State.FRAG_LOADING_WAITING_RETRY}else l.logger.error("mediaController: "+T.details+" reaches max retry, redispatch as fatal ..."),T.fatal=!0,this.state=b.State.ERROR;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==b.State.ERROR&&(T.fatal?(this.state=b.State.ERROR,l.logger.warn("streamController: "+T.details+",switch to "+this.state+" state ...")):!T.levelRetry&&this.state===b.State.WAITING_LEVEL&&(this.state=b.State.IDLE));break;case o.ErrorDetails.BUFFER_FULL_ERROR:T.parent==="main"&&(this.state===b.State.PARSING||this.state===b.State.PARSED)&&(R?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=b.State.IDLE):(l.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,A.POSITIVE_INFINITY)));break}}},C.prototype._reduceMaxBufferLength=function(T){var L=this.config;return L.maxMaxBufferLength>=T?(L.maxMaxBufferLength/=2,l.logger.warn("main:reduce max buffer length to "+L.maxMaxBufferLength+"s"),!0):!1},C.prototype._checkBuffer=function(){var T=this.media;if(!(!T||T.readyState===0)){var L=this.mediaBuffer?this.mediaBuffer:T,R=L.buffered;!this.loadedmetadata&&R.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,R)}},C.prototype.onFragLoadEmergencyAborted=function(){this.state=b.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},C.prototype.onBufferFlushed=function(){var T=this.mediaBuffer?this.mediaBuffer:this.media;T&&this.fragmentTracker.detectEvictedFragments(S.default.ElementaryStreamTypes.VIDEO,T.buffered),this.state=b.State.IDLE,this.fragPrevious=null},C.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},C.prototype.computeLivePosition=function(T,L){var R=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*L.targetduration;return T+Math.max(0,L.totalduration-R)},C.prototype._seekToStartPos=function(){var T=this.media,L=T.currentTime,R=T.seeking?L:this.startPosition;L!==R&&(l.logger.log("target start position not buffered, seek to buffered.start(0) "+R+" from current time "+L+" "),T.currentTime=R)},C.prototype._getAudioCodec=function(T){var L=this.config.defaultAudioCodec||T.audioCodec;return this.audioCodecSwap&&(l.logger.log("swapping playlist audio codec"),L&&(L.indexOf("mp4a.40.5")!==-1?L="mp4a.40.2":L="mp4a.40.5")),L},Object.defineProperty(C.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(T){this._liveSyncPosition=T},enumerable:!0,configurable:!0}),C}(b.default);h.default=a}).call(this,s("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var c in n)n.hasOwnProperty(c)&&(t[c]=n[c])};return function(t,n){l(t,n);function c(){this.constructor=t}t.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/utils/logger.js"),v=s("./src/crypt/decrypter.js"),u=s("./src/task-loop.js"),f=s("./src/utils/buffer-helper.js"),m=s("./src/controller/fragment-finders.js"),S=s("./src/controller/fragment-tracker.js"),i=window.performance;h.SubtitleStreamControllerState={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"};var p=h.SubtitleStreamControllerState,y=500,o=function(l){A(t,l);function t(n,c){var b=l.call(this,n,_.default.MEDIA_ATTACHED,_.default.MEDIA_DETACHING,_.default.ERROR,_.default.KEY_LOADED,_.default.FRAG_LOADED,_.default.SUBTITLE_TRACKS_UPDATED,_.default.SUBTITLE_TRACK_SWITCH,_.default.SUBTITLE_TRACK_LOADED,_.default.SUBTITLE_FRAG_PROCESSED)||this;return b.fragmentTracker=c,b.config=n.config,b.state=p.STOPPED,b.tracks=[],b.tracksBuffered=[],b.currentTrackId=-1,b.decrypter=new v.default(n,n.config),b}return t.prototype.onHandlerDestroyed=function(){this.fragmentTracker=null,this.state=p.STOPPED,l.prototype.onHandlerDestroyed.call(this)},t.prototype.onSubtitleFragProcessed=function(n){if(this.state=p.IDLE,!!n.success){var c=this.tracksBuffered[this.currentTrackId],b=n.frag;if(this.fragPrevious=b,!!c){for(var x,a=0;a<c.length;a++)if(b.start>=c[a].start&&b.start<=c[a].end){x=c[a];break}x?x.end=b.start+b.duration:c.push({start:b.start,end:b.start+b.duration})}}},t.prototype.onMediaAttached=function(n){this.media=n.media,this.state=p.IDLE},t.prototype.onMediaDetaching=function(){this.media=null,this.state=p.STOPPED},t.prototype.onError=function(n){var c=n.frag;!c||c.type!=="subtitle"||(this.state=p.IDLE)},t.prototype.onSubtitleTracksUpdated=function(n){var c=this;g.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=n.subtitleTracks,this.tracks.forEach(function(b){c.tracksBuffered[b.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(n){if(this.currentTrackId=n.id,!this.tracks||this.currentTrackId===-1){this.clearInterval();return}var c=this.tracks[this.currentTrackId];c&&c.details&&this.setInterval(y)},t.prototype.onSubtitleTrackLoaded=function(n){var c=n.id,b=n.details;if(!this.tracks){g.logger.warn("Can not update subtitle details, no tracks found");return}this.tracks[c]&&(g.logger.log("Updating subtitle track details"),this.tracks[c].details=b),this.setInterval(y)},t.prototype.onKeyLoaded=function(){this.state===p.KEY_LOADING&&(this.state=p.IDLE)},t.prototype.onFragLoaded=function(n){var c=this.fragCurrent,b=n.frag.decryptdata,x=n.frag,a=this.hls;if(this.state===p.FRAG_LOADING&&c&&n.frag.type==="subtitle"&&c.sn===n.frag.sn&&n.payload.byteLength>0&&b&&b.key&&b.method==="AES-128"){var d=i.now();this.decrypter.decrypt(n.payload,b.key.buffer,b.iv.buffer,function(C){var T=i.now();a.trigger(_.default.FRAG_DECRYPTED,{frag:x,payload:C,stats:{tstart:d,tdecrypt:T}})})}},t.prototype.doTick=function(){if(!this.media){this.state=p.IDLE;return}switch(this.state){case p.IDLE:var n=this.tracks,c=this.currentTrackId;if(!n||!n[c]||!n[c].details)break;var b=n[c].details,x=this.config,a=x.maxBufferHole,d=Math.min(x.maxBufferLength,x.maxMaxBufferLength),C=x.maxFragLookUpTolerance,T=f.BufferHelper.bufferedInfo(this._getBuffered(),this.media.currentTime,a),L=T.end,R=T.len,O=b.fragments,j=O.length,D=O[j-1].start+O[j-1].duration,w=void 0;R<d&&L<D?w=m.findFragmentByPTS(this.fragPrevious,O,L,C):b.hasProgramDateTime&&this.fragPrevious&&(w=m.findFragmentByPDT(O,this.fragPrevious.endProgramDateTime,C)),w&&w.encrypted?(g.logger.log("Loading key for "+w.sn),this.state=p.KEY_LOADING,this.hls.trigger(_.default.KEY_LOADING,{frag:w})):w&&this.fragmentTracker.getState(w)===S.FragmentState.NOT_LOADED&&(w.trackId=c,this.fragCurrent=w,this.state=p.FRAG_LOADING,this.hls.trigger(_.default.FRAG_LOADING,{frag:w}))}},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t}(u.default);h.SubtitleStreamController=o},"./src/controller/subtitle-track-controller.js":function(r,h,s){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var p in i)i.hasOwnProperty(p)&&(S[p]=i[p])};return function(S,i){m(S,i);function p(){this.constructor=S}S.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/event-handler.js"),v=s("./src/utils/logger.js");function u(m){for(var S=[],i=0;i<m.length;i++)m[i].kind==="subtitles"&&S.push(m[i]);return S}var f=function(m){A(S,m);function S(i){var p=m.call(this,i,_.default.MEDIA_ATTACHED,_.default.MEDIA_DETACHING,_.default.MANIFEST_LOADING,_.default.MANIFEST_LOADED,_.default.SUBTITLE_TRACK_LOADED)||this;return p.tracks=[],p.trackId=-1,p.media=null,p.subtitleDisplay=!0,p}return S.prototype._onTextTracksChanged=function(){if(!!this.media){for(var i=-1,p=u(this.media.textTracks),y=0;y<p.length;y++)if(p[y].mode==="hidden")i=y;else if(p[y].mode==="showing"){i=y;break}this.subtitleTrack=i}},S.prototype.destroy=function(){g.default.prototype.destroy.call(this)},S.prototype.onMediaAttached=function(i){var p=this;this.media=i.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){p.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},S.prototype.onMediaDetaching=function(){!this.media||(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},S.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},S.prototype.onManifestLoaded=function(i){var p=this,y=i.subtitles||[];this.tracks=y,this.trackId=-1,this.hls.trigger(_.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:y}),y.forEach(function(o){o.default&&(p.media?p.subtitleTrack=o.id:p.queuedDefaultTrack=o.id)})},S.prototype.onTick=function(){var i=this.trackId,p=this.tracks[i];if(!!p){var y=p.details;(!y||y.live)&&(v.logger.log("(re)loading playlist for subtitle track "+i),this.hls.trigger(_.default.SUBTITLE_TRACK_LOADING,{url:p.url,id:i}))}},S.prototype.onSubtitleTrackLoaded=function(i){var p=this;i.id<this.tracks.length&&(v.logger.log("subtitle track "+i.id+" loaded"),this.tracks[i.id].details=i.details,i.details.live&&!this.timer&&(this.timer=setInterval(function(){p.onTick()},1e3*i.details.targetduration,this)),!i.details.live&&this.timer&&this._stopTimer())},Object.defineProperty(S.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(i){this.trackId!==i&&(this._toggleTrackModes(i),this.setSubtitleTrackInternal(i))},enumerable:!0,configurable:!0}),S.prototype.setSubtitleTrackInternal=function(i){var p=this,y=p.hls,o=p.tracks;if(!(typeof i!="number"||i<-1||i>=o.length)&&(this._stopTimer(),this.trackId=i,v.logger.log("switching to subtitle track "+i),y.trigger(_.default.SUBTITLE_TRACK_SWITCH,{id:i}),i!==-1)){var l=o[i],t=l.details;(!t||t.live)&&(v.logger.log("(re)loading playlist for subtitle track "+i),y.trigger(_.default.SUBTITLE_TRACK_LOADING,{url:l.url,id:i}))}},S.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},S.prototype._toggleTrackModes=function(i){var p=this,y=p.media,o=p.subtitleDisplay,l=p.trackId;if(!!y){var t=u(y.textTracks);if(i===-1)[].slice.call(t).forEach(function(b){b.mode="disabled"});else{var n=t[l];n&&(n.mode="disabled")}var c=t[i];c&&(c.mode=o?"showing":"hidden")}},S}(g.default);h.default=f},"./src/controller/timeline-controller.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var c in n)n.hasOwnProperty(c)&&(t[c]=n[c])};return function(t,n){l(t,n);function c(){this.constructor=t}t.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=s("./src/utils/cea-608-parser.js"),f=s("./src/utils/output-filter.js"),m=s("./src/utils/webvtt-parser.js"),S=s("./src/utils/logger.js"),i=s("./src/utils/texttrack-utils.js");function p(l,t){return l&&l.label===t.name&&!(l.textTrack1||l.textTrack2)}function y(l,t,n,c){return Math.min(t,c)-Math.max(l,n)}var o=function(l){_(t,l);function t(n){var c=l.call(this,n,g.default.MEDIA_ATTACHING,g.default.MEDIA_DETACHING,g.default.FRAG_PARSING_USERDATA,g.default.FRAG_DECRYPTED,g.default.MANIFEST_LOADING,g.default.MANIFEST_LOADED,g.default.FRAG_LOADED,g.default.LEVEL_SWITCHING,g.default.INIT_PTS_FOUND)||this;if(c.hls=n,c.config=n.config,c.enabled=!0,c.Cues=n.config.cueHandler,c.textTracks=[],c.tracks=[],c.unparsedVttFrags=[],c.initPTS=[],c.cueRanges=[],c.captionsTracks={},c.captionsProperties={textTrack1:{label:c.config.captionsTextTrack1Label,languageCode:c.config.captionsTextTrack1LanguageCode},textTrack2:{label:c.config.captionsTextTrack2Label,languageCode:c.config.captionsTextTrack2LanguageCode}},c.config.enableCEA708Captions){var b=new f.default(c,"textTrack1"),x=new f.default(c,"textTrack2");c.cea608Parser=new u.default(0,b,x)}return c}return t.prototype.addCues=function(n,c,b,x){for(var a=this.cueRanges,d=!1,C=a.length;C--;){var T=a[C],L=y(T[0],T[1],c,b);if(L>=0&&(T[0]=Math.min(T[0],c),T[1]=Math.max(T[1],b),d=!0,L/(b-c)>.5))return}d||a.push([c,b]),this.Cues.newCue(this.captionsTracks[n],c,b,x)},t.prototype.onInitPtsFound=function(n){var c=this;if(n.id==="main"&&(this.initPTS[n.frag.cc]=n.initPTS),this.unparsedVttFrags.length){var b=this.unparsedVttFrags;this.unparsedVttFrags=[],b.forEach(function(x){c.onFragLoaded(x)})}},t.prototype.getExistingTrack=function(n){var c=this.media;if(c)for(var b=0;b<c.textTracks.length;b++){var x=c.textTracks[b];if(x[n])return x}return null},t.prototype.createCaptionsTrack=function(n){var c=this.captionsProperties[n],b=c.label,x=c.languageCode,a=this.captionsTracks;if(!a[n]){var d=this.getExistingTrack(n);if(d)a[n]=d,i.clearCurrentCues(a[n]),i.sendAddTrackEvent(a[n],this.media);else{var C=this.createTextTrack("captions",b,x);C&&(C[n]=!0,a[n]=C)}}},t.prototype.createTextTrack=function(n,c,b){var x=this.media;if(x)return x.addTextTrack(n,c,b)},t.prototype.destroy=function(){v.default.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(n){this.media=n.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){var n=this.captionsTracks;Object.keys(n).forEach(function(c){i.clearCurrentCues(n[c]),delete n[c]})},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},t.prototype._cleanTracks=function(){var n=this.media;if(n){var c=n.textTracks;if(c)for(var b=0;b<c.length;b++)i.clearCurrentCues(c[b])}},t.prototype.onManifestLoaded=function(n){var c=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=n.subtitles||[];var b=this.media?this.media.textTracks:[];this.tracks.forEach(function(x,a){var d;if(a<b.length){var C=[].slice.call(b).find(function(T){return p(T,x)});C&&(d=C)}d||(d=c.createTextTrack("subtitles",x.name,x.lang)),x.default?d.mode=c.hls.subtitleDisplay?"showing":"hidden":d.mode="disabled",c.textTracks.push(d)})}},t.prototype.onLevelSwitching=function(){this.enabled=this.hls.currentLevel.closedCaptions!=="NONE"},t.prototype.onFragLoaded=function(n){var c=n.frag,b=n.payload;if(c.type==="main"){var x=c.sn;if(x!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=x}else if(c.type==="subtitle")if(b.byteLength){if(!A.isFinite(this.initPTS[c.cc])){this.unparsedVttFrags.push(n),this.initPTS.length&&this.hls.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c});return}var d=c.decryptdata;(d==null||d.key==null||d.method!=="AES-128")&&this._parseVTTs(c,b)}else this.hls.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c})},t.prototype._parseVTTs=function(n,c){var b=this.vttCCs;b[n.cc]||(b[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc);var x=this.textTracks,a=this.hls;m.default.parse(c,this.initPTS[n.cc],b,n.cc,function(d){var C=x[n.trackId];if(C.mode==="disabled"){a.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n});return}d.forEach(function(T){if(!C.cues.getCueById(T.id))try{C.addCue(T)}catch{var L=new window.TextTrackCue(T.startTime,T.endTime,T.text);L.id=T.id,C.addCue(L)}}),a.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(d){S.logger.log("Failed to parse VTT cue: "+d),a.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})})},t.prototype.onFragDecrypted=function(n){var c=n.payload,b=n.frag;if(b.type==="subtitle"){if(!A.isFinite(this.initPTS[b.cc])){this.unparsedVttFrags.push(n);return}this._parseVTTs(b,c)}},t.prototype.onFragParsingUserdata=function(n){if(this.enabled&&this.config.enableCEA708Captions)for(var c=0;c<n.samples.length;c++){var b=this.extractCea608Data(n.samples[c].bytes);this.cea608Parser.addData(n.samples[c].pts,b)}},t.prototype.extractCea608Data=function(n){for(var c=n[0]&31,b=2,x,a,d,C,T,L=[],R=0;R<c;R++)x=n[b++],a=127&n[b++],d=127&n[b++],C=(4&x)!==0,T=3&x,!(a===0&&d===0)&&C&&T===0&&(L.push(a),L.push(d));return L},t}(v.default);h.default=o}).call(this,s("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(g,v){this.subtle=g,this.aesIV=v}return _.prototype.decrypt=function(g,v){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},v,g)},_}();h.default=A},"./src/crypt/aes-decryptor.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});function A(g){var v=g.byteLength,u=v&&new DataView(g).getUint8(v-1);return u?g.slice(0,v-u):g}h.removePadding=A;var _=function(){function g(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return g.prototype.uint8ArrayToUint32Array_=function(v){for(var u=new DataView(v),f=new Uint32Array(4),m=0;m<4;m++)f[m]=u.getUint32(m*4);return f},g.prototype.initTable=function(){var v=this.sBox,u=this.invSBox,f=this.subMix,m=f[0],S=f[1],i=f[2],p=f[3],y=this.invSubMix,o=y[0],l=y[1],t=y[2],n=y[3],c=new Uint32Array(256),b=0,x=0,a=0;for(a=0;a<256;a++)a<128?c[a]=a<<1:c[a]=a<<1^283;for(a=0;a<256;a++){var d=x^x<<1^x<<2^x<<3^x<<4;d=d>>>8^d&255^99,v[b]=d,u[d]=b;var C=c[b],T=c[C],L=c[T],R=c[d]*257^d*16843008;m[b]=R<<24|R>>>8,S[b]=R<<16|R>>>16,i[b]=R<<8|R>>>24,p[b]=R,R=L*16843009^T*65537^C*257^b*16843008,o[d]=R<<24|R>>>8,l[d]=R<<16|R>>>16,t[d]=R<<8|R>>>24,n[d]=R,b?(b=C^c[c[c[L^C]]],x^=c[c[x]]):b=x=1}},g.prototype.expandKey=function(v){for(var u=this.uint8ArrayToUint32Array_(v),f=!0,m=0;m<u.length&&f;)f=u[m]===this.key[m],m++;if(!f){this.key=u;var S=this.keySize=u.length;if(S!==4&&S!==6&&S!==8)throw new Error("Invalid aes key size="+S);var i=this.ksRows=(S+6+1)*4,p,y,o=this.keySchedule=new Uint32Array(i),l=this.invKeySchedule=new Uint32Array(i),t=this.sBox,n=this.rcon,c=this.invSubMix,b=c[0],x=c[1],a=c[2],d=c[3],C,T;for(p=0;p<i;p++){if(p<S){C=o[p]=u[p];continue}T=C,p%S===0?(T=T<<8|T>>>24,T=t[T>>>24]<<24|t[T>>>16&255]<<16|t[T>>>8&255]<<8|t[T&255],T^=n[p/S|0]<<24):S>6&&p%S===4&&(T=t[T>>>24]<<24|t[T>>>16&255]<<16|t[T>>>8&255]<<8|t[T&255]),o[p]=C=(o[p-S]^T)>>>0}for(y=0;y<i;y++)p=i-y,y&3?T=o[p]:T=o[p-4],y<4||p<=4?l[y]=T:l[y]=b[t[T>>>24]]^x[t[T>>>16&255]]^a[t[T>>>8&255]]^d[t[T&255]],l[y]=l[y]>>>0}},g.prototype.networkToHostOrderSwap=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},g.prototype.decrypt=function(v,u,f,m){for(var S=this.keySize+6,i=this.invKeySchedule,p=this.invSBox,y=this.invSubMix,o=y[0],l=y[1],t=y[2],n=y[3],c=this.uint8ArrayToUint32Array_(f),b=c[0],x=c[1],a=c[2],d=c[3],C=new Int32Array(v),T=new Int32Array(C.length),L,R,O,j,D,w,F,B,M,N,I,X,$,ee,K=this.networkToHostOrderSwap;u<C.length;){for(M=K(C[u]),N=K(C[u+1]),I=K(C[u+2]),X=K(C[u+3]),D=M^i[0],w=X^i[1],F=I^i[2],B=N^i[3],$=4,ee=1;ee<S;ee++)L=o[D>>>24]^l[w>>16&255]^t[F>>8&255]^n[B&255]^i[$],R=o[w>>>24]^l[F>>16&255]^t[B>>8&255]^n[D&255]^i[$+1],O=o[F>>>24]^l[B>>16&255]^t[D>>8&255]^n[w&255]^i[$+2],j=o[B>>>24]^l[D>>16&255]^t[w>>8&255]^n[F&255]^i[$+3],D=L,w=R,F=O,B=j,$=$+4;L=p[D>>>24]<<24^p[w>>16&255]<<16^p[F>>8&255]<<8^p[B&255]^i[$],R=p[w>>>24]<<24^p[F>>16&255]<<16^p[B>>8&255]<<8^p[D&255]^i[$+1],O=p[F>>>24]<<24^p[B>>16&255]<<16^p[D>>8&255]<<8^p[w&255]^i[$+2],j=p[B>>>24]<<24^p[D>>16&255]<<16^p[w>>8&255]<<8^p[F&255]^i[$+3],$=$+3,T[u]=K(L^b),T[u+1]=K(j^x),T[u+2]=K(O^a),T[u+3]=K(R^d),b=M,x=N,a=I,d=X,u=u+4}return m?A(T.buffer):T.buffer},g.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},g}();h.default=_},"./src/crypt/decrypter.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/crypt/aes-crypto.js"),_=s("./src/crypt/fast-aes-key.js"),g=s("./src/crypt/aes-decryptor.js"),v=s("./src/errors.js"),u=s("./src/utils/logger.js"),f=s("./src/events.js"),m=s("./src/utils/get-self-scope.js"),S=m.getSelfScope(),i=function(){function p(y,o,l){var t=(l===void 0?{}:l).removePKCS7Padding,n=t===void 0?!0:t;if(this.logEnabled=!0,this.observer=y,this.config=o,this.removePKCS7Padding=n,n)try{var c=S.crypto;c&&(this.subtle=c.subtle||c.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}return p.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},p.prototype.decrypt=function(y,o,l,t){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(u.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new g.default),c.expandKey(o),t(c.decrypt(y,0,l,this.removePKCS7Padding))}else{this.logEnabled&&(u.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var b=this.subtle;this.key!==o&&(this.key=o,this.fastAesKey=new _.default(b,o)),this.fastAesKey.expandKey().then(function(x){var a=new A.default(b,l);a.decrypt(y,x).catch(function(d){n.onWebCryptoError(d,y,o,l,t)}).then(function(d){t(d)})}).catch(function(x){n.onWebCryptoError(x,y,o,l,t)})}},p.prototype.onWebCryptoError=function(y,o,l,t,n){this.config.enableSoftwareAES?(u.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(o,l,t,n)):(u.logger.error("decrypting error : "+y.message),this.observer.trigger(f.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:y.message}))},p.prototype.destroy=function(){var y=this.decryptor;y&&(y.destroy(),this.decryptor=void 0)},p}();h.default=i},"./src/crypt/fast-aes-key.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(g,v){this.subtle=g,this.key=v}return _.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},_}();h.default=A},"./src/demux/aacdemuxer.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/demux/adts.js"),g=s("./src/utils/logger.js"),v=s("./src/demux/id3.js"),u=function(){function f(m,S,i){this.observer=m,this.config=i,this.remuxer=S}return f.prototype.resetInitSegment=function(m,S,i,p){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:S,duration:p,inputTimeScale:9e4}},f.prototype.resetTimeStamp=function(){},f.probe=function(m){if(!m)return!1;for(var S=v.default.getID3Data(m,0)||[],i=S.length,p=m.length;i<p;i++)if(_.probe(m,i))return g.logger.log("ADTS sync word found !"),!0;return!1},f.prototype.append=function(m,S,i,p){for(var y=this._audioTrack,o=v.default.getID3Data(m,0)||[],l=v.default.getTimeStamp(o),t=A.isFinite(l)?l*90:S*9e4,n=0,c=t,b=m.length,x=o.length,a=[{pts:c,dts:c,data:o}];x<b-1;)if(_.isHeader(m,x)&&x+5<b){_.initTrackConfig(y,this.observer,m,x,y.manifestCodec);var d=_.appendFrame(y,m,x,t,n);if(d)x+=d.length,c=d.sample.pts,n++;else{g.logger.log("Unable to parse AAC frame");break}}else v.default.isHeader(m,x)?(o=v.default.getID3Data(m,x),a.push({pts:c,dts:c,data:o}),x+=o.length):x++;this.remuxer.remux(y,{samples:[]},{samples:a,inputTimeScale:9e4},{samples:[]},S,i,p)},f.prototype.destroy=function(){},f}();h.default=u}).call(this,s("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/logger.js"),_=s("./src/errors.js"),g=s("./src/events.js");function v(t,n,c,b){var x,a,d,C,T,L=navigator.userAgent.toLowerCase(),R=b,O=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(x=((n[c+2]&192)>>>6)+1,a=(n[c+2]&60)>>>2,a>O.length-1){t.trigger(g.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a});return}return C=(n[c+2]&1)<<2,C|=(n[c+3]&192)>>>6,A.logger.log("manifest codec:"+b+",ADTS data:type:"+x+",sampleingIndex:"+a+"["+O[a]+"Hz],channelConfig:"+C),/firefox/i.test(L)?a>=6?(x=5,T=new Array(4),d=a-3):(x=2,T=new Array(2),d=a):L.indexOf("android")!==-1?(x=2,T=new Array(2),d=a):(x=5,T=new Array(4),b&&(b.indexOf("mp4a.40.29")!==-1||b.indexOf("mp4a.40.5")!==-1)||!b&&a>=6?d=a-3:((b&&b.indexOf("mp4a.40.2")!==-1&&(a>=6&&C===1||/vivaldi/i.test(L))||!b&&C===1)&&(x=2,T=new Array(2)),d=a)),T[0]=x<<3,T[0]|=(a&14)>>1,T[1]|=(a&1)<<7,T[1]|=C<<3,x===5&&(T[1]|=(d&14)>>1,T[2]=(d&1)<<7,T[2]|=2<<2,T[3]=0),{config:T,samplerate:O[a],channelCount:C,codec:"mp4a.40."+x,manifestCodec:R}}h.getAudioConfig=v;function u(t,n){return t[n]===255&&(t[n+1]&246)===240}h.isHeaderPattern=u;function f(t,n){return t[n+1]&1?7:9}h.getHeaderLength=f;function m(t,n){return(t[n+3]&3)<<11|t[n+4]<<3|(t[n+5]&224)>>>5}h.getFullFrameLength=m;function S(t,n){return!!(n+1<t.length&&u(t,n))}h.isHeader=S;function i(t,n){if(n+1<t.length&&u(t,n)){var c=f(t,n),b=c;n+5<t.length&&(b=m(t,n));var x=n+b;if(x===t.length||x+1<t.length&&u(t,x))return!0}return!1}h.probe=i;function p(t,n,c,b,x){if(!t.samplerate){var a=v(n,c,b,x);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,A.logger.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}h.initTrackConfig=p;function y(t){return 1024*9e4/t}h.getFrameDuration=y;function o(t,n,c,b,x){var a,d,C,T=t.length;if(a=f(t,n),d=m(t,n),d-=a,d>0&&n+a+d<=T)return C=c+b*x,{headerLength:a,frameLength:d,stamp:C}}h.parseFrameHeader=o;function l(t,n,c,b,x){var a=y(t.samplerate),d=o(n,c,b,x,a);if(d){var C=d.stamp,T=d.headerLength,L=d.frameLength,R={unit:n.subarray(c+T,c+T+L),pts:C,dts:C};return t.samples.push(R),t.len+=L,{sample:R,length:L+T}}}h.appendFrame=l},"./src/demux/demuxer-inline.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/events.js"),_=s("./src/errors.js"),g=s("./src/crypt/decrypter.js"),v=s("./src/demux/aacdemuxer.js"),u=s("./src/demux/mp4demuxer.js"),f=s("./src/demux/tsdemuxer.js"),m=s("./src/demux/mp3demuxer.js"),S=s("./src/remux/mp4-remuxer.js"),i=s("./src/remux/passthrough-remuxer.js"),p=s("./src/utils/get-self-scope.js"),y=s("./src/utils/logger.js"),o=p.getSelfScope(),l;try{l=o.performance.now.bind(o.performance)}catch{y.logger.debug("Unable to use Performance API on this environment"),l=o.Date.now}var t=function(){function n(c,b,x,a){this.observer=c,this.typeSupported=b,this.config=x,this.vendor=a}return n.prototype.destroy=function(){var c=this.demuxer;c&&c.destroy()},n.prototype.push=function(c,b,x,a,d,C,T,L,R,O,j,D){var w=this;if(c.byteLength>0&&b!=null&&b.key!=null&&b.method==="AES-128"){var F=this.decrypter;F==null&&(F=this.decrypter=new g.default(this.observer,this.config));var B=l();F.decrypt(c,b.key.buffer,b.iv.buffer,function(M){var N=l();w.observer.trigger(A.default.FRAG_DECRYPTED,{stats:{tstart:B,tdecrypt:N}}),w.pushDecrypted(new Uint8Array(M),b,new Uint8Array(x),a,d,C,T,L,R,O,j,D)})}else this.pushDecrypted(new Uint8Array(c),b,new Uint8Array(x),a,d,C,T,L,R,O,j,D)},n.prototype.pushDecrypted=function(c,b,x,a,d,C,T,L,R,O,j,D){var w=this.demuxer;if(!w||(T||L)&&!this.probe(c)){for(var F=this.observer,B=this.typeSupported,M=this.config,N=[{demux:f.default,remux:S.default},{demux:u.default,remux:i.default},{demux:v.default,remux:S.default},{demux:m.default,remux:S.default}],I=0,X=N.length;I<X;I++){var $=N[I],ee=$.demux.probe;if(ee(c)){var K=this.remuxer=new $.remux(F,M,B,this.vendor);w=new $.demux(F,K,M,B),this.probe=ee;break}}if(!w){F.trigger(A.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}this.demuxer=w}var J=this.remuxer;(T||L)&&(w.resetInitSegment(x,a,d,O),J.resetInitSegment()),T&&(w.resetTimeStamp(D),J.resetTimeStamp(D)),typeof w.setDecryptData=="function"&&w.setDecryptData(b),w.append(c,C,R,j)},n}();h.default=t},"./src/demux/demuxer-worker.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/demux/demuxer-inline.js"),_=s("./src/events.js"),g=s("./src/utils/logger.js"),v=s("./node_modules/node-libs-browser/node_modules/events/events.js"),u=function(f){var m=new v.EventEmitter;m.trigger=function(p){for(var y=[],o=1;o<arguments.length;o++)y[o-1]=arguments[o];m.emit.apply(m,[p,p].concat(y))},m.off=function(p){for(var y=[],o=1;o<arguments.length;o++)y[o-1]=arguments[o];m.removeListener.apply(m,[p].concat(y))};var S=function(i,p){f.postMessage({event:i,data:p})};f.addEventListener("message",function(i){var p=i.data;switch(p.cmd){case"init":var y=JSON.parse(p.config);f.demuxer=new A.default(m,p.typeSupported,y,p.vendor),g.enableLogs(y.debug),S("init",null);break;case"demux":f.demuxer.push(p.data,p.decryptdata,p.initSegment,p.audioCodec,p.videoCodec,p.timeOffset,p.discontinuity,p.trackSwitch,p.contiguous,p.duration,p.accurateTimeOffset,p.defaultInitPTS);break}}),m.on(_.default.FRAG_DECRYPTED,S),m.on(_.default.FRAG_PARSING_INIT_SEGMENT,S),m.on(_.default.FRAG_PARSED,S),m.on(_.default.ERROR,S),m.on(_.default.FRAG_PARSING_METADATA,S),m.on(_.default.FRAG_PARSING_USERDATA,S),m.on(_.default.INIT_PTS_FOUND,S),m.on(_.default.FRAG_PARSING_DATA,function(i,p){var y=[],o={event:i,data:p};p.data1&&(o.data1=p.data1.buffer,y.push(p.data1.buffer),delete p.data1),p.data2&&(o.data2=p.data2.buffer,y.push(p.data2.buffer),delete p.data2),f.postMessage(o,y)})};h.default=u},"./src/demux/demuxer.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./node_modules/webworkify-webpack/index.js"),g=s("./src/events.js"),v=s("./src/demux/demuxer-inline.js"),u=s("./src/utils/logger.js"),f=s("./src/errors.js"),m=s("./src/utils/mediasource-helper.js"),S=s("./src/utils/get-self-scope.js"),i=s("./src/observer.js"),p=S.getSelfScope(),y=m.getMediaSource(),o=function(){function l(t,n){var c=this;this.hls=t,this.id=n;var b=this.observer=new i.Observer,x=t.config,a=function(L,R){R=R||{},R.frag=c.frag,R.id=c.id,t.trigger(L,R)};b.on(g.default.FRAG_DECRYPTED,a),b.on(g.default.FRAG_PARSING_INIT_SEGMENT,a),b.on(g.default.FRAG_PARSING_DATA,a),b.on(g.default.FRAG_PARSED,a),b.on(g.default.ERROR,a),b.on(g.default.FRAG_PARSING_METADATA,a),b.on(g.default.FRAG_PARSING_USERDATA,a),b.on(g.default.INIT_PTS_FOUND,a);var d={mp4:y.isTypeSupported("video/mp4"),mpeg:y.isTypeSupported("audio/mpeg"),mp3:y.isTypeSupported('audio/mp4; codecs="mp3"')},C=navigator.vendor;if(x.enableWorker&&typeof Worker<"u"){u.logger.log("demuxing in webworker");var T=void 0;try{T=this.w=_("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),T.addEventListener("message",this.onwmsg),T.onerror=function(L){t.trigger(g.default.ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:L.message+" ("+L.filename+":"+L.lineno+")"}})},T.postMessage({cmd:"init",typeSupported:d,vendor:C,id:n,config:JSON.stringify(x)})}catch(L){u.logger.warn("Error in worker:",L),u.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),T&&p.URL.revokeObjectURL(T.objectURL),this.demuxer=new v.default(b,d,x,C),this.w=void 0}}else this.demuxer=new v.default(b,d,x,C)}return l.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var n=this.demuxer;n&&(n.destroy(),this.demuxer=null)}var c=this.observer;c&&(c.removeAllListeners(),this.observer=null)},l.prototype.push=function(t,n,c,b,x,a,d,C){var T=this.w,L=A.isFinite(x.startPTS)?x.startPTS:x.start,R=x.decryptdata,O=this.frag,j=!(O&&x.cc===O.cc),D=!(O&&x.level===O.level),w=O&&x.sn===O.sn+1,F=!D&&w;if(j&&u.logger.log(this.id+":discontinuity detected"),D&&u.logger.log(this.id+":switch detected"),this.frag=x,T)T.postMessage({cmd:"demux",data:t,decryptdata:R,initSegment:n,audioCodec:c,videoCodec:b,timeOffset:L,discontinuity:j,trackSwitch:D,contiguous:F,duration:a,accurateTimeOffset:d,defaultInitPTS:C},t instanceof ArrayBuffer?[t]:[]);else{var B=this.demuxer;B&&B.push(t,R,n,c,b,L,j,D,F,a,d,C)}},l.prototype.onWorkerMessage=function(t){var n=t.data,c=this.hls;switch(n.event){case"init":p.URL.revokeObjectURL(this.w.objectURL);break;case g.default.FRAG_PARSING_DATA:n.data.data1=new Uint8Array(n.data1),n.data2&&(n.data.data2=new Uint8Array(n.data2));default:n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,c.trigger(n.event,n.data);break}},l}();h.default=o}).call(this,s("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/logger.js"),_=function(){function g(v){this.data=v,this.bytesAvailable=v.byteLength,this.word=0,this.bitsAvailable=0}return g.prototype.loadWord=function(){var v=this.data,u=this.bytesAvailable,f=v.byteLength-u,m=new Uint8Array(4),S=Math.min(4,u);if(S===0)throw new Error("no bytes available");m.set(v.subarray(f,f+S)),this.word=new DataView(m.buffer).getUint32(0),this.bitsAvailable=S*8,this.bytesAvailable-=S},g.prototype.skipBits=function(v){var u;this.bitsAvailable>v?(this.word<<=v,this.bitsAvailable-=v):(v-=this.bitsAvailable,u=v>>3,v-=u>>3,this.bytesAvailable-=u,this.loadWord(),this.word<<=v,this.bitsAvailable-=v)},g.prototype.readBits=function(v){var u=Math.min(this.bitsAvailable,v),f=this.word>>>32-u;return v>32&&A.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=u,this.bitsAvailable>0?this.word<<=u:this.bytesAvailable>0&&this.loadWord(),u=v-u,u>0&&this.bitsAvailable?f<<u|this.readBits(u):f},g.prototype.skipLZ=function(){var v;for(v=0;v<this.bitsAvailable;++v)if((this.word&2147483648>>>v)!==0)return this.word<<=v,this.bitsAvailable-=v,v;return this.loadWord(),v+this.skipLZ()},g.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},g.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},g.prototype.readUEG=function(){var v=this.skipLZ();return this.readBits(v+1)-1},g.prototype.readEG=function(){var v=this.readUEG();return 1&v?1+v>>>1:-1*(v>>>1)},g.prototype.readBoolean=function(){return this.readBits(1)===1},g.prototype.readUByte=function(){return this.readBits(8)},g.prototype.readUShort=function(){return this.readBits(16)},g.prototype.readUInt=function(){return this.readBits(32)},g.prototype.skipScalingList=function(v){var u=8,f=8,m,S;for(m=0;m<v;m++)f!==0&&(S=this.readEG(),f=(u+S+256)%256),u=f===0?u:f},g.prototype.readSPS=function(){var v=0,u=0,f=0,m=0,S,i,p,y,o,l,t,n=this.readUByte.bind(this),c=this.readBits.bind(this),b=this.readUEG.bind(this),x=this.readBoolean.bind(this),a=this.skipBits.bind(this),d=this.skipEG.bind(this),C=this.skipUEG.bind(this),T=this.skipScalingList.bind(this);if(n(),S=n(),c(5),a(3),n(),C(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){var L=b();if(L===3&&a(1),C(),C(),a(1),x())for(l=L!==3?8:12,t=0;t<l;t++)x()&&(t<6?T(16):T(64))}C();var R=b();if(R===0)b();else if(R===1)for(a(1),d(),d(),i=b(),t=0;t<i;t++)d();C(),a(1),p=b(),y=b(),o=c(1),o===0&&a(1),a(1),x()&&(v=b(),u=b(),f=b(),m=b());var O=[1,1];if(x()&&x()){var j=n();switch(j){case 1:O=[1,1];break;case 2:O=[12,11];break;case 3:O=[10,11];break;case 4:O=[16,11];break;case 5:O=[40,33];break;case 6:O=[24,11];break;case 7:O=[20,11];break;case 8:O=[32,11];break;case 9:O=[80,33];break;case 10:O=[18,11];break;case 11:O=[15,11];break;case 12:O=[64,33];break;case 13:O=[160,99];break;case 14:O=[4,3];break;case 15:O=[3,2];break;case 16:O=[2,1];break;case 255:{O=[n()<<8|n(),n()<<8|n()];break}}}return{width:Math.ceil((p+1)*16-v*2-u*2),height:(2-o)*(y+1)*16-(o?2:4)*(f+m),pixelRatio:O}},g.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},g}();h.default=_},"./src/demux/id3.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function g(){}return g.isHeader=function(v,u){return u+10<=v.length&&v[u]===73&&v[u+1]===68&&v[u+2]===51&&v[u+3]<255&&v[u+4]<255&&v[u+6]<128&&v[u+7]<128&&v[u+8]<128&&v[u+9]<128},g.isFooter=function(v,u){return u+10<=v.length&&v[u]===51&&v[u+1]===68&&v[u+2]===73&&v[u+3]<255&&v[u+4]<255&&v[u+6]<128&&v[u+7]<128&&v[u+8]<128&&v[u+9]<128},g.getID3Data=function(v,u){for(var f=u,m=0;g.isHeader(v,u);){m+=10;var S=g._readSize(v,u+6);m+=S,g.isFooter(v,u+10)&&(m+=10),u+=m}if(m>0)return v.subarray(f,f+m)},g._readSize=function(v,u){var f=0;return f=(v[u]&127)<<21,f|=(v[u+1]&127)<<14,f|=(v[u+2]&127)<<7,f|=v[u+3]&127,f},g.getTimeStamp=function(v){for(var u=g.getID3Frames(v),f=0;f<u.length;f++){var m=u[f];if(g.isTimeStampFrame(m))return g._readTimeStamp(m)}},g.isTimeStampFrame=function(v){return v&&v.key==="PRIV"&&v.info==="com.apple.streaming.transportStreamTimestamp"},g._getFrameData=function(v){var u=String.fromCharCode(v[0],v[1],v[2],v[3]),f=g._readSize(v,4),m=10;return{type:u,size:f,data:v.subarray(m,m+f)}},g.getID3Frames=function(v){for(var u=0,f=[];g.isHeader(v,u);){var m=g._readSize(v,u+6);u+=10;for(var S=u+m;u+8<S;){var i=g._getFrameData(v.subarray(u)),p=g._decodeFrame(i);p&&f.push(p),u+=i.size+10}g.isFooter(v,u)&&(u+=10)}return f},g._decodeFrame=function(v){if(v.type==="PRIV")return g._decodePrivFrame(v);if(v.type[0]==="T")return g._decodeTextFrame(v);if(v.type[0]==="W")return g._decodeURLFrame(v)},g._readTimeStamp=function(v){if(v.data.byteLength===8){var u=new Uint8Array(v.data),f=u[3]&1,m=(u[4]<<23)+(u[5]<<15)+(u[6]<<7)+u[7];return m/=45,f&&(m+=4772185884e-2),Math.round(m)}},g._decodePrivFrame=function(v){if(!(v.size<2)){var u=g._utf8ArrayToStr(v.data,!0),f=new Uint8Array(v.data.subarray(u.length+1));return{key:v.type,info:u,data:f.buffer}}},g._decodeTextFrame=function(v){if(!(v.size<2))if(v.type==="TXXX"){var u=1,f=g._utf8ArrayToStr(v.data.subarray(u));u+=f.length+1;var m=g._utf8ArrayToStr(v.data.subarray(u));return{key:v.type,info:f,data:m}}else{var S=g._utf8ArrayToStr(v.data.subarray(1));return{key:v.type,data:S}}},g._decodeURLFrame=function(v){if(v.type==="WXXX"){if(v.size<2)return;var u=1,f=g._utf8ArrayToStr(v.data.subarray(u));u+=f.length+1;var m=g._utf8ArrayToStr(v.data.subarray(u));return{key:v.type,info:f,data:m}}else{var S=g._utf8ArrayToStr(v.data);return{key:v.type,data:S}}},g._utf8ArrayToStr=function(v,u){u===void 0&&(u=!1);for(var f=v.length,m,S,i,p="",y=0;y<f;){if(m=v[y++],m===0&&u)return p;if(m===0||m===3)continue;switch(m>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:p+=String.fromCharCode(m);break;case 12:case 13:S=v[y++],p+=String.fromCharCode((m&31)<<6|S&63);break;case 14:S=v[y++],i=v[y++],p+=String.fromCharCode((m&15)<<12|(S&63)<<6|(i&63)<<0);break}}return p},g}(),_=A._utf8ArrayToStr;h.utf8ArrayToStr=_,h.default=A},"./src/demux/mp3demuxer.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/demux/id3.js"),_=s("./src/utils/logger.js"),g=s("./src/demux/mpegaudio.js"),v=function(){function u(f,m,S){this.observer=f,this.config=S,this.remuxer=m}return u.prototype.resetInitSegment=function(f,m,S,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:m,duration:i,inputTimeScale:9e4}},u.prototype.resetTimeStamp=function(){},u.probe=function(f){var m,S,i=A.default.getID3Data(f,0);if(i&&A.default.getTimeStamp(i)!==void 0){for(m=i.length,S=Math.min(f.length-1,m+100);m<S;m++)if(g.default.probe(f,m))return _.logger.log("MPEG Audio sync word found !"),!0}return!1},u.prototype.append=function(f,m,S,i){for(var p=A.default.getID3Data(f,0),y=A.default.getTimeStamp(p),o=y?90*y:m*9e4,l=p.length,t=f.length,n=0,c=0,b=this._audioTrack,x=[{pts:o,dts:o,data:p}];l<t;)if(g.default.isHeader(f,l)){var a=g.default.appendFrame(b,f,l,o,n);if(a)l+=a.length,c=a.sample.pts,n++;else break}else A.default.isHeader(f,l)?(p=A.default.getID3Data(f,l),x.push({pts:c,dts:c,data:p}),l+=p.length):l++;this.remuxer.remux(b,{samples:[]},{samples:x,inputTimeScale:9e4},{samples:[]},m,S,i)},u.prototype.destroy=function(){},u}();h.default=v},"./src/demux/mp4demuxer.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/logger.js"),_=s("./src/events.js"),g=Math.pow(2,32)-1,v=function(){function u(f,m){this.observer=f,this.remuxer=m}return u.prototype.resetTimeStamp=function(f){this.initPTS=f},u.prototype.resetInitSegment=function(f,m,S,i){if(f&&f.byteLength){var p=this.initData=u.parseInitSegment(f);m==null&&(m="mp4a.40.5"),S==null&&(S="avc1.42e01e");var y={};p.audio&&p.video?y.audiovideo={container:"video/mp4",codec:m+","+S,initSegment:i?f:null}:(p.audio&&(y.audio={container:"audio/mp4",codec:m,initSegment:i?f:null}),p.video&&(y.video={container:"video/mp4",codec:S,initSegment:i?f:null})),this.observer.trigger(_.default.FRAG_PARSING_INIT_SEGMENT,{tracks:y})}else m&&(this.audioCodec=m),S&&(this.videoCodec=S)},u.probe=function(f){return u.findBox({data:f,start:0,end:Math.min(f.length,16384)},["moof"]).length>0},u.bin2str=function(f){return String.fromCharCode.apply(null,f)},u.readUint16=function(f,m){f.data&&(m+=f.start,f=f.data);var S=f[m]<<8|f[m+1];return S<0?65536+S:S},u.readUint32=function(f,m){f.data&&(m+=f.start,f=f.data);var S=f[m]<<24|f[m+1]<<16|f[m+2]<<8|f[m+3];return S<0?4294967296+S:S},u.writeUint32=function(f,m,S){f.data&&(m+=f.start,f=f.data),f[m]=S>>24,f[m+1]=S>>16&255,f[m+2]=S>>8&255,f[m+3]=S&255},u.findBox=function(f,m){var S=[],i,p,y,o,l,t,n;if(f.data?(t=f.start,o=f.end,f=f.data):(t=0,o=f.byteLength),!m.length)return null;for(i=t;i<o;)p=u.readUint32(f,i),y=u.bin2str(f.subarray(i+4,i+8)),n=p>1?i+p:o,y===m[0]&&(m.length===1?S.push({data:f,start:i+8,end:n}):(l=u.findBox({data:f,start:i+8,end:n},m.slice(1)),l.length&&(S=S.concat(l)))),i=n;return S},u.parseSegmentIndex=function(f){var m=u.findBox(f,["moov"])[0],S=m?m.end:null,i=0,p=u.findBox(f,["sidx"]),y;if(!p||!p[0])return null;y=[],p=p[0];var o=p.data[0];i=o===0?8:16;var l=u.readUint32(p,i);i+=4;var t=0,n=0;o===0?i+=8:i+=16,i+=2;var c=p.end+n,b=u.readUint16(p,i);i+=2;for(var x=0;x<b;x++){var a=i,d=u.readUint32(p,a);a+=4;var C=d&2147483647,T=(d&2147483648)>>>31;if(T===1){console.warn("SIDX has hierarchical references (not supported)");return}var L=u.readUint32(p,a);a+=4,y.push({referenceSize:C,subsegmentDuration:L,info:{duration:L/l,start:c,end:c+C-1}}),c+=C,a+=4,i=a}return{earliestPresentationTime:t,timescale:l,version:o,referencesCount:b,references:y,moovEndOffset:S}},u.parseInitSegment=function(f){var m=[],S=u.findBox(f,["moov","trak"]);return S.forEach(function(i){var p=u.findBox(i,["tkhd"])[0];if(p){var y=p.data[p.start],o=y===0?12:20,l=u.readUint32(p,o),t=u.findBox(i,["mdia","mdhd"])[0];if(t){y=t.data[t.start],o=y===0?12:20;var n=u.readUint32(t,o),c=u.findBox(i,["mdia","hdlr"])[0];if(c){var b=u.bin2str(c.data.subarray(c.start+8,c.start+12)),x={soun:"audio",vide:"video"}[b];if(x){var a=u.findBox(i,["mdia","minf","stbl","stsd"]);if(a.length){a=a[0];var d=u.bin2str(a.data.subarray(a.start+12,a.start+16));A.logger.log("MP4Demuxer:"+x+":"+d+" found")}m[l]={timescale:n,type:x},m[x]={timescale:n,id:l}}}}}}),m},u.getStartDTS=function(f,m){var S,i,p;return S=u.findBox(m,["moof","traf"]),i=[].concat.apply([],S.map(function(y){return u.findBox(y,["tfhd"]).map(function(o){var l,t,n;return l=u.readUint32(o,4),t=f[l].timescale||9e4,n=u.findBox(y,["tfdt"]).map(function(c){var b,x;return b=c.data[c.start],x=u.readUint32(c,4),b===1&&(x*=Math.pow(2,32),x+=u.readUint32(c,8)),x})[0],n/t})})),p=Math.min.apply(null,i),isFinite(p)?p:0},u.offsetStartDTS=function(f,m,S){u.findBox(m,["moof","traf"]).map(function(i){return u.findBox(i,["tfhd"]).map(function(p){var y=u.readUint32(p,4),o=f[y].timescale||9e4;u.findBox(i,["tfdt"]).map(function(l){var t=l.data[l.start],n=u.readUint32(l,4);if(t===0)u.writeUint32(l,4,n-S*o);else{n*=Math.pow(2,32),n+=u.readUint32(l,8),n-=S*o,n=Math.max(n,0);var c=Math.floor(n/(g+1)),b=Math.floor(n%(g+1));u.writeUint32(l,4,c),u.writeUint32(l,8,b)}})})})},u.prototype.append=function(f,m,S,i){var p=this.initData;p||(this.resetInitSegment(f,this.audioCodec,this.videoCodec,!1),p=this.initData);var y,o=this.initPTS;if(o===void 0){var l=u.getStartDTS(p,f);this.initPTS=o=l-m,this.observer.trigger(_.default.INIT_PTS_FOUND,{initPTS:o})}u.offsetStartDTS(p,f,o),y=u.getStartDTS(p,f),this.remuxer.remux(p.audio,p.video,null,null,y,S,i,f)},u.prototype.destroy=function(){},u}();h.default=v},"./src/demux/mpegaudio.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(_,g,v,u,f){if(!(v+24>g.length)){var m=this.parseHeader(g,v);if(m&&v+m.frameLength<=g.length){var S=m.samplesPerFrame*9e4/m.sampleRate,i=u+f*S,p={unit:g.subarray(v,v+m.frameLength),pts:i,dts:i};return _.config=[],_.channelCount=m.channelCount,_.samplerate=m.sampleRate,_.samples.push(p),_.len+=m.frameLength,{sample:p,length:m.frameLength}}}},parseHeader:function(_,g){var v=_[g+1]>>3&3,u=_[g+1]>>1&3,f=_[g+2]>>4&15,m=_[g+2]>>2&3,S=_[g+2]>>1&1;if(v!==1&&f!==0&&f!==15&&m!==3){var i=v===3?3-u:u===3?3:4,p=A.BitratesMap[i*14+f-1]*1e3,y=v===3?0:v===2?1:2,o=A.SamplingRateMap[y*3+m],l=_[g+3]>>6===3?1:2,t=A.SamplesCoefficients[v][u],n=A.BytesInSlot[u],c=t*8*n,b=parseInt(t*p/o+S,10)*n;return{sampleRate:o,channelCount:l,frameLength:b,samplesPerFrame:c}}},isHeaderPattern:function(_,g){return _[g]===255&&(_[g+1]&224)===224&&(_[g+1]&6)!==0},isHeader:function(_,g){return!!(g+1<_.length&&this.isHeaderPattern(_,g))},probe:function(_,g){if(g+1<_.length&&this.isHeaderPattern(_,g)){var v=4,u=this.parseHeader(_,g),f=v;u&&u.frameLength&&(f=u.frameLength);var m=g+f;if(m===_.length||m+1<_.length&&this.isHeaderPattern(_,m))return!0}return!1}};h.default=A},"./src/demux/sample-aes.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/crypt/decrypter.js"),_=function(){function g(v,u,f,m){this.decryptdata=f,this.discardEPB=m,this.decrypter=new A.default(v,u,{removePKCS7Padding:!1})}return g.prototype.decryptBuffer=function(v,u){this.decrypter.decrypt(v,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,u)},g.prototype.decryptAacSample=function(v,u,f,m){var S=v[u].unit,i=S.subarray(16,S.length-S.length%16),p=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),y=this;this.decryptBuffer(p,function(o){o=new Uint8Array(o),S.set(o,16),m||y.decryptAacSamples(v,u+1,f)})},g.prototype.decryptAacSamples=function(v,u,f){for(;;u++){if(u>=v.length){f();return}if(!(v[u].unit.length<32)){var m=this.decrypter.isSync();if(this.decryptAacSample(v,u,f,m),!m)return}}},g.prototype.getAvcEncryptedData=function(v){for(var u=Math.floor((v.length-48)/160)*16+16,f=new Int8Array(u),m=0,S=32;S<=v.length-16;S+=160,m+=16)f.set(v.subarray(S,S+16),m);return f},g.prototype.getAvcDecryptedUnit=function(v,u){u=new Uint8Array(u);for(var f=0,m=32;m<=v.length-16;m+=160,f+=16)v.set(u.subarray(f,f+16),m);return v},g.prototype.decryptAvcSample=function(v,u,f,m,S,i){var p=this.discardEPB(S.data),y=this.getAvcEncryptedData(p),o=this;this.decryptBuffer(y.buffer,function(l){S.data=o.getAvcDecryptedUnit(p,l),i||o.decryptAvcSamples(v,u,f+1,m)})},g.prototype.decryptAvcSamples=function(v,u,f,m){for(;;u++,f=0){if(u>=v.length){m();return}for(var S=v[u].units;!(f>=S.length);f++){var i=S[f];if(!(i.length<=48||i.type!==1&&i.type!==5)){var p=this.decrypter.isSync();if(this.decryptAvcSample(v,u,f,m,i,p),!p)return}}}},g}();h.default=_},"./src/demux/tsdemuxer.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/demux/adts.js"),_=s("./src/demux/mpegaudio.js"),g=s("./src/events.js"),v=s("./src/demux/exp-golomb.js"),u=s("./src/demux/sample-aes.js"),f=s("./src/utils/logger.js"),m=s("./src/errors.js"),S={video:1,audio:2,id3:3,text:4},i=function(){function p(y,o,l,t){this.observer=y,this.config=l,this.typeSupported=t,this.remuxer=o,this.sampleAes=null}return p.prototype.setDecryptData=function(y){y!=null&&y.key!=null&&y.method==="SAMPLE-AES"?this.sampleAes=new u.default(this.observer,this.config,y,this.discardEPB):this.sampleAes=null},p.probe=function(y){var o=p._syncOffset(y);return o<0?!1:(o&&f.logger.warn("MPEG2-TS detected but first sync word found @ offset "+o+", junk ahead ?"),!0)},p._syncOffset=function(y){for(var o=Math.min(1e3,y.length-564),l=0;l<o;){if(y[l]===71&&y[l+188]===71&&y[l+2*188]===71)return l;l++}return-1},p.createTrack=function(y,o){return{container:y==="video"||y==="audio"?"video/mp2t":void 0,type:y,id:S[y],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:y==="video"?0:void 0,isAAC:y==="audio"?!0:void 0,duration:y==="audio"?o:void 0}},p.prototype.resetInitSegment=function(y,o,l,t){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=p.createTrack("video",t),this._audioTrack=p.createTrack("audio",t),this._id3Track=p.createTrack("id3",t),this._txtTrack=p.createTrack("text",t),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=o,this.videoCodec=l,this._duration=t},p.prototype.resetTimeStamp=function(){},p.prototype.append=function(y,o,l,t){var n,c=y.length,b,x,a,d,C,T=!1;this.contiguous=l;var L=this.pmtParsed,R=this._avcTrack,O=this._audioTrack,j=this._id3Track,D=R.pid,w=O.pid,F=j.pid,B=this._pmtId,M=R.pesData,N=O.pesData,I=j.pesData,X=this._parsePAT,$=this._parsePMT,ee=this._parsePES,K=this._parseAVCPES.bind(this),J=this._parseAACPES.bind(this),V=this._parseMPEGPES.bind(this),W=this._parseID3PES.bind(this),Y=p._syncOffset(y);for(c-=(c+Y)%188,n=Y;n<c;n+=188)if(y[n]===71){if(b=!!(y[n+1]&64),x=((y[n+1]&31)<<8)+y[n+2],a=(y[n+3]&48)>>4,a>1){if(d=n+5+y[n+4],d===n+188)continue}else d=n+4;switch(x){case D:b&&(M&&(C=ee(M))&&C.pts!==void 0&&K(C,!1),M={data:[],size:0}),M&&(M.data.push(y.subarray(d,n+188)),M.size+=n+188-d);break;case w:b&&(N&&(C=ee(N))&&C.pts!==void 0&&(O.isAAC?J(C):V(C)),N={data:[],size:0}),N&&(N.data.push(y.subarray(d,n+188)),N.size+=n+188-d);break;case F:b&&(I&&(C=ee(I))&&C.pts!==void 0&&W(C),I={data:[],size:0}),I&&(I.data.push(y.subarray(d,n+188)),I.size+=n+188-d);break;case 0:b&&(d+=y[d]+1),B=this._pmtId=X(y,d);break;case B:b&&(d+=y[d]+1);var te=$(y,d,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);D=te.avc,D>0&&(R.pid=D),w=te.audio,w>0&&(O.pid=w,O.isAAC=te.isAAC),F=te.id3,F>0&&(j.pid=F),T&&!L&&(f.logger.log("reparse from beginning"),T=!1,n=Y-188),L=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0;break}}else this.observer.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});M&&(C=ee(M))&&C.pts!==void 0?(K(C,!0),R.pesData=null):R.pesData=M,N&&(C=ee(N))&&C.pts!==void 0?(O.isAAC?J(C):V(C),O.pesData=null):(N&&N.size&&f.logger.log("last AAC PES packet truncated,might overlap between fragments"),O.pesData=N),I&&(C=ee(I))&&C.pts!==void 0?(W(C),j.pesData=null):j.pesData=I,this.sampleAes==null?this.remuxer.remux(O,R,j,this._txtTrack,o,l,t):this.decryptAndRemux(O,R,j,this._txtTrack,o,l,t)},p.prototype.decryptAndRemux=function(y,o,l,t,n,c,b){if(y.samples&&y.isAAC){var x=this;this.sampleAes.decryptAacSamples(y.samples,0,function(){x.decryptAndRemuxAvc(y,o,l,t,n,c,b)})}else this.decryptAndRemuxAvc(y,o,l,t,n,c,b)},p.prototype.decryptAndRemuxAvc=function(y,o,l,t,n,c,b){if(o.samples){var x=this;this.sampleAes.decryptAvcSamples(o.samples,0,0,function(){x.remuxer.remux(y,o,l,t,n,c,b)})}else this.remuxer.remux(y,o,l,t,n,c,b)},p.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},p.prototype._parsePAT=function(y,o){return(y[o+10]&31)<<8|y[o+11]},p.prototype._parsePMT=function(y,o,l,t){var n,c,b,x,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=(y[o+1]&15)<<8|y[o+2],c=o+3+n-4,b=(y[o+10]&15)<<8|y[o+11],o+=12+b;o<c;){switch(x=(y[o+1]&31)<<8|y[o+2],y[o]){case 207:if(!t){f.logger.log("unkown stream type:"+y[o]);break}case 15:a.audio===-1&&(a.audio=x);break;case 21:a.id3===-1&&(a.id3=x);break;case 219:if(!t){f.logger.log("unkown stream type:"+y[o]);break}case 27:a.avc===-1&&(a.avc=x);break;case 3:case 4:l?a.audio===-1&&(a.audio=x,a.isAAC=!1):f.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:f.logger.warn("HEVC stream type found, not supported for now");break;default:f.logger.log("unkown stream type:"+y[o]);break}o+=((y[o+3]&15)<<8|y[o+4])+5}return a},p.prototype._parsePES=function(y){var o=0,l,t,n,c,b,x,a,d,C,T=y.data;if(!y||y.size===0)return null;for(;T[0].length<19&&T.length>1;){var L=new Uint8Array(T[0].length+T[1].length);L.set(T[0]),L.set(T[1],T[0].length),T[0]=L,T.splice(1,1)}if(l=T[0],n=(l[0]<<16)+(l[1]<<8)+l[2],n===1){if(c=(l[4]<<8)+l[5],c&&c>y.size-6)return null;t=l[7],t&192&&(a=(l[9]&14)*536870912+(l[10]&255)*4194304+(l[11]&254)*16384+(l[12]&255)*128+(l[13]&254)/2,a>4294967295&&(a-=8589934592),t&64?(d=(l[14]&14)*536870912+(l[15]&255)*4194304+(l[16]&254)*16384+(l[17]&255)*128+(l[18]&254)/2,d>4294967295&&(d-=8589934592),a-d>60*9e4&&(f.logger.warn(Math.round((a-d)/9e4)+"s delta between PTS and DTS, align them"),a=d)):d=a),b=l[8],C=b+9,y.size-=C,x=new Uint8Array(y.size);for(var R=0,O=T.length;R<O;R++){l=T[R];var j=l.byteLength;if(C)if(C>j){C-=j;continue}else l=l.subarray(C),j-=C,C=0;x.set(l,o),o+=j}return c&&(c-=b+3),{data:x,pts:a,dts:d,len:c}}else return null},p.prototype.pushAccesUnit=function(y,o){if(y.units.length&&y.frame){var l=o.samples,t=l.length;!this.config.forceKeyFrameOnDiscontinuity||y.key===!0||o.sps&&(t||this.contiguous)?(y.id=t,l.push(y)):o.dropped++}y.debug.length&&f.logger.log(y.pts+"/"+y.dts+":"+y.debug)},p.prototype._parseAVCPES=function(y,o){var l=this,t=this._avcTrack,n=this._parseAVCNALu(y.data),c,b=this.avcSample,x,a=!1,d,C=this.pushAccesUnit.bind(this),T=function(L,R,O,j){return{key:L,pts:R,dts:O,units:[],debug:j}};y.data=null,b&&n.length&&!t.audFound&&(C(b,t),b=this.avcSample=T(!1,y.pts,y.dts,"")),n.forEach(function(L){switch(L.type){case 1:x=!0,b||(b=l.avcSample=T(!0,y.pts,y.dts,"")),b.frame=!0;var R=L.data;if(a&&R.length>4){var O=new v.default(R).readSliceType();(O===2||O===4||O===7||O===9)&&(b.key=!0)}break;case 5:x=!0,b||(b=l.avcSample=T(!0,y.pts,y.dts,"")),b.key=!0,b.frame=!0;break;case 6:x=!0,c=new v.default(l.discardEPB(L.data)),c.readUByte();for(var j=0,D=0,w=!1,F=0;!w&&c.bytesAvailable>1;){j=0;do F=c.readUByte(),j+=F;while(F===255);D=0;do F=c.readUByte(),D+=F;while(F===255);if(j===4&&c.bytesAvailable!==0){w=!0;var B=c.readUByte();if(B===181){var M=c.readUShort();if(M===49){var N=c.readUInt();if(N===1195456820){var I=c.readUByte();if(I===3){var X=c.readUByte(),$=c.readUByte(),ee=31&X,K=[X,$];for(d=0;d<ee;d++)K.push(c.readUByte()),K.push(c.readUByte()),K.push(c.readUByte());l._insertSampleInOrder(l._txtTrack.samples,{type:3,pts:y.pts,bytes:K})}}}}}else if(D<c.bytesAvailable)for(d=0;d<D;d++)c.readUByte()}break;case 7:if(x=!0,a=!0,!t.sps){c=new v.default(L.data);var J=c.readSPS();t.width=J.width,t.height=J.height,t.pixelRatio=J.pixelRatio,t.sps=[L.data],t.duration=l._duration;var V=L.data.subarray(1,4),W="avc1.";for(d=0;d<3;d++){var Y=V[d].toString(16);Y.length<2&&(Y="0"+Y),W+=Y}t.codec=W}break;case 8:x=!0,t.pps||(t.pps=[L.data]);break;case 9:x=!1,t.audFound=!0,b&&C(b,t),b=l.avcSample=T(!1,y.pts,y.dts,"");break;case 12:x=!1;break;default:x=!1,b&&(b.debug+="unknown NAL "+L.type+" ");break}if(b&&x){var te=b.units;te.push(L)}}),o&&b&&(C(b,t),this.avcSample=null)},p.prototype._insertSampleInOrder=function(y,o){var l=y.length;if(l>0){if(o.pts>=y[l-1].pts)y.push(o);else for(var t=l-1;t>=0;t--)if(o.pts<y[t].pts){y.splice(t,0,o);break}}else y.push(o)},p.prototype._getLastNalUnit=function(){var y=this.avcSample,o;if(!y||y.units.length===0){var l=this._avcTrack,t=l.samples;y=t[t.length-1]}if(y){var n=y.units;o=n[n.length-1]}return o},p.prototype._parseAVCNALu=function(y){var o=0,l=y.byteLength,t,n,c=this._avcTrack,b=c.naluState||0,x=b,a=[],d,C,T=-1,L;for(b===-1&&(T=0,L=y[0]&31,b=0,o=1);o<l;){if(t=y[o++],!b){b=t?0:1;continue}if(b===1){b=t?0:2;continue}if(!t)b=3;else if(t===1){if(T>=0)d={data:y.subarray(T,o-b-1),type:L},a.push(d);else{var R=this._getLastNalUnit();if(R&&(x&&o<=4-x&&R.state&&(R.data=R.data.subarray(0,R.data.byteLength-x)),n=o-b-1,n>0)){var O=new Uint8Array(R.data.byteLength+n);O.set(R.data,0),O.set(y.subarray(0,n),R.data.byteLength),R.data=O}}o<l?(C=y[o]&31,T=o,L=C,b=0):b=-1}else b=0}if(T>=0&&b>=0&&(d={data:y.subarray(T,l),type:L,state:b},a.push(d)),a.length===0){var R=this._getLastNalUnit();if(R){var O=new Uint8Array(R.data.byteLength+y.byteLength);O.set(R.data,0),O.set(y,R.data.byteLength),R.data=O}}return c.naluState=b,a},p.prototype.discardEPB=function(y){for(var o=y.byteLength,l=[],t=1,n,c;t<o-2;)y[t]===0&&y[t+1]===0&&y[t+2]===3?(l.push(t+2),t+=2):t++;if(l.length===0)return y;n=o-l.length,c=new Uint8Array(n);var b=0;for(t=0;t<n;b++,t++)b===l[0]&&(b++,l.shift()),c[t]=y[b];return c},p.prototype._parseAACPES=function(y){var o=this._audioTrack,l=y.data,t=y.pts,n=0,c=this.aacOverFlow,b=this.aacLastPTS,x,a,d,C,T;if(c){var L=new Uint8Array(c.byteLength+l.byteLength);L.set(c,0),L.set(l,c.byteLength),l=L}for(d=n,T=l.length;d<T-1&&!A.isHeader(l,d);d++);if(d){var R=void 0,O=void 0;if(d<T-1?(R="AAC PES did not start with ADTS header,offset:"+d,O=!1):(R="no ADTS header found in AAC PES",O=!0),f.logger.warn("parsing error:"+R),this.observer.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:O,reason:R}),O)return}if(A.initTrackConfig(o,this.observer,l,d,this.audioCodec),a=0,x=A.getFrameDuration(o.samplerate),c&&b){var j=b+x;Math.abs(j-t)>1&&(f.logger.log("AAC: align PTS for overlapping frames by "+Math.round((j-t)/90)),t=j)}for(;d<T;)if(A.isHeader(l,d)&&d+5<T){var D=A.appendFrame(o,l,d,t,a);if(D)d+=D.length,C=D.sample.pts,a++;else break}else d++;d<T?c=l.subarray(d,T):c=null,this.aacOverFlow=c,this.aacLastPTS=C},p.prototype._parseMPEGPES=function(y){for(var o=y.data,l=o.length,t=0,n=0,c=y.pts;n<l;)if(_.default.isHeader(o,n)){var b=_.default.appendFrame(this._audioTrack,o,n,c,t);if(b)n+=b.length,t++;else break}else n++},p.prototype._parseID3PES=function(y){this._id3Track.samples.push(y)},p}();h.default=i},"./src/errors.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0}),h.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},h.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/logger.js"),_=s("./src/errors.js"),g=s("./src/events.js"),v={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},u=function(){function f(m){for(var S=[],i=1;i<arguments.length;i++)S[i-1]=arguments[i];this.hls=m,this.onEvent=this.onEvent.bind(this),this.handledEvents=S,this.useGenericHandler=!0,this.registerListeners()}return f.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},f.prototype.onHandlerDestroying=function(){},f.prototype.onHandlerDestroyed=function(){},f.prototype.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},f.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(m){if(v[m])throw new Error("Forbidden event-name: "+m);this.hls.on(m,this.onEvent)},this)},f.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(m){this.hls.off(m,this.onEvent)},this)},f.prototype.onEvent=function(m,S){this.onEventGeneric(m,S)},f.prototype.onEventGeneric=function(m,S){var i=function(p,y){var o="on"+p.replace("hls","");if(typeof this[o]!="function")throw new Error("Event "+p+" has no generic handler in this "+this.constructor.name+" class (tried "+o+")");return this[o].bind(this,y)};try{i.call(this,m,S).call()}catch(p){A.logger.error("An internal error happened while handling event "+m+'. Error message: "'+p.message+'". Here is a stacktrace:',p),this.hls.trigger(g.default.ERROR,{type:_.ErrorTypes.OTHER_ERROR,details:_.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:m,err:p})}},f}();h.default=u},"./src/events.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};h.default=A},"./src/hls.js":function(r,h,s){var A=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,a){x.__proto__=a}||function(x,a){for(var d in a)a.hasOwnProperty(d)&&(x[d]=a[d])};return function(x,a){b(x,a);function d(){this.constructor=x}x.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./node_modules/url-toolkit/src/url-toolkit.js"),g=s("./src/errors.js"),v=s("./src/loader/playlist-loader.js"),u=s("./src/loader/fragment-loader.js"),f=s("./src/loader/key-loader.js"),m=s("./src/controller/fragment-tracker.js"),S=s("./src/controller/stream-controller.js"),i=s("./src/controller/level-controller.js"),p=s("./src/controller/id3-track-controller.js"),y=s("./src/is-supported.js"),o=s("./src/utils/logger.js"),l=s("./src/config.js"),t=s("./src/events.js"),n=s("./src/observer.js"),c=function(b){A(x,b);function x(a){a===void 0&&(a={});var d=b.call(this)||this,C=x.DefaultConfig;if((a.liveSyncDurationCount||a.liveMaxLatencyDurationCount)&&(a.liveSyncDuration||a.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var T in C)T in a||(a[T]=C[T]);if(a.liveMaxLatencyDurationCount!==void 0&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(a.liveMaxLatencyDuration!==void 0&&(a.liveMaxLatencyDuration<=a.liveSyncDuration||a.liveSyncDuration===void 0))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');o.enableLogs(a.debug),d.config=a,d._autoLevelCapping=-1;var L=d.abrController=new a.abrController(d),R=new a.bufferController(d),O=new a.capLevelController(d),j=new a.fpsController(d),D=new v.default(d),w=new u.default(d),F=new f.default(d),B=new p.default(d),M=d.levelController=new i.default(d),N=new m.FragmentTracker(d),I=d.streamController=new S.default(d,N),X=[M,I],$=a.audioStreamController;$&&X.push(new $(d,N)),d.networkControllers=X;var ee=[D,w,F,L,R,O,j,B,N];if($=a.audioTrackController,$){var K=new $(d);d.audioTrackController=K,ee.push(K)}if($=a.subtitleTrackController,$){var J=new $(d);d.subtitleTrackController=J,ee.push(J)}if($=a.emeController,$){var V=new $(d);d.emeController=V,ee.push(V)}return $=a.subtitleStreamController,$&&ee.push(new $(d,N)),$=a.timelineController,$&&ee.push(new $(d)),d.coreComponents=ee,d}return Object.defineProperty(x,"version",{get:function(){return"0.12.2"},enumerable:!0,configurable:!0}),x.isSupported=function(){return y.isSupported()},Object.defineProperty(x,"Events",{get:function(){return t.default},enumerable:!0,configurable:!0}),Object.defineProperty(x,"ErrorTypes",{get:function(){return g.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(x,"ErrorDetails",{get:function(){return g.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(x,"DefaultConfig",{get:function(){return x.defaultConfig?x.defaultConfig:l.hlsDefaultConfig},set:function(a){x.defaultConfig=a},enumerable:!0,configurable:!0}),x.prototype.destroy=function(){o.logger.log("destroy"),this.trigger(t.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(a){a.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},x.prototype.attachMedia=function(a){o.logger.log("attachMedia"),this.media=a,this.trigger(t.default.MEDIA_ATTACHING,{media:a})},x.prototype.detachMedia=function(){o.logger.log("detachMedia"),this.trigger(t.default.MEDIA_DETACHING),this.media=null},x.prototype.loadSource=function(a){a=_.buildAbsoluteURL(window.location.href,a,{alwaysNormalize:!0}),o.logger.log("loadSource:"+a),this.url=a,this.trigger(t.default.MANIFEST_LOADING,{url:a})},x.prototype.startLoad=function(a){a===void 0&&(a=-1),o.logger.log("startLoad("+a+")"),this.networkControllers.forEach(function(d){d.startLoad(a)})},x.prototype.stopLoad=function(){o.logger.log("stopLoad"),this.networkControllers.forEach(function(a){a.stopLoad()})},x.prototype.swapAudioCodec=function(){o.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},x.prototype.recoverMediaError=function(){o.logger.log("recoverMediaError");var a=this.media;this.detachMedia(),this.attachMedia(a)},Object.defineProperty(x.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(a){o.logger.log("set currentLevel:"+a),this.loadLevel=a,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(a){o.logger.log("set nextLevel:"+a),this.levelController.manualLevel=a,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(a){o.logger.log("set loadLevel:"+a),this.levelController.manualLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(a){this.levelController.nextLoadLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(a){o.logger.log("set firstLevel:"+a),this.levelController.firstLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(a){o.logger.log("set startLevel:"+a);var d=this;a!==-1&&(a=Math.max(a,d.minAutoLevel)),d.levelController.startLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(a){o.logger.log("set autoLevelCapping:"+a),this._autoLevelCapping=a},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"autoLevelEnabled",{get:function(){return this.levelController.manualLevel===-1},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"minAutoLevel",{get:function(){for(var a=this,d=a.levels,C=a.config.minAutoBitrate,T=d?d.length:0,L=0;L<T;L++){var R=d[L].realBitrate?Math.max(d[L].realBitrate,d[L].bitrate):d[L].bitrate;if(R>C)return L}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"maxAutoLevel",{get:function(){var a=this,d=a.levels,C=a.autoLevelCapping,T;return C===-1&&d&&d.length?T=d.length-1:T=C,T},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextAutoLevel",{get:function(){var a=this;return Math.min(Math.max(a.abrController.nextAutoLevel,a.minAutoLevel),a.maxAutoLevel)},set:function(a){var d=this;d.abrController.nextAutoLevel=Math.max(d.minAutoLevel,a)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"audioTracks",{get:function(){var a=this.audioTrackController;return a?a.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"audioTrack",{get:function(){var a=this.audioTrackController;return a?a.audioTrack:-1},set:function(a){var d=this.audioTrackController;d&&(d.audioTrack=a)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"subtitleTracks",{get:function(){var a=this.subtitleTrackController;return a?a.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"subtitleTrack",{get:function(){var a=this.subtitleTrackController;return a?a.subtitleTrack:-1},set:function(a){var d=this.subtitleTrackController;d&&(d.subtitleTrack=a)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"subtitleDisplay",{get:function(){var a=this.subtitleTrackController;return a?a.subtitleDisplay:!1},set:function(a){var d=this.subtitleTrackController;d&&(d.subtitleDisplay=a)},enumerable:!0,configurable:!0}),x}(n.Observer);h.default=c},"./src/is-supported.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/mediasource-helper.js");function _(){var g=A.getMediaSource(),v=window.SourceBuffer||window.WebKitSourceBuffer,u=g&&typeof g.isTypeSupported=="function"&&g.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),f=!v||v.prototype&&typeof v.prototype.appendBuffer=="function"&&typeof v.prototype.remove=="function";return!!u&&!!f}h.isSupported=_},"./src/loader/fragment-loader.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,p){i.__proto__=p}||function(i,p){for(var y in p)p.hasOwnProperty(y)&&(i[y]=p[y])};return function(i,p){S(i,p);function y(){this.constructor=i}i.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=s("./src/errors.js"),f=s("./src/utils/logger.js"),m=function(S){_(i,S);function i(p){var y=S.call(this,p,g.default.FRAG_LOADING)||this;return y.loaders={},y}return i.prototype.destroy=function(){var p=this.loaders;for(var y in p){var o=p[y];o&&o.destroy()}this.loaders={},S.prototype.destroy.call(this)},i.prototype.onFragLoading=function(p){var y=p.frag,o=y.type,l=this.loaders,t=this.hls.config,n=t.fLoader,c=t.loader;y.loaded=0;var b=l[o];b&&(f.logger.warn("abort previous fragment loader for type: "+o),b.abort()),b=l[o]=y.loader=t.fLoader?new n(t):new c(t);var x,a,d;x={url:y.url,frag:y,responseType:"arraybuffer",progressData:!1};var C=y.byteRangeStartOffset,T=y.byteRangeEndOffset;A.isFinite(C)&&A.isFinite(T)&&(x.rangeStart=C,x.rangeEnd=T),a={timeout:t.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:t.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},b.load(x,a,d)},i.prototype.loadsuccess=function(p,y,o,l){l===void 0&&(l=null);var t=p.data,n=o.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(g.default.FRAG_LOADED,{payload:t,frag:n,stats:y,networkDetails:l})},i.prototype.loaderror=function(p,y,o){o===void 0&&(o=null);var l=y.frag,t=l.loader;t&&t.abort(),this.loaders[l.type]=void 0,this.hls.trigger(g.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:y.frag,response:p,networkDetails:o})},i.prototype.loadtimeout=function(p,y,o){o===void 0&&(o=null);var l=y.frag,t=l.loader;t&&t.abort(),this.loaders[l.type]=void 0,this.hls.trigger(g.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:y.frag,networkDetails:o})},i.prototype.loadprogress=function(p,y,o,l){l===void 0&&(l=null);var t=y.frag;t.loaded=p.loaded,this.hls.trigger(g.default.FRAG_LOAD_PROGRESS,{frag:t,stats:p,networkDetails:l})},i}(v.default);h.default=m}).call(this,s("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./node_modules/url-toolkit/src/url-toolkit.js"),g=s("./src/loader/level-key.js"),v=function(){function u(){var f;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(f={},f[u.ElementaryStreamTypes.AUDIO]=!1,f[u.ElementaryStreamTypes.VIDEO]=!1,f)}return Object.defineProperty(u,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=_.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(f){this._url=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var f=[];if(this.rawByteRange){var m=this.rawByteRange.split("@",2);if(m.length===1){var S=this.lastByteRangeEndOffset;f[0]=S||0}else f[0]=parseInt(m[1]);f[1]=parseInt(m[0])+f[0],this._byteRange=f}return f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"endProgramDateTime",{get:function(){if(!A.isFinite(this.programDateTime))return null;var f=A.isFinite(this.duration)?this.duration:0;return this.programDateTime+f*1e3},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"encrypted",{get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)},enumerable:!0,configurable:!0}),u.prototype.addElementaryStream=function(f){this._elementaryStreams[f]=!0},u.prototype.hasElementaryStream=function(f){return this._elementaryStreams[f]===!0},u.prototype.createInitializationVector=function(f){for(var m=new Uint8Array(16),S=12;S<16;S++)m[S]=f>>8*(15-S)&255;return m},u.prototype.fragmentDecryptdataFromLevelkey=function(f,m){var S=f;return f&&f.method&&f.uri&&!f.iv&&(S=new g.default,S.method=f.method,S.baseuri=f.baseuri,S.reluri=f.reluri,S.iv=this.createInitializationVector(m)),S},u}();h.default=v}).call(this,s("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(r,h,s){var A=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var p in i)i.hasOwnProperty(p)&&(S[p]=i[p])};return function(S,i){m(S,i);function p(){this.constructor=S}S.prototype=i===null?Object.create(i):(p.prototype=i.prototype,new p)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/events.js"),g=s("./src/event-handler.js"),v=s("./src/errors.js"),u=s("./src/utils/logger.js"),f=function(m){A(S,m);function S(i){var p=m.call(this,i,_.default.KEY_LOADING)||this;return p.loaders={},p.decryptkey=null,p.decrypturl=null,p}return S.prototype.destroy=function(){for(var i in this.loaders){var p=this.loaders[i];p&&p.destroy()}this.loaders={},g.default.prototype.destroy.call(this)},S.prototype.onKeyLoading=function(i){var p=i.frag,y=p.type,o=this.loaders[y],l=p.decryptdata,t=l.uri;if(t!==this.decrypturl||this.decryptkey===null){var n=this.hls.config;o&&(u.logger.warn("abort previous key loader for type:"+y),o.abort()),p.loader=this.loaders[y]=new n.loader(n),this.decrypturl=t,this.decryptkey=null;var c=void 0,b=void 0,x=void 0;c={url:t,frag:p,responseType:"arraybuffer"},b={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:n.fragLoadingRetryDelay,maxRetryDelay:n.fragLoadingMaxRetryTimeout},x={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},p.loader.load(c,b,x)}else this.decryptkey&&(l.key=this.decryptkey,this.hls.trigger(_.default.KEY_LOADED,{frag:p}))},S.prototype.loadsuccess=function(i,p,y){var o=y.frag;this.decryptkey=o.decryptdata.key=new Uint8Array(i.data),o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(_.default.KEY_LOADED,{frag:o})},S.prototype.loaderror=function(i,p){var y=p.frag,o=y.loader;o&&o.abort(),this.loaders[p.type]=void 0,this.hls.trigger(_.default.ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:y,response:i})},S.prototype.loadtimeout=function(i,p){var y=p.frag,o=y.loader;o&&o.abort(),this.loaders[p.type]=void 0,this.hls.trigger(_.default.ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:y})},S}(g.default);h.default=f},"./src/loader/level-key.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./node_modules/url-toolkit/src/url-toolkit.js"),_=function(){function g(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(g.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=A.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),g}();h.default=_},"./src/loader/level.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=function(){function g(v){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=v,this.version=null}return Object.defineProperty(g.prototype,"hasProgramDateTime",{get:function(){return!!(this.fragments[0]&&A.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),g}();h.default=_}).call(this,s("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./node_modules/url-toolkit/src/url-toolkit.js"),g=s("./src/loader/fragment.js"),v=s("./src/loader/level.js"),u=s("./src/loader/level-key.js"),f=s("./src/utils/attr-list.js"),m=s("./src/utils/logger.js"),S=s("./src/utils/codecs.js"),i=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,p=/#EXT-X-MEDIA:(.*)/g,y=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),o=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,l=/\.(mp4|m4s|m4v|m4a)$/i,t=function(){function b(){}return b.findGroup=function(x,a){if(!x)return null;for(var d=null,C=0;C<x.length;C++){var T=x[C];T.id===a&&(d=T)}return d},b.convertAVC1ToAVCOTI=function(x){var a,d=x.split(".");return d.length>2?(a=d.shift()+".",a+=parseInt(d.shift()).toString(16),a+=("000"+parseInt(d.shift()).toString(16)).substr(-4)):a=x,a},b.resolve=function(x,a){return _.buildAbsoluteURL(a,x,{alwaysNormalize:!0})},b.parseMasterPlaylist=function(x,a){var d=[],C;i.lastIndex=0;function T(j,D){["video","audio"].forEach(function(w){var F=j.filter(function(M){return S.isCodecType(M,w)});if(F.length){var B=F.filter(function(M){return M.lastIndexOf("avc1",0)===0||M.lastIndexOf("mp4a",0)===0});D[w+"Codec"]=B.length>0?B[0]:F[0],j=j.filter(function(M){return F.indexOf(M)===-1})}}),D.unknownCodecs=j}for(;(C=i.exec(x))!=null;){var L={},R=L.attrs=new f.default(C[1]);L.url=b.resolve(C[2],a);var O=R.decimalResolution("RESOLUTION");O&&(L.width=O.width,L.height=O.height),L.bitrate=R.decimalInteger("AVERAGE-BANDWIDTH")||R.decimalInteger("BANDWIDTH"),L.name=R.NAME,T([].concat((R.CODECS||"").split(/[ ,]+/)),L),L.videoCodec&&L.videoCodec.indexOf("avc1")!==-1&&(L.videoCodec=b.convertAVC1ToAVCOTI(L.videoCodec)),d.push(L)}return d},b.parseMasterPlaylistMedia=function(x,a,d,C){C===void 0&&(C=[]);var T,L=[],R=0;for(p.lastIndex=0;(T=p.exec(x))!==null;){var O={},j=new f.default(T[1]);if(j.TYPE===d){if(O.groupId=j["GROUP-ID"],O.name=j.NAME,O.type=d,O.default=j.DEFAULT==="YES",O.autoselect=j.AUTOSELECT==="YES",O.forced=j.FORCED==="YES",j.URI&&(O.url=b.resolve(j.URI,a)),O.lang=j.LANGUAGE,O.name||(O.name=O.lang),C.length){var D=b.findGroup(C,O.groupId);O.audioCodec=D?D.codec:C[0].codec}O.id=R++,L.push(O)}}return L},b.parseLevelPlaylist=function(x,a,d,C,T){var L=0,R=0,O=new v.default(a),j=new u.default,D=0,w=null,F=new g.default,B,M,N=null;for(y.lastIndex=0;(B=y.exec(x))!==null;){var I=B[1];if(I){F.duration=parseFloat(I);var X=(" "+B[2]).slice(1);F.title=X||null,F.tagList.push(X?["INF",I,X]:["INF",I])}else if(B[3]){if(A.isFinite(F.duration)){var $=L++;F.type=C,F.start=R,F.levelkey=j,F.sn=$,F.level=d,F.cc=D,F.urlId=T,F.baseurl=a,F.relurl=(" "+B[3]).slice(1),c(F,w),O.fragments.push(F),w=F,R+=F.duration,F=new g.default}}else if(B[4]){if(F.rawByteRange=(" "+B[4]).slice(1),w){var ee=w.byteRangeEndOffset;ee&&(F.lastByteRangeEndOffset=ee)}}else if(B[5])F.rawProgramDateTime=(" "+B[5]).slice(1),F.tagList.push(["PROGRAM-DATE-TIME",F.rawProgramDateTime]),N===null&&(N=O.fragments.length);else{for(B=B[0].match(o),M=1;M<B.length&&B[M]===void 0;M++);var K=(" "+B[M+1]).slice(1),J=(" "+B[M+2]).slice(1);switch(B[M]){case"#":F.tagList.push(J?[K,J]:[K]);break;case"PLAYLIST-TYPE":O.type=K.toUpperCase();break;case"MEDIA-SEQUENCE":L=O.startSN=parseInt(K);break;case"TARGETDURATION":O.targetduration=parseFloat(K);break;case"VERSION":O.version=parseInt(K);break;case"EXTM3U":break;case"ENDLIST":O.live=!1;break;case"DIS":D++,F.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":D=parseInt(K);break;case"KEY":var V=K,W=new f.default(V),Y=W.enumeratedString("METHOD"),te=W.URI,se=W.hexadecimalInteger("IV");Y&&(j=new u.default,te&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Y)>=0&&(j.method=Y,j.baseuri=a,j.reluri=te,j.key=null,j.iv=se));break;case"START":var ce=K,ue=new f.default(ce),re=ue.decimalFloatingPoint("TIME-OFFSET");A.isFinite(re)&&(O.startTimeOffset=re);break;case"MAP":var ne=new f.default(K);F.relurl=ne.URI,F.rawByteRange=ne.BYTERANGE,F.baseurl=a,F.level=d,F.type=C,F.sn="initSegment",O.initSegment=F,F=new g.default,F.rawProgramDateTime=O.initSegment.rawProgramDateTime;break;default:m.logger.warn("line parsed but not handled: "+B);break}}}return F=w,F&&!F.relurl&&(O.fragments.pop(),R-=F.duration),O.totalduration=R,O.averagetargetduration=R/O.fragments.length,O.endSN=L-1,O.startCC=O.fragments[0]?O.fragments[0].cc:0,O.endCC=D,!O.initSegment&&O.fragments.length&&O.fragments.every(function(z){return l.test(z.relurl)})&&(m.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),F=new g.default,F.relurl=O.fragments[0].relurl,F.baseurl=a,F.level=d,F.type=C,F.sn="initSegment",O.initSegment=F,O.needSidxRanges=!0),N&&n(O.fragments,N),O},b}();h.default=t;function n(b,x){for(var a=b[x],d=x-1;d>=0;d--){var C=b[d];C.programDateTime=a.programDateTime-C.duration*1e3,a=C}}function c(b,x){b.rawProgramDateTime?b.programDateTime=Date.parse(b.rawProgramDateTime):x&&x.programDateTime&&(b.programDateTime=x.endProgramDateTime),A.isFinite(b.programDateTime)||(b.programDateTime=null,b.rawProgramDateTime=null)}}).call(this,s("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(r,h,s){(function(A){var _=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var c in n)n.hasOwnProperty(c)&&(t[c]=n[c])};return function(t,n){l(t,n);function c(){this.constructor=t}t.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}}();Object.defineProperty(h,"__esModule",{value:!0});var g=s("./src/events.js"),v=s("./src/event-handler.js"),u=s("./src/errors.js"),f=s("./src/utils/logger.js"),m=s("./src/demux/mp4demuxer.js"),S=s("./src/loader/m3u8-parser.js"),i=window.performance,p={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},y={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},o=function(l){_(t,l);function t(n){var c=l.call(this,n,g.default.MANIFEST_LOADING,g.default.LEVEL_LOADING,g.default.AUDIO_TRACK_LOADING,g.default.SUBTITLE_TRACK_LOADING)||this;return c.loaders={},c}return Object.defineProperty(t,"ContextType",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LevelType",{get:function(){return y},enumerable:!0,configurable:!0}),t.canHaveQualityLevels=function(n){return n!==p.AUDIO_TRACK&&n!==p.SUBTITLE_TRACK},t.mapContextToLevelType=function(n){var c=n.type;switch(c){case p.AUDIO_TRACK:return y.AUDIO;case p.SUBTITLE_TRACK:return y.SUBTITLE;default:return y.MAIN}},t.getResponseUrl=function(n,c){var b=n.url;return(b===void 0||b.indexOf("data:")===0)&&(b=c.url),b},t.prototype.createInternalLoader=function(n){var c=this.hls.config,b=c.pLoader,x=c.loader,a=b||x,d=new a(c);return n.loader=d,this.loaders[n.type]=d,d},t.prototype.getInternalLoader=function(n){return this.loaders[n.type]},t.prototype.resetInternalLoader=function(n){this.loaders[n]&&delete this.loaders[n]},t.prototype.destroyInternalLoaders=function(){for(var n in this.loaders){var c=this.loaders[n];c&&c.destroy(),this.resetInternalLoader(n)}},t.prototype.destroy=function(){this.destroyInternalLoaders(),l.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(n){this.load(n.url,{type:p.MANIFEST,level:0,id:null})},t.prototype.onLevelLoading=function(n){this.load(n.url,{type:p.LEVEL,level:n.level,id:n.id})},t.prototype.onAudioTrackLoading=function(n){this.load(n.url,{type:p.AUDIO_TRACK,level:null,id:n.id})},t.prototype.onSubtitleTrackLoading=function(n){this.load(n.url,{type:p.SUBTITLE_TRACK,level:null,id:n.id})},t.prototype.load=function(n,c){var b=this.hls.config;f.logger.debug("Loading playlist of type "+c.type+", level: "+c.level+", id: "+c.id);var x=this.getInternalLoader(c);if(x){var a=x.context;if(a&&a.url===n)return f.logger.trace("playlist request ongoing"),!1;f.logger.warn("aborting previous loader for type: "+c.type),x.abort()}var d,C,T,L;switch(c.type){case p.MANIFEST:d=b.manifestLoadingMaxRetry,C=b.manifestLoadingTimeOut,T=b.manifestLoadingRetryDelay,L=b.manifestLoadingMaxRetryTimeout;break;case p.LEVEL:d=0,C=b.levelLoadingTimeOut;break;default:d=b.levelLoadingMaxRetry,C=b.levelLoadingTimeOut,T=b.levelLoadingRetryDelay,L=b.levelLoadingMaxRetryTimeout;break}x=this.createInternalLoader(c),c.url=n,c.responseType=c.responseType||"";var R={timeout:C,maxRetry:d,retryDelay:T,maxRetryDelay:L},O={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return f.logger.debug("Calling internal loader delegate for URL: "+n),x.load(c,R,O),!0},t.prototype.loadsuccess=function(n,c,b,x){if(x===void 0&&(x=null),b.isSidxRequest){this._handleSidxRequest(n,b),this._handlePlaylistLoaded(n,c,b,x);return}this.resetInternalLoader(b.type);var a=n.data;if(c.tload=i.now(),a.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(n,b,"no EXTM3U delimiter",x);return}a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(n,c,b,x):this._handleMasterPlaylist(n,c,b,x)},t.prototype.loaderror=function(n,c,b){b===void 0&&(b=null),this._handleNetworkError(c,b,!1,n)},t.prototype.loadtimeout=function(n,c,b){b===void 0&&(b=null),this._handleNetworkError(c,b,!0)},t.prototype._handleMasterPlaylist=function(n,c,b,x){var a=this.hls,d=n.data,C=t.getResponseUrl(n,b),T=S.default.parseMasterPlaylist(d,C);if(!T.length){this._handleManifestParsingError(n,b,"no level found in manifest",x);return}var L=T.map(function(D){return{id:D.attrs.AUDIO,codec:D.audioCodec}}),R=S.default.parseMasterPlaylistMedia(d,C,"AUDIO",L),O=S.default.parseMasterPlaylistMedia(d,C,"SUBTITLES");if(R.length){var j=!1;R.forEach(function(D){D.url||(j=!0)}),j===!1&&T[0].audioCodec&&!T[0].attrs.AUDIO&&(f.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),R.unshift({type:"main",name:"main"}))}a.trigger(g.default.MANIFEST_LOADED,{levels:T,audioTracks:R,subtitles:O,url:C,stats:c,networkDetails:x})},t.prototype._handleTrackOrLevelPlaylist=function(n,c,b,x){var a=this.hls,d=b.id,C=b.level,T=b.type,L=t.getResponseUrl(n,b),R=A.isFinite(d)?d:0,O=A.isFinite(C)?C:R,j=t.mapContextToLevelType(b),D=S.default.parseLevelPlaylist(n.data,L,O,j,R);if(D.tload=c.tload,T===p.MANIFEST){var w={url:L,details:D};a.trigger(g.default.MANIFEST_LOADED,{levels:[w],audioTracks:[],url:L,stats:c,networkDetails:x})}if(c.tparsed=i.now(),D.needSidxRanges){var F=D.initSegment.url;this.load(F,{isSidxRequest:!0,type:T,level:C,levelDetails:D,id:d,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}b.levelDetails=D,this._handlePlaylistLoaded(n,c,b,x)},t.prototype._handleSidxRequest=function(n,c){var b=m.default.parseSegmentIndex(new Uint8Array(n.data));if(!!b){var x=b.references,a=c.levelDetails;x.forEach(function(d,C){var T=d.info,L=a.fragments[C];L.byteRange.length===0&&(L.rawByteRange=String(1+T.end-T.start)+"@"+String(T.start))}),a.initSegment.rawByteRange=String(b.moovEndOffset)+"@0"}},t.prototype._handleManifestParsingError=function(n,c,b,x){this.hls.trigger(g.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n.url,reason:b,networkDetails:x})},t.prototype._handleNetworkError=function(n,c,b,x){b===void 0&&(b=!1),x===void 0&&(x=null),f.logger.info("A network error occured while loading a "+n.type+"-type playlist");var a,d,C=this.getInternalLoader(n);switch(n.type){case p.MANIFEST:a=b?u.ErrorDetails.MANIFEST_LOAD_TIMEOUT:u.ErrorDetails.MANIFEST_LOAD_ERROR,d=!0;break;case p.LEVEL:a=b?u.ErrorDetails.LEVEL_LOAD_TIMEOUT:u.ErrorDetails.LEVEL_LOAD_ERROR,d=!1;break;case p.AUDIO_TRACK:a=b?u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,d=!1;break;default:d=!1}C&&(C.abort(),this.resetInternalLoader(n.type));var T={type:u.ErrorTypes.NETWORK_ERROR,details:a,fatal:d,url:C.url,loader:C,context:n,networkDetails:c};x&&(T.response=x),this.hls.trigger(g.default.ERROR,T)},t.prototype._handlePlaylistLoaded=function(n,c,b,x){var a=b.type,d=b.level,C=b.id,T=b.levelDetails;if(!T.targetduration){this._handleManifestParsingError(n,b,"invalid target duration",x);return}var L=t.canHaveQualityLevels(b.type);if(L)this.hls.trigger(g.default.LEVEL_LOADED,{details:T,level:d||0,id:C||0,stats:c,networkDetails:x});else switch(a){case p.AUDIO_TRACK:this.hls.trigger(g.default.AUDIO_TRACK_LOADED,{details:T,id:C,stats:c,networkDetails:x});break;case p.SUBTITLE_TRACK:this.hls.trigger(g.default.SUBTITLE_TRACK_LOADED,{details:T,id:C,stats:c,networkDetails:x});break}},t}(v.default);h.default=o}).call(this,s("./src/polyfills/number.js").Number)},"./src/observer.js":function(r,h,s){var A=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){v(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./node_modules/eventemitter3/index.js"),g=function(v){A(u,v);function u(){return v!==null&&v.apply(this,arguments)||this}return u.prototype.trigger=function(f){for(var m=[],S=1;S<arguments.length;S++)m[S-1]=arguments[S];this.emit.apply(this,[f,f].concat(m))},u}(_.EventEmitter);h.Observer=g},"./src/polyfills/number.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/get-self-scope.js"),_=A.getSelfScope(),g=_.Number;h.Number=g,g.isFinite=g.isFinite||function(v){return typeof v=="number"&&isFinite(v)}},"./src/remux/aac-helper.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(){}return _.getSilentFrame=function(g,v){switch(g){case"mp4a.40.2":if(v===1)return new Uint8Array([0,200,0,128,35,128]);if(v===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(v===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(v===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(v===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(v===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(v===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(v===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(v===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},_}();h.default=A},"./src/remux/mp4-generator.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=Math.pow(2,32)-1,_=function(){function g(){}return g.init=function(){g.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var v;for(v in g.types)g.types.hasOwnProperty(v)&&(g.types[v]=[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]);var u=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);g.HDLR_TYPES={video:u,audio:f};var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),S=new Uint8Array([0,0,0,0,0,0,0,0]);g.STTS=g.STSC=g.STCO=S,g.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),g.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),g.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),g.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var i=new Uint8Array([105,115,111,109]),p=new Uint8Array([97,118,99,49]),y=new Uint8Array([0,0,0,1]);g.FTYP=g.box(g.types.ftyp,i,y,i,p),g.DINF=g.box(g.types.dinf,g.box(g.types.dref,m))},g.box=function(v){for(var u=Array.prototype.slice.call(arguments,1),f=8,m=u.length,S=m,i;m--;)f+=u[m].byteLength;for(i=new Uint8Array(f),i[0]=f>>24&255,i[1]=f>>16&255,i[2]=f>>8&255,i[3]=f&255,i.set(v,4),m=0,f=8;m<S;m++)i.set(u[m],f),f+=u[m].byteLength;return i},g.hdlr=function(v){return g.box(g.types.hdlr,g.HDLR_TYPES[v])},g.mdat=function(v){return g.box(g.types.mdat,v)},g.mdhd=function(v,u){u*=v;var f=Math.floor(u/(A+1)),m=Math.floor(u%(A+1));return g.box(g.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,v&255,f>>24,f>>16&255,f>>8&255,f&255,m>>24,m>>16&255,m>>8&255,m&255,85,196,0,0]))},g.mdia=function(v){return g.box(g.types.mdia,g.mdhd(v.timescale,v.duration),g.hdlr(v.type),g.minf(v))},g.mfhd=function(v){return g.box(g.types.mfhd,new Uint8Array([0,0,0,0,v>>24,v>>16&255,v>>8&255,v&255]))},g.minf=function(v){return v.type==="audio"?g.box(g.types.minf,g.box(g.types.smhd,g.SMHD),g.DINF,g.stbl(v)):g.box(g.types.minf,g.box(g.types.vmhd,g.VMHD),g.DINF,g.stbl(v))},g.moof=function(v,u,f){return g.box(g.types.moof,g.mfhd(v),g.traf(f,u))},g.moov=function(v){for(var u=v.length,f=[];u--;)f[u]=g.trak(v[u]);return g.box.apply(null,[g.types.moov,g.mvhd(v[0].timescale,v[0].duration)].concat(f).concat(g.mvex(v)))},g.mvex=function(v){for(var u=v.length,f=[];u--;)f[u]=g.trex(v[u]);return g.box.apply(null,[g.types.mvex].concat(f))},g.mvhd=function(v,u){u*=v;var f=Math.floor(u/(A+1)),m=Math.floor(u%(A+1)),S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,v&255,f>>24,f>>16&255,f>>8&255,f&255,m>>24,m>>16&255,m>>8&255,m&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return g.box(g.types.mvhd,S)},g.sdtp=function(v){var u=v.samples||[],f=new Uint8Array(4+u.length),m,S;for(S=0;S<u.length;S++)m=u[S].flags,f[S+4]=m.dependsOn<<4|m.isDependedOn<<2|m.hasRedundancy;return g.box(g.types.sdtp,f)},g.stbl=function(v){return g.box(g.types.stbl,g.stsd(v),g.box(g.types.stts,g.STTS),g.box(g.types.stsc,g.STSC),g.box(g.types.stsz,g.STSZ),g.box(g.types.stco,g.STCO))},g.avc1=function(v){var u=[],f=[],m,S,i;for(m=0;m<v.sps.length;m++)S=v.sps[m],i=S.byteLength,u.push(i>>>8&255),u.push(i&255),u=u.concat(Array.prototype.slice.call(S));for(m=0;m<v.pps.length;m++)S=v.pps[m],i=S.byteLength,f.push(i>>>8&255),f.push(i&255),f=f.concat(Array.prototype.slice.call(S));var p=g.box(g.types.avcC,new Uint8Array([1,u[3],u[4],u[5],255,224|v.sps.length].concat(u).concat([v.pps.length]).concat(f))),y=v.width,o=v.height,l=v.pixelRatio[0],t=v.pixelRatio[1];return g.box(g.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,y>>8&255,y&255,o>>8&255,o&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p,g.box(g.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),g.box(g.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,l&255,t>>24,t>>16&255,t>>8&255,t&255])))},g.esds=function(v){var u=v.config.length;return new Uint8Array([0,0,0,0,3,23+u,0,1,0,4,15+u,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([u]).concat(v.config).concat([6,1,2]))},g.mp4a=function(v){var u=v.samplerate;return g.box(g.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,v.channelCount,0,16,0,0,0,0,u>>8&255,u&255,0,0]),g.box(g.types.esds,g.esds(v)))},g.mp3=function(v){var u=v.samplerate;return g.box(g.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,v.channelCount,0,16,0,0,0,0,u>>8&255,u&255,0,0]))},g.stsd=function(v){return v.type==="audio"?!v.isAAC&&v.codec==="mp3"?g.box(g.types.stsd,g.STSD,g.mp3(v)):g.box(g.types.stsd,g.STSD,g.mp4a(v)):g.box(g.types.stsd,g.STSD,g.avc1(v))},g.tkhd=function(v){var u=v.id,f=v.duration*v.timescale,m=v.width,S=v.height,i=Math.floor(f/(A+1)),p=Math.floor(f%(A+1));return g.box(g.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,u>>24&255,u>>16&255,u>>8&255,u&255,0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,p>>24,p>>16&255,p>>8&255,p&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,m>>8&255,m&255,0,0,S>>8&255,S&255,0,0]))},g.traf=function(v,u){var f=g.sdtp(v),m=v.id,S=Math.floor(u/(A+1)),i=Math.floor(u%(A+1));return g.box(g.types.traf,g.box(g.types.tfhd,new Uint8Array([0,0,0,0,m>>24,m>>16&255,m>>8&255,m&255])),g.box(g.types.tfdt,new Uint8Array([1,0,0,0,S>>24,S>>16&255,S>>8&255,S&255,i>>24,i>>16&255,i>>8&255,i&255])),g.trun(v,f.length+16+20+8+16+8+8),f)},g.trak=function(v){return v.duration=v.duration||4294967295,g.box(g.types.trak,g.tkhd(v),g.mdia(v))},g.trex=function(v){var u=v.id;return g.box(g.types.trex,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,u&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},g.trun=function(v,u){var f=v.samples||[],m=f.length,S=12+16*m,i=new Uint8Array(S),p,y,o,l,t,n;for(u+=8+S,i.set([0,0,15,1,m>>>24&255,m>>>16&255,m>>>8&255,m&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255],0),p=0;p<m;p++)y=f[p],o=y.duration,l=y.size,t=y.flags,n=y.cts,i.set([o>>>24&255,o>>>16&255,o>>>8&255,o&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.paddingValue<<1|t.isNonSync,t.degradPrio&240<<8,t.degradPrio&15,n>>>24&255,n>>>16&255,n>>>8&255,n&255],12+16*p);return g.box(g.types.trun,i)},g.initSegment=function(v){g.types||g.init();var u=g.moov(v),f;return f=new Uint8Array(g.FTYP.byteLength+u.byteLength),f.set(g.FTYP),f.set(u,g.FTYP.byteLength),f},g}();h.default=_},"./src/remux/mp4-remuxer.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/remux/aac-helper.js"),_=s("./src/remux/mp4-generator.js"),g=s("./src/events.js"),v=s("./src/errors.js"),u=s("./src/utils/logger.js"),f=10*1e3,m=function(){function S(i,p,y,o){this.observer=i,this.config=p,this.typeSupported=y;var l=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&l&&!l.match("CriOS"),this.ISGenerated=!1}return S.prototype.destroy=function(){},S.prototype.resetTimeStamp=function(i){this._initPTS=this._initDTS=i},S.prototype.resetInitSegment=function(){this.ISGenerated=!1},S.prototype.remux=function(i,p,y,o,l,t,n){if(this.ISGenerated||this.generateIS(i,p,l),this.ISGenerated){var c=i.samples.length,b=p.samples.length,x=l,a=l;if(c&&b){var d=(i.samples[0].pts-p.samples[0].pts)/p.inputTimeScale;x+=Math.max(0,d),a+=Math.max(0,-d)}if(c){i.timescale||(u.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(i,p,l));var C=this.remuxAudio(i,x,t,n);if(b){var T=void 0;C&&(T=C.endPTS-C.startPTS),p.timescale||(u.logger.warn("regenerate InitSegment as video detected"),this.generateIS(i,p,l)),this.remuxVideo(p,a,t,T,n)}}else if(b){var L=this.remuxVideo(p,a,t,0,n);L&&i.codec&&this.remuxEmptyAudio(i,x,t,L)}}y.samples.length&&this.remuxID3(y,l),o.samples.length&&this.remuxText(o,l),this.observer.trigger(g.default.FRAG_PARSED)},S.prototype.generateIS=function(i,p,y){var o=this.observer,l=i.samples,t=p.samples,n=this.typeSupported,c="audio/mp4",b={},x={tracks:b},a=this._initPTS===void 0,d,C;if(a&&(d=C=1/0),i.config&&l.length&&(i.timescale=i.samplerate,u.logger.log("audio sampling rate : "+i.samplerate),i.isAAC||(n.mpeg?(c="audio/mpeg",i.codec=""):n.mp3&&(i.codec="mp3")),b.audio={container:c,codec:i.codec,initSegment:!i.isAAC&&n.mpeg?new Uint8Array:_.default.initSegment([i]),metadata:{channelCount:i.channelCount}},a&&(d=C=l[0].pts-i.inputTimeScale*y)),p.sps&&p.pps&&t.length){var T=p.inputTimeScale;p.timescale=T,b.video={container:"video/mp4",codec:p.codec,initSegment:_.default.initSegment([p]),metadata:{width:p.width,height:p.height}},a&&(d=Math.min(d,t[0].pts-T*y),C=Math.min(C,t[0].dts-T*y),this.observer.trigger(g.default.INIT_PTS_FOUND,{initPTS:d}))}Object.keys(b).length?(o.trigger(g.default.FRAG_PARSING_INIT_SEGMENT,x),this.ISGenerated=!0,a&&(this._initPTS=d,this._initDTS=C)):o.trigger(g.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},S.prototype.remuxVideo=function(i,p,y,o,l){var t=8,n,c,b,x,a,d,C,T=i.timescale,L=i.samples,R=[],O=L.length,j=this._PTSNormalize,D=this._initPTS,w=this.nextAvcDts,F=this.isSafari;if(O!==0){F&&(y|=L.length&&w&&(l&&Math.abs(p-w/T)<.1||Math.abs(L[0].pts-w-D)<T/5)),y||(w=p*T),L.forEach(function(oe){oe.pts=j(oe.pts-D,w),oe.dts=j(oe.dts-D,w)}),L.sort(function(oe,fe){var pe=oe.dts-fe.dts,ve=oe.pts-fe.pts;return pe||ve||oe.id-fe.id});var B=L.reduce(function(oe,fe){return Math.max(Math.min(oe,fe.pts-fe.dts),-18e3)},0);if(B<0){u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(B/90)+" ms to overcome this issue");for(var M=0;M<L.length;M++)L[M].dts+=B}var N=L[0];a=Math.max(N.dts,0),x=Math.max(N.pts,0);var I=Math.round((a-w)/90);y&&I&&(I>1?u.logger.log("AVC:"+I+" ms hole between fragments detected,filling it"):I<-1&&u.logger.log("AVC:"+-I+" ms overlapping between fragments detected"),a=w,L[0].dts=a,x=Math.max(x-I,w),L[0].pts=x,u.logger.log("Video/PTS/DTS adjusted: "+Math.round(x/90)+"/"+Math.round(a/90)+",delta:"+I+" ms")),N=L[L.length-1],C=Math.max(N.dts,0),d=Math.max(N.pts,0,C),F&&(n=Math.round((C-a)/(L.length-1)));for(var X=0,$=0,M=0;M<O;M++){for(var ee=L[M],K=ee.units,J=K.length,V=0,W=0;W<J;W++)V+=K[W].data.length;$+=V,X+=J,ee.length=V,F?ee.dts=a+M*n:ee.dts=Math.max(ee.dts,a),ee.pts=Math.max(ee.pts,ee.dts)}var Y=$+4*X+8;try{c=new Uint8Array(Y)}catch{this.observer.trigger(g.default.ERROR,{type:v.ErrorTypes.MUX_ERROR,details:v.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Y,reason:"fail allocating video mdat "+Y});return}var te=new DataView(c.buffer);te.setUint32(0,Y),c.set(_.default.types.mdat,4);for(var M=0;M<O;M++){for(var se=L[M],ce=se.units,ue=0,re=void 0,W=0,J=ce.length;W<J;W++){var ne=ce[W],z=ne.data,ae=ne.data.byteLength;te.setUint32(t,ae),t+=4,c.set(z,t),t+=ae,ue+=4+ae}if(F)re=Math.max(0,n*Math.round((se.pts-se.dts)/n));else{if(M<O-1)n=L[M+1].dts-se.dts;else{var de=this.config,he=se.dts-L[M>0?M-1:M].dts;if(de.stretchShortVideoTrack){var k=de.maxBufferHole,U=Math.floor(k*T),H=(o?x+o*T:this.nextAudioPts)-se.pts;H>U?(n=H-he,n<0&&(n=he),u.logger.log("It is approximately "+H/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=he}else n=he}re=Math.round(se.pts-se.dts)}R.push({size:ue,duration:n,cts:re,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:se.key?2:1,isNonSync:se.key?0:1}})}this.nextAvcDts=C+n;var Q=i.dropped;if(i.len=0,i.nbNalu=0,i.dropped=0,R.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var q=R[0].flags;q.dependsOn=2,q.isNonSync=0}i.samples=R,b=_.default.moof(i.sequenceNumber++,a,i),i.samples=[];var ie={data1:b,data2:c,startPTS:x/T,endPTS:(d+n)/T,startDTS:a/T,endDTS:this.nextAvcDts/T,type:"video",hasAudio:!1,hasVideo:!0,nb:R.length,dropped:Q};return this.observer.trigger(g.default.FRAG_PARSING_DATA,ie),ie}},S.prototype.remuxAudio=function(i,p,y,o){var l=i.inputTimeScale,t=i.timescale,n=l/t,c=i.isAAC?1024:1152,b=c*n,x=this._PTSNormalize,a=this._initPTS,d=!i.isAAC&&this.typeSupported.mpeg,C,T,L,R,O,j,D,w=i.samples,F=[],B=this.nextAudioPts;if(y|=w.length&&B&&(o&&Math.abs(p-B/l)<.1||Math.abs(w[0].pts-B-a)<20*b),w.forEach(function(H){H.pts=H.dts=x(H.pts-a,p*l)}),w=w.filter(function(H){return H.pts>=0}),w.length!==0){if(y||(o?B=p*l:B=w[0].pts),i.isAAC)for(var M=this.config.maxAudioFramesDrift,N=0,I=B;N<w.length;){var X=w[N],$,ee=X.pts;$=ee-I;var K=Math.abs(1e3*$/l);if($<=-M*b)u.logger.warn("Dropping 1 audio frame @ "+(I/l).toFixed(3)+"s due to "+Math.round(K)+" ms overlap."),w.splice(N,1),i.len-=X.unit.length;else if($>=M*b&&K<f&&I){var J=Math.round($/b);u.logger.warn("Injecting "+J+" audio frame @ "+(I/l).toFixed(3)+"s due to "+Math.round(1e3*$/l)+" ms gap.");for(var V=0;V<J;V++){var W=Math.max(I,0);L=A.default.getSilentFrame(i.manifestCodec||i.codec,i.channelCount),L||(u.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),L=X.unit.subarray()),w.splice(N,0,{unit:L,pts:W,dts:W}),i.len+=L.length,I+=b,N++}X.pts=X.dts=I,I+=b,N++}else X.pts=X.dts=I,I+=b,N++}for(var V=0,Y=w.length;V<Y;V++){var te=w[V],se=te.unit,ee=te.pts;if(D!==void 0)T.duration=Math.round((ee-D)/n);else{var ce=Math.round(1e3*(ee-B)/l),ue=0;if(y&&i.isAAC&&ce){if(ce>0&&ce<f)ue=Math.round((ee-B)/b),u.logger.log(ce+" ms hole between AAC samples detected,filling it"),ue>0&&(L=A.default.getSilentFrame(i.manifestCodec||i.codec,i.channelCount),L||(L=se.subarray()),i.len+=ue*L.length);else if(ce<-12){u.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(B/l).toFixed(3)+"s/"+(ee/l).toFixed(3)+"s/"+-ce+"ms"),i.len-=se.byteLength;continue}ee=B}if(j=ee,i.len>0){var re=d?i.len:i.len+8;C=d?0:8;try{R=new Uint8Array(re)}catch{this.observer.trigger(g.default.ERROR,{type:v.ErrorTypes.MUX_ERROR,details:v.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:re,reason:"fail allocating audio mdat "+re});return}if(!d){var ne=new DataView(R.buffer);ne.setUint32(0,re),R.set(_.default.types.mdat,4)}}else return;for(var N=0;N<ue;N++)L=A.default.getSilentFrame(i.manifestCodec||i.codec,i.channelCount),L||(u.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),L=se.subarray()),R.set(L,C),C+=L.byteLength,T={size:L.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},F.push(T)}R.set(se,C);var z=se.byteLength;C+=z,T={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},F.push(T),D=ee}var ae=0,de=F.length;if(de>=2&&(ae=F[de-2].duration,T.duration=ae),de){this.nextAudioPts=B=D+n*ae,i.len=0,i.samples=F,d?O=new Uint8Array:O=_.default.moof(i.sequenceNumber++,j/n,i),i.samples=[];var he=j/l,k=B/l,U={data1:O,data2:R,startPTS:he,endPTS:k,startDTS:he,endDTS:k,type:"audio",hasAudio:!0,hasVideo:!1,nb:de};return this.observer.trigger(g.default.FRAG_PARSING_DATA,U),U}return null}},S.prototype.remuxEmptyAudio=function(i,p,y,o){var l=i.inputTimeScale,t=i.samplerate?i.samplerate:l,n=l/t,c=this.nextAudioPts,b=(c!==void 0?c:o.startDTS*l)+this._initDTS,x=o.endDTS*l+this._initDTS,a=1024,d=n*a,C=Math.ceil((x-b)/d),T=A.default.getSilentFrame(i.manifestCodec||i.codec,i.channelCount);if(u.logger.warn("remux empty Audio"),!T){u.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var L=[],R=0;R<C;R++){var O=b+R*d;L.push({unit:T,pts:O,dts:O}),i.len+=T.length}i.samples=L,this.remuxAudio(i,p,y)},S.prototype.remuxID3=function(i){var p=i.samples.length,y,o=i.inputTimeScale,l=this._initPTS,t=this._initDTS;if(p){for(var n=0;n<p;n++)y=i.samples[n],y.pts=(y.pts-l)/o,y.dts=(y.dts-t)/o;this.observer.trigger(g.default.FRAG_PARSING_METADATA,{samples:i.samples})}i.samples=[]},S.prototype.remuxText=function(i){i.samples.sort(function(n,c){return n.pts-c.pts});var p=i.samples.length,y,o=i.inputTimeScale,l=this._initPTS;if(p){for(var t=0;t<p;t++)y=i.samples[t],y.pts=(y.pts-l)/o;this.observer.trigger(g.default.FRAG_PARSING_USERDATA,{samples:i.samples})}i.samples=[]},S.prototype._PTSNormalize=function(i,p){var y;if(p===void 0)return i;for(p<i?y=-8589934592:y=8589934592;Math.abs(i-p)>4294967296;)i+=y;return i},S}();h.default=m},"./src/remux/passthrough-remuxer.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/events.js"),_=function(){function g(v){this.observer=v}return g.prototype.destroy=function(){},g.prototype.resetTimeStamp=function(){},g.prototype.resetInitSegment=function(){},g.prototype.remux=function(v,u,f,m,S,i,p,y){var o=this.observer,l="";v&&(l+="audio"),u&&(l+="video"),o.trigger(A.default.FRAG_PARSING_DATA,{data1:y,startPTS:S,startDTS:S,type:l,hasAudio:!!v,hasVideo:!!u,nb:1,dropped:0}),o.trigger(A.default.FRAG_PARSED)},g}();h.default=_},"./src/task-loop.js":function(r,h,s){var A=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var m in f)f.hasOwnProperty(m)&&(u[m]=f[m])};return function(u,f){v(u,f);function m(){this.constructor=u}u.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/event-handler.js"),g=function(v){A(u,v);function u(f){for(var m=[],S=1;S<arguments.length;S++)m[S-1]=arguments[S];var i=v.apply(this,[f].concat(m))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return u.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},u.prototype.hasInterval=function(){return!!this._tickInterval},u.prototype.hasNextTick=function(){return!!this._tickTimer},u.prototype.setInterval=function(f){return this._tickInterval?!1:(this._tickInterval=setInterval(this._boundTick,f),!0)},u.prototype.clearInterval=function(){return this._tickInterval?(clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},u.prototype.clearNextTick=function(){return this._tickTimer?(clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},u.prototype.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},u.prototype.doTick=function(){},u}(_.default);h.default=g},"./src/utils/attr-list.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=/^(\d+)x(\d+)$/,g=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,v=function(){function u(f){typeof f=="string"&&(f=u.parseAttrList(f));for(var m in f)f.hasOwnProperty(m)&&(this[m]=f[m])}return u.prototype.decimalInteger=function(f){var m=parseInt(this[f],10);return m>A.MAX_SAFE_INTEGER?1/0:m},u.prototype.hexadecimalInteger=function(f){if(this[f]){var m=(this[f]||"0x").slice(2);m=(m.length&1?"0":"")+m;for(var S=new Uint8Array(m.length/2),i=0;i<m.length/2;i++)S[i]=parseInt(m.slice(i*2,i*2+2),16);return S}else return null},u.prototype.hexadecimalIntegerAsNumber=function(f){var m=parseInt(this[f],16);return m>A.MAX_SAFE_INTEGER?1/0:m},u.prototype.decimalFloatingPoint=function(f){return parseFloat(this[f])},u.prototype.enumeratedString=function(f){return this[f]},u.prototype.decimalResolution=function(f){var m=_.exec(this[f]);if(m!==null)return{width:parseInt(m[1],10),height:parseInt(m[2],10)}},u.parseAttrList=function(f){var m,S={};for(g.lastIndex=0;(m=g.exec(f))!==null;){var i=m[2],p='"';i.indexOf(p)===0&&i.lastIndexOf(p)===i.length-1&&(i=i.slice(1,-1)),S[m[1]]=i}return S},u}();h.default=v}).call(this,s("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={search:function(_,g){for(var v=0,u=_.length-1,f=null,m=null;v<=u;){f=(v+u)/2|0,m=_[f];var S=g(m);if(S>0)v=f+1;else if(S<0)u=f-1;else return m}return null}};h.default=A},"./src/utils/buffer-helper.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(){}return _.isBuffered=function(g,v){try{if(g){for(var u=g.buffered,f=0;f<u.length;f++)if(v>=u.start(f)&&v<=u.end(f))return!0}}catch{}return!1},_.bufferInfo=function(g,v,u){try{if(g){var f=g.buffered,m=[],S=void 0;for(S=0;S<f.length;S++)m.push({start:f.start(S),end:f.end(S)});return this.bufferedInfo(m,v,u)}}catch{}return{len:0,start:v,end:v,nextStart:void 0}},_.bufferedInfo=function(g,v,u){var f=[],m,S,i,p,y;for(g.sort(function(c,b){var x=c.start-b.start;return x||b.end-c.end}),y=0;y<g.length;y++){var o=f.length;if(o){var l=f[o-1].end;g[y].start-l<u?g[y].end>l&&(f[o-1].end=g[y].end):f.push(g[y])}else f.push(g[y])}for(y=0,m=0,S=i=v;y<f.length;y++){var t=f[y].start,n=f[y].end;if(v+u>=t&&v<n)S=t,i=n,m=i-v;else if(v+u<t){p=t;break}}return{len:m,start:S,end:i,nextStart:p}},_}();h.BufferHelper=A},"./src/utils/cea-608-parser.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},_=function(x){var a=x;return A.hasOwnProperty(x)&&(a=A[x]),String.fromCharCode(a)},g=15,v=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},f={17:2,18:4,21:6,22:8,23:10,19:13,20:15},m={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},S={25:2,26:4,29:6,30:8,31:10,27:13,28:15},i=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(x){this.time=x},log:function(x,a){var d=this.verboseFilter[x];this.verboseLevel>=d}},y=function(x){for(var a=[],d=0;d<x.length;d++)a.push(x[d].toString(16));return a},o=function(){function x(a,d,C,T,L){this.foreground=a||"white",this.underline=d||!1,this.italics=C||!1,this.background=T||"black",this.flash=L||!1}return x.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},x.prototype.setStyles=function(a){for(var d=["foreground","underline","italics","background","flash"],C=0;C<d.length;C++){var T=d[C];a.hasOwnProperty(T)&&(this[T]=a[T])}},x.prototype.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},x.prototype.equals=function(a){return this.foreground===a.foreground&&this.underline===a.underline&&this.italics===a.italics&&this.background===a.background&&this.flash===a.flash},x.prototype.copy=function(a){this.foreground=a.foreground,this.underline=a.underline,this.italics=a.italics,this.background=a.background,this.flash=a.flash},x.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},x}(),l=function(){function x(a,d,C,T,L,R){this.uchar=a||" ",this.penState=new o(d,C,T,L,R)}return x.prototype.reset=function(){this.uchar=" ",this.penState.reset()},x.prototype.setChar=function(a,d){this.uchar=a,this.penState.copy(d)},x.prototype.setPenState=function(a){this.penState.copy(a)},x.prototype.equals=function(a){return this.uchar===a.uchar&&this.penState.equals(a.penState)},x.prototype.copy=function(a){this.uchar=a.uchar,this.penState.copy(a.penState)},x.prototype.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},x}(),t=function(){function x(){this.chars=[];for(var a=0;a<v;a++)this.chars.push(new l);this.pos=0,this.currPenState=new o}return x.prototype.equals=function(a){for(var d=!0,C=0;C<v;C++)if(!this.chars[C].equals(a.chars[C])){d=!1;break}return d},x.prototype.copy=function(a){for(var d=0;d<v;d++)this.chars[d].copy(a.chars[d])},x.prototype.isEmpty=function(){for(var a=!0,d=0;d<v;d++)if(!this.chars[d].isEmpty()){a=!1;break}return a},x.prototype.setCursor=function(a){this.pos!==a&&(this.pos=a),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},x.prototype.moveCursor=function(a){var d=this.pos+a;if(a>1)for(var C=this.pos+1;C<d+1;C++)this.chars[C].setPenState(this.currPenState);this.setCursor(d)},x.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},x.prototype.insertChar=function(a){a>=144&&this.backSpace();var d=_(a);if(this.pos>=v){p.log("ERROR","Cannot insert "+a.toString(16)+" ("+d+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(d,this.currPenState),this.moveCursor(1)},x.prototype.clearFromPos=function(a){var d;for(d=a;d<v;d++)this.chars[d].reset()},x.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},x.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},x.prototype.getTextString=function(){for(var a=[],d=!0,C=0;C<v;C++){var T=this.chars[C].uchar;T!==" "&&(d=!1),a.push(T)}return d?"":a.join("")},x.prototype.setPenStyles=function(a){this.currPenState.setStyles(a);var d=this.chars[this.pos];d.setPenState(this.currPenState)},x}(),n=function(){function x(){this.rows=[];for(var a=0;a<g;a++)this.rows.push(new t);this.currRow=g-1,this.nrRollUpRows=null,this.reset()}return x.prototype.reset=function(){for(var a=0;a<g;a++)this.rows[a].clear();this.currRow=g-1},x.prototype.equals=function(a){for(var d=!0,C=0;C<g;C++)if(!this.rows[C].equals(a.rows[C])){d=!1;break}return d},x.prototype.copy=function(a){for(var d=0;d<g;d++)this.rows[d].copy(a.rows[d])},x.prototype.isEmpty=function(){for(var a=!0,d=0;d<g;d++)if(!this.rows[d].isEmpty()){a=!1;break}return a},x.prototype.backSpace=function(){var a=this.rows[this.currRow];a.backSpace()},x.prototype.clearToEndOfRow=function(){var a=this.rows[this.currRow];a.clearToEndOfRow()},x.prototype.insertChar=function(a){var d=this.rows[this.currRow];d.insertChar(a)},x.prototype.setPen=function(a){var d=this.rows[this.currRow];d.setPenStyles(a)},x.prototype.moveCursor=function(a){var d=this.rows[this.currRow];d.moveCursor(a)},x.prototype.setCursor=function(a){p.log("INFO","setCursor: "+a);var d=this.rows[this.currRow];d.setCursor(a)},x.prototype.setPAC=function(a){p.log("INFO","pacData = "+JSON.stringify(a));var d=a.row-1;if(this.nrRollUpRows&&d<this.nrRollUpRows-1&&(d=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==d){for(var C=0;C<g;C++)this.rows[C].clear();var T=this.currRow+1-this.nrRollUpRows,L=this.lastOutputScreen;if(L){var R=L.rows[T].cueStartTime;if(R&&R<p.time)for(var C=0;C<this.nrRollUpRows;C++)this.rows[d-this.nrRollUpRows+C+1].copy(L.rows[T+C])}}this.currRow=d;var O=this.rows[this.currRow];if(a.indent!==null){var j=a.indent,D=Math.max(j-1,0);O.setCursor(a.indent),a.color=O.chars[D].penState.foreground}var w={foreground:a.color,underline:a.underline,italics:a.italics,background:"black",flash:!1};this.setPen(w)},x.prototype.setBkgData=function(a){p.log("INFO","bkgData = "+JSON.stringify(a)),this.backSpace(),this.setPen(a),this.insertChar(32)},x.prototype.setRollUpRows=function(a){this.nrRollUpRows=a},x.prototype.rollUp=function(){if(this.nrRollUpRows===null){p.log("DEBUG","roll_up but nrRollUpRows not set yet");return}p.log("TEXT",this.getDisplayText());var a=this.currRow+1-this.nrRollUpRows,d=this.rows.splice(a,1)[0];d.clear(),this.rows.splice(this.currRow,0,d),p.log("INFO","Rolling up")},x.prototype.getDisplayText=function(a){a=a||!1;for(var d=[],C="",T=-1,L=0;L<g;L++){var R=this.rows[L].getTextString();R&&(T=L+1,a?d.push("Row "+T+": '"+R+"'"):d.push(R.trim()))}return d.length>0&&(a?C="["+d.join(" | ")+"]":C=d.join(`
`)),C},x.prototype.getTextAndFormat=function(){return this.rows},x}(),c=function(){function x(a,d){this.chNr=a,this.outputFilter=d,this.mode=null,this.verbose=0,this.displayedMemory=new n,this.nonDisplayedMemory=new n,this.lastOutputScreen=new n,this.currRollUpRow=this.displayedMemory.rows[g-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return x.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[g-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},x.prototype.getHandler=function(){return this.outputFilter},x.prototype.setHandler=function(a){this.outputFilter=a},x.prototype.setPAC=function(a){this.writeScreen.setPAC(a)},x.prototype.setBkgData=function(a){this.writeScreen.setBkgData(a)},x.prototype.setMode=function(a){a!==this.mode&&(this.mode=a,p.log("INFO","MODE="+a),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=a)},x.prototype.insertChars=function(a){for(var d=0;d<a.length;d++)this.writeScreen.insertChar(a[d]);var C=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",C+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},x.prototype.ccRCL=function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},x.prototype.ccBS=function(){p.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},x.prototype.ccAOF=function(){},x.prototype.ccAON=function(){},x.prototype.ccDER=function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},x.prototype.ccRU=function(a){p.log("INFO","RU("+a+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(a)},x.prototype.ccFON=function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},x.prototype.ccRDC=function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},x.prototype.ccTR=function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")},x.prototype.ccRTD=function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")},x.prototype.ccEDM=function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},x.prototype.ccCR=function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},x.prototype.ccENM=function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},x.prototype.ccEOC=function(){if(p.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var a=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=a,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},x.prototype.ccTO=function(a){p.log("INFO","TO("+a+") - Tab Offset"),this.writeScreen.moveCursor(a)},x.prototype.ccMIDROW=function(a){var d={flash:!1};if(d.underline=a%2===1,d.italics=a>=46,d.italics)d.foreground="white";else{var C=Math.floor(a/2)-16,T=["white","green","blue","cyan","red","yellow","magenta"];d.foreground=T[C]}p.log("INFO","MIDROW: "+JSON.stringify(d)),this.writeScreen.setPen(d)},x.prototype.outputDataUpdate=function(a){a===void 0&&(a=!1);var d=p.time;d!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=d:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,d,this.lastOutputScreen),a===!0&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:d),this.lastOutputScreen.copy(this.displayedMemory))},x.prototype.cueSplitAtTime=function(a){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.displayedMemory),this.cueStartTime=a))},x}(),b=function(){function x(a,d,C){this.field=a||1,this.outputs=[d,C],this.channels=[new c(1,d),new c(2,C)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return x.prototype.getHandler=function(a){return this.channels[a].getHandler()},x.prototype.setHandler=function(a,d){this.channels[a].setHandler(d)},x.prototype.addData=function(a,d){var C,T,L,R=!1;this.lastTime=a,p.setTime(a);for(var O=0;O<d.length;O+=2){if(T=d[O]&127,L=d[O+1]&127,T===0&&L===0){this.dataCounters.padding+=2;continue}else p.log("DATA","["+y([d[O],d[O+1]])+"] -> ("+y([T,L])+")");if(C=this.parseCmd(T,L),C||(C=this.parseMidrow(T,L)),C||(C=this.parsePAC(T,L)),C||(C=this.parseBackgroundAttributes(T,L)),!C&&(R=this.parseChars(T,L),R))if(this.currChNr&&this.currChNr>=0){var j=this.channels[this.currChNr-1];j.insertChars(R)}else p.log("WARNING","No channel found yet. TEXT-MODE?");C?this.dataCounters.cmd+=2:R?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+y([T,L])+" orig: "+y([d[O],d[O+1]])))}},x.prototype.parseCmd=function(a,d){var C=null,T=(a===20||a===28)&&d>=32&&d<=47,L=(a===23||a===31)&&d>=33&&d<=35;if(!(T||L))return!1;if(a===this.lastCmdA&&d===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+y([a,d])+") is dropped"),!0;a===20||a===23?C=1:C=2;var R=this.channels[C-1];return a===20||a===28?d===32?R.ccRCL():d===33?R.ccBS():d===34?R.ccAOF():d===35?R.ccAON():d===36?R.ccDER():d===37?R.ccRU(2):d===38?R.ccRU(3):d===39?R.ccRU(4):d===40?R.ccFON():d===41?R.ccRDC():d===42?R.ccTR():d===43?R.ccRTD():d===44?R.ccEDM():d===45?R.ccCR():d===46?R.ccENM():d===47&&R.ccEOC():R.ccTO(d-32),this.lastCmdA=a,this.lastCmdB=d,this.currChNr=C,!0},x.prototype.parseMidrow=function(a,d){var C=null;if((a===17||a===25)&&d>=32&&d<=47){if(a===17?C=1:C=2,C!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var T=this.channels[C-1];return T.ccMIDROW(d),p.log("DEBUG","MIDROW ("+y([a,d])+")"),!0}return!1},x.prototype.parsePAC=function(a,d){var C=null,T=null,L=(a>=17&&a<=23||a>=25&&a<=31)&&d>=64&&d<=127,R=(a===16||a===24)&&d>=64&&d<=95;if(!(L||R))return!1;if(a===this.lastCmdA&&d===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;C=a<=23?1:2,d>=64&&d<=95?T=C===1?u[a]:m[a]:T=C===1?f[a]:S[a];var O=this.interpretPAC(T,d),j=this.channels[C-1];return j.setPAC(O),this.lastCmdA=a,this.lastCmdB=d,this.currChNr=C,!0},x.prototype.interpretPAC=function(a,d){var C=d,T={color:null,italics:!1,indent:null,underline:!1,row:a};return d>95?C=d-96:C=d-64,T.underline=(C&1)===1,C<=13?T.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(C/2)]:C<=15?(T.italics=!0,T.color="white"):T.indent=Math.floor((C-16)/2)*4,T},x.prototype.parseChars=function(a,d){var C=null,T=null,L=null;if(a>=25?(C=2,L=a-8):(C=1,L=a),L>=17&&L<=19){var R=d;L===17?R=d+80:L===18?R=d+112:R=d+144,p.log("INFO","Special char '"+_(R)+"' in channel "+C),T=[R]}else a>=32&&a<=127&&(T=d===0?[a]:[a,d]);if(T){var O=y(T);p.log("DEBUG","Char codes =  "+O.join(",")),this.lastCmdA=null,this.lastCmdB=null}return T},x.prototype.parseBackgroundAttributes=function(a,d){var C,T,L,R,O=(a===16||a===24)&&d>=32&&d<=47,j=(a===23||a===31)&&d>=45&&d<=47;return O||j?(C={},a===16||a===24?(T=Math.floor((d-32)/2),C.background=i[T],d%2===1&&(C.background=C.background+"_semi")):d===45?C.background="transparent":(C.foreground="black",d===47&&(C.underline=!0)),L=a<24?1:2,R=this.channels[L-1],R.setBkgData(C),this.lastCmdA=null,this.lastCmdB=null,!0):!1},x.prototype.reset=function(){for(var a=0;a<this.channels.length;a++)this.channels[a]&&this.channels[a].reset();this.lastCmdA=null,this.lastCmdB=null},x.prototype.cueSplitAtTime=function(a){for(var d=0;d<this.channels.length;d++)this.channels[d]&&this.channels[d].cueSplitAtTime(a)},x}();h.default=b},"./src/utils/codecs.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function _(v,u){var f=A[u];return!!f&&f[v.slice(0,4)]===!0}h.isCodecType=_;function g(v,u){return window.MediaSource.isTypeSupported((u||"video")+'/mp4;codecs="'+v+'"')}h.isCodecSupportedInMp4=g},"./src/utils/cues.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/vttparser.js");function _(g,v,u,f){for(var m,S,i,p,y,o=window.VTTCue||window.TextTrackCue,l=0;l<f.rows.length;l++)if(m=f.rows[l],i=!0,p=0,y="",!m.isEmpty()){for(var t=0;t<m.chars.length;t++)m.chars[t].uchar.match(/\s/)&&i?p++:(y+=m.chars[t].uchar,i=!1);m.cueStartTime=v,v===u&&(u+=1e-4),S=new o(v,u,A.fixLineBreaks(y.trim())),p>=16?p--:p++,navigator.userAgent.match(/Firefox\//)?S.line=l+1:S.line=l>7?l-2:l+1,S.align="left",S.position=Math.max(0,Math.min(100,100*(p/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),g.addCue(S)}}h.newCue=_},"./src/utils/discontinuities.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/utils/binary-search.js"),g=s("./src/utils/logger.js");function v(o,l){for(var t=null,n=0;n<o.length;n+=1){var c=o[n];if(c&&c.cc===l){t=c;break}}return t}h.findFirstFragWithCC=v;function u(o,l){return _.default.search(o,function(t){return t.cc<l?1:t.cc>l?-1:0})}h.findFragWithCC=u;function f(o,l,t){var n=!1;return l&&l.details&&t&&(t.endCC>t.startCC||o&&o.cc<t.startCC)&&(n=!0),n}h.shouldAlignOnDiscontinuities=f;function m(o,l){var t=o.fragments,n=l.fragments;if(!n.length||!t.length){g.logger.log("No fragments to align");return}var c=v(t,n[0].cc);if(!c||c&&!c.startPTS){g.logger.log("No frag in previous level to align on");return}return c}h.findDiscontinuousReferenceFrag=m;function S(o,l){l.fragments.forEach(function(t){if(t){var n=t.start+o;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),l.PTSKnown=!0}h.adjustPts=S;function i(o,l,t){p(o,t,l),!t.PTSKnown&&l&&y(t,l.details)}h.alignStream=i;function p(o,l,t){if(f(o,t,l)){var n=m(t.details,l);n&&(g.logger.log("Adjusting PTS using last level due to CC increase within current level"),S(n.start,l))}}h.alignDiscontinuities=p;function y(o,l){if(l&&l.fragments.length){if(!o.hasProgramDateTime||!l.hasProgramDateTime)return;var t=l.fragments[0].programDateTime,n=o.fragments[0].programDateTime,c=(n-t)/1e3+l.fragments[0].start;A.isFinite(c)&&(g.logger.log("adjusting PTS using programDateTime delta, sliding:"+c.toFixed(3)),S(c,o))}}h.alignPDT=y}).call(this,s("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/ewma.js"),_=function(){function g(v,u,f,m){this.hls=v,this.defaultEstimate_=m,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new A.default(u),this.fast_=new A.default(f)}return g.prototype.sample=function(v,u){v=Math.max(v,this.minDelayMs_);var f=8e3*u/v,m=v/1e3;this.fast_.sample(m,f),this.slow_.sample(m,f)},g.prototype.canEstimate=function(){var v=this.fast_;return v&&v.getTotalWeight()>=this.minWeight_},g.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},g.prototype.destroy=function(){},g}();h.default=_},"./src/utils/ewma.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(g){this.alpha_=g?Math.exp(Math.log(.5)/g):0,this.estimate_=0,this.totalWeight_=0}return _.prototype.sample=function(g,v){var u=Math.pow(this.alpha_,g);this.estimate_=v*(1-u)+u*this.estimate_,this.totalWeight_+=g},_.prototype.getTotalWeight=function(){return this.totalWeight_},_.prototype.getEstimate=function(){if(this.alpha_){var g=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/g}else return this.estimate_},_}();h.default=A},"./src/utils/get-self-scope.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});function A(){return typeof window>"u"?self:window}h.getSelfScope=A},"./src/utils/logger.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/get-self-scope.js");function _(){}var g={trace:_,debug:_,log:_,warn:_,info:_,error:_},v=g;function u(i,p){return p="["+i+"] > "+p,p}var f=A.getSelfScope();function m(i){var p=f.console[i];return p?function(){for(var y=[],o=0;o<arguments.length;o++)y[o]=arguments[o];y[0]&&(y[0]=u(i,y[0])),p.apply(f.console,y)}:_}function S(i){for(var p=[],y=1;y<arguments.length;y++)p[y-1]=arguments[y];p.forEach(function(o){v[o]=i[o]?i[o].bind(i):m(o)})}h.enableLogs=function(i){if(i===!0||typeof i=="object"){S(i,"debug","log","info","warn","error");try{v.log()}catch{v=g}}else v=g},h.logger=v},"./src/utils/mediakeys-helper.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){return typeof window<"u"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();h.requestMediaKeySystemAccess=A},"./src/utils/mediasource-helper.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});function A(){if(typeof window<"u")return window.MediaSource||window.WebKitMediaSource}h.getMediaSource=A},"./src/utils/output-filter.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=function(){function _(g,v){this.timelineController=g,this.trackName=v,this.startTime=null,this.endTime=null,this.screen=null}return _.prototype.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},_.prototype.newCue=function(g,v,u){(this.startTime===null||this.startTime>g)&&(this.startTime=g),this.endTime=v,this.screen=u,this.timelineController.createCaptionsTrack(this.trackName)},_}();h.default=A},"./src/utils/texttrack-utils.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});function A(g,v){var u=null;try{u=new window.Event("addtrack")}catch{u=document.createEvent("Event"),u.initEvent("addtrack",!1,!1)}u.track=g,v.dispatchEvent(u)}h.sendAddTrackEvent=A;function _(g){if(g&&g.cues)for(;g.cues.length>0;)g.removeCue(g.cues[0])}h.clearCurrentCues=_},"./src/utils/time-ranges.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A={toString:function(_){for(var g="",v=_.length,u=0;u<v;u++)g+="["+_.start(u).toFixed(3)+","+_.end(u).toFixed(3)+"]";return g}};h.default=A},"./src/utils/vttcue.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(){if(typeof window<"u"&&window.VTTCue)return window.VTTCue;var A="auto",_={"":!0,lr:!0,rl:!0},g={start:!0,middle:!0,end:!0,left:!0,right:!0};function v(S){if(typeof S!="string")return!1;var i=_[S.toLowerCase()];return i?S.toLowerCase():!1}function u(S){if(typeof S!="string")return!1;var i=g[S.toLowerCase()];return i?S.toLowerCase():!1}function f(S){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var y in p)S[y]=p[y]}return S}function m(S,i,p){var y=this,o=function(){if(!(typeof navigator>"u"))return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};o?y=document.createElement("custom"):l.enumerable=!0,y.hasBeenReset=!1;var t="",n=!1,c=S,b=i,x=p,a=null,d="",C=!0,T="auto",L="start",R=50,O="middle",j=50,D="middle";if(Object.defineProperty(y,"id",f({},l,{get:function(){return t},set:function(w){t=""+w}})),Object.defineProperty(y,"pauseOnExit",f({},l,{get:function(){return n},set:function(w){n=!!w}})),Object.defineProperty(y,"startTime",f({},l,{get:function(){return c},set:function(w){if(typeof w!="number")throw new TypeError("Start time must be set to a number.");c=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"endTime",f({},l,{get:function(){return b},set:function(w){if(typeof w!="number")throw new TypeError("End time must be set to a number.");b=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"text",f({},l,{get:function(){return x},set:function(w){x=""+w,this.hasBeenReset=!0}})),Object.defineProperty(y,"region",f({},l,{get:function(){return a},set:function(w){a=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"vertical",f({},l,{get:function(){return d},set:function(w){var F=v(w);if(F===!1)throw new SyntaxError("An invalid or illegal string was specified.");d=F,this.hasBeenReset=!0}})),Object.defineProperty(y,"snapToLines",f({},l,{get:function(){return C},set:function(w){C=!!w,this.hasBeenReset=!0}})),Object.defineProperty(y,"line",f({},l,{get:function(){return T},set:function(w){if(typeof w!="number"&&w!==A)throw new SyntaxError("An invalid number or illegal string was specified.");T=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"lineAlign",f({},l,{get:function(){return L},set:function(w){var F=u(w);if(!F)throw new SyntaxError("An invalid or illegal string was specified.");L=F,this.hasBeenReset=!0}})),Object.defineProperty(y,"position",f({},l,{get:function(){return R},set:function(w){if(w<0||w>100)throw new Error("Position must be between 0 and 100.");R=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"positionAlign",f({},l,{get:function(){return O},set:function(w){var F=u(w);if(!F)throw new SyntaxError("An invalid or illegal string was specified.");O=F,this.hasBeenReset=!0}})),Object.defineProperty(y,"size",f({},l,{get:function(){return j},set:function(w){if(w<0||w>100)throw new Error("Size must be between 0 and 100.");j=w,this.hasBeenReset=!0}})),Object.defineProperty(y,"align",f({},l,{get:function(){return D},set:function(w){var F=u(w);if(!F)throw new SyntaxError("An invalid or illegal string was specified.");D=F,this.hasBeenReset=!0}})),y.displayState=void 0,o)return y}return m.prototype.getCueAsHTML=function(){var S=window.WebVTT;return S.convertCueToDOMTree(window,this.text)},m}()},"./src/utils/vttparser.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/vttcue.js"),_=function(){return{decode:function(o){if(!o)return"";if(typeof o!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(o))}}};function g(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new _,this.regionList=[]}function v(y){function o(t,n,c,b){return(t|0)*3600+(n|0)*60+(c|0)+(b|0)/1e3}var l=y.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return l?l[3]?o(l[1],l[2],l[3].replace(":",""),l[4]):l[1]>59?o(l[1],l[2],0,l[4]):o(0,l[1],l[2],l[4]):null}function u(){this.values=Object.create(null)}u.prototype={set:function(y,o){!this.get(y)&&o!==""&&(this.values[y]=o)},get:function(y,o,l){return l?this.has(y)?this.values[y]:o[l]:this.has(y)?this.values[y]:o},has:function(y){return y in this.values},alt:function(y,o,l){for(var t=0;t<l.length;++t)if(o===l[t]){this.set(y,o);break}},integer:function(y,o){/^-?\d+$/.test(o)&&this.set(y,parseInt(o,10))},percent:function(y,o){return o.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(o=parseFloat(o),o>=0&&o<=100)?(this.set(y,o),!0):!1}};function f(y,o,l,t){var n=t?y.split(t):[y];for(var c in n)if(typeof n[c]=="string"){var b=n[c].split(l);if(b.length===2){var x=b[0],a=b[1];o(x,a)}}}var m=new A.default(0,0,0),S=m.align==="middle"?"middle":"center";function i(y,o,l){var t=y;function n(){var x=v(y);if(x===null)throw new Error("Malformed timestamp: "+t);return y=y.replace(/^[^\sa-zA-Z-]+/,""),x}function c(x,a){var d=new u;f(x,function(L,R){switch(L){case"region":for(var O=l.length-1;O>=0;O--)if(l[O].id===R){d.set(L,l[O].region);break}break;case"vertical":d.alt(L,R,["rl","lr"]);break;case"line":var j=R.split(","),D=j[0];d.integer(L,D),d.percent(L,D)&&d.set("snapToLines",!1),d.alt(L,D,["auto"]),j.length===2&&d.alt("lineAlign",j[1],["start",S,"end"]);break;case"position":j=R.split(","),d.percent(L,j[0]),j.length===2&&d.alt("positionAlign",j[1],["start",S,"end","line-left","line-right","auto"]);break;case"size":d.percent(L,R);break;case"align":d.alt(L,R,["start",S,"end","left","right"]);break}},/:/,/\s/),a.region=d.get("region",null),a.vertical=d.get("vertical","");var C=d.get("line","auto");C==="auto"&&m.line===-1&&(C=-1),a.line=C,a.lineAlign=d.get("lineAlign","start"),a.snapToLines=d.get("snapToLines",!0),a.size=d.get("size",100),a.align=d.get("align",S);var T=d.get("position","auto");T==="auto"&&m.position===50&&(T=a.align==="start"||a.align==="left"?0:a.align==="end"||a.align==="right"?100:50),a.position=T}function b(){y=y.replace(/^\s+/,"")}if(b(),o.startTime=n(),b(),y.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+t);y=y.substr(3),b(),o.endTime=n(),b(),c(y,o)}function p(y){return y.replace(/<br(?: \/)?>/gi,`
`)}h.fixLineBreaks=p,g.prototype={parse:function(y){var o=this;y&&(o.buffer+=o.decoder.decode(y,{stream:!0}));function l(){var a=o.buffer,d=0;for(a=p(a);d<a.length&&a[d]!=="\r"&&a[d]!==`
`;)++d;var C=a.substr(0,d);return a[d]==="\r"&&++d,a[d]===`
`&&++d,o.buffer=a.substr(d),C}function t(a){f(a,function(d,C){},/:/)}try{var n=void 0;if(o.state==="INITIAL"){if(!/\r\n|\n/.test(o.buffer))return this;n=l();var c=n.match(/^()?WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new Error("Malformed WebVTT signature.");o.state="HEADER"}for(var b=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(b?b=!1:n=l(),o.state){case"HEADER":/:/.test(n)?t(n):n||(o.state="ID");continue;case"NOTE":n||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){o.state="NOTE";break}if(!n)continue;if(o.cue=new A.default(0,0,""),o.state="CUE",n.indexOf("-->")===-1){o.cue.id=n;continue}case"CUE":try{i(n,o.cue,o.regionList)}catch{o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var x=n.indexOf("-->")!==-1;if(!n||x&&(b=!0)){o.oncue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}o.cue.text&&(o.cue.text+=`
`),o.cue.text+=n;continue;case"BADCUE":n||(o.state="ID");continue}}}catch{o.state==="CUETEXT"&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state=o.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var y=this;try{if(y.buffer+=y.decoder.decode(),(y.cue||y.state==="HEADER")&&(y.buffer+=`

`,y.parse()),y.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(o){throw o}return y.onflush&&y.onflush(),this}},h.default=g},"./src/utils/webvtt-parser.js":function(r,h,s){(function(A){Object.defineProperty(h,"__esModule",{value:!0});var _=s("./src/utils/vttparser.js"),g=s("./src/demux/id3.js"),v=function(i,p,y){return i.substr(y||0,p.length)===p},u=function(i){var p=parseInt(i.substr(-3)),y=parseInt(i.substr(-6,2)),o=parseInt(i.substr(-9,2)),l=i.length>9?parseInt(i.substr(0,i.indexOf(":"))):0;return!A.isFinite(p)||!A.isFinite(y)||!A.isFinite(o)||!A.isFinite(l)?-1:(p+=1e3*y,p+=60*1e3*o,p+=60*60*1e3*l,p)},f=function(i){for(var p=5381,y=i.length;y;)p=p*33^i.charCodeAt(--y);return(p>>>0).toString()},m=function(i,p,y){var o=i[p],l=i[o.prevCC];if(!l||!l.new&&o.new){i.ccOffset=i.presentationOffset=o.start,o.new=!1;return}for(;l&&l.new;)i.ccOffset+=o.start-l.start,o.new=!1,o=l,l=i[o.prevCC];i.presentationOffset=y},S={parse:function(i,p,y,o,l,t){var n=/\r\n|\n\r|\n|\r/g,c=g.utf8ArrayToStr(new Uint8Array(i)).trim().replace(n,`
`).split(`
`),b="00:00.000",x=0,a=0,d=0,C=[],T,L=!0,R=new _.default;R.oncue=function(O){var j=y[o],D=y.ccOffset;j&&j.new&&(a!==void 0?D=y.ccOffset=j.start:m(y,o,d)),d&&(D=d-y.presentationOffset),O.startTime+=D-a,O.endTime+=D-a,O.id=f(O.startTime.toString())+f(O.endTime.toString())+f(O.text),O.text=decodeURIComponent(encodeURIComponent(O.text)),O.endTime>0&&C.push(O)},R.onparsingerror=function(O){T=O},R.onflush=function(){if(T&&t){t(T);return}l(C)},c.forEach(function(O){if(L)if(v(O,"X-TIMESTAMP-MAP=")){L=!1,O.substr(16).split(",").forEach(function(j){v(j,"LOCAL:")?b=j.substr(6):v(j,"MPEGTS:")&&(x=parseInt(j.substr(7)))});try{p+(y[o].start*9e4||0)<0&&(p+=8589934592),x-=p,a=u(b)/1e3,d=x/9e4,a===-1&&(T=new Error("Malformed X-TIMESTAMP-MAP: "+O))}catch{T=new Error("Malformed X-TIMESTAMP-MAP: "+O)}return}else O===""&&(L=!1);R.parse(O+`
`)}),R.flush()}};h.default=S}).call(this,s("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(r,h,s){Object.defineProperty(h,"__esModule",{value:!0});var A=s("./src/utils/logger.js"),_=window.performance,g=window.XMLHttpRequest,v=function(){function u(f){f&&f.xhrSetup&&(this.xhrSetup=f.xhrSetup)}return u.prototype.destroy=function(){this.abort(),this.loader=null},u.prototype.abort=function(){var f=this.loader;f&&f.readyState!==4&&(this.stats.aborted=!0,f.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},u.prototype.load=function(f,m,S){this.context=f,this.config=m,this.callbacks=S,this.stats={trequest:_.now(),retry:0},this.retryDelay=m.retryDelay,this.loadInternal()},u.prototype.loadInternal=function(){var f,m=this.context;f=this.loader=new g;var S=this.stats;S.tfirst=0,S.loaded=0;var i=this.xhrSetup;try{if(i)try{i(f,m.url)}catch{f.open("GET",m.url,!0),i(f,m.url)}f.readyState||f.open("GET",m.url,!0)}catch(p){this.callbacks.onError({code:f.status,text:p.message},m,f);return}m.rangeEnd&&f.setRequestHeader("Range","bytes="+m.rangeStart+"-"+(m.rangeEnd-1)),f.onreadystatechange=this.readystatechange.bind(this),f.onprogress=this.loadprogress.bind(this),f.responseType=m.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),f.send()},u.prototype.readystatechange=function(f){var m=f.currentTarget,S=m.readyState,i=this.stats,p=this.context,y=this.config;if(!i.aborted&&S>=2)if(window.clearTimeout(this.requestTimeout),i.tfirst===0&&(i.tfirst=Math.max(_.now(),i.trequest)),S===4){var o=m.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,_.now());var l=void 0,t=void 0;p.responseType==="arraybuffer"?(l=m.response,t=l.byteLength):(l=m.responseText,t=l.length),i.loaded=i.total=t;var n={url:m.responseURL,data:l};this.callbacks.onSuccess(n,i,p,m)}else i.retry>=y.maxRetry||o>=400&&o<499?(A.logger.error(o+" while loading "+p.url),this.callbacks.onError({code:o,text:m.statusText},p,m)):(A.logger.warn(o+" while loading "+p.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,y.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),y.timeout)},u.prototype.loadtimeout=function(){A.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},u.prototype.loadprogress=function(f){var m=f.currentTarget,S=this.stats;S.loaded=f.loaded,f.lengthComputable&&(S.total=f.total);var i=this.callbacks.onProgress;i&&i(S,this.context,null,m)},u}();h.default=v}}).default})},"./node_modules/node-libs-browser/node_modules/process/browser.js":function(P,E){var e=P.exports={},r,h;function s(){throw new Error("setTimeout has not been defined")}function A(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=s}catch{r=s}try{typeof clearTimeout=="function"?h=clearTimeout:h=A}catch{h=A}})();function _(o){if(r===setTimeout)return setTimeout(o,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(o,0);try{return r(o,0)}catch{try{return r.call(null,o,0)}catch{return r.call(this,o,0)}}}function g(o){if(h===clearTimeout)return clearTimeout(o);if((h===A||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(o);try{return h(o)}catch{try{return h.call(null,o)}catch{return h.call(this,o)}}}var v=[],u=!1,f,m=-1;function S(){!u||!f||(u=!1,f.length?v=f.concat(v):m=-1,v.length&&i())}function i(){if(!u){var o=_(S);u=!0;for(var l=v.length;l;){for(f=v,v=[];++m<l;)f&&f[m].run();m=-1,l=v.length}f=null,u=!1,g(o)}}e.nextTick=function(o){var l=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)l[t-1]=arguments[t];v.push(new p(o,l)),v.length===1&&!u&&_(i)};function p(o,l){this.fun=o,this.array=l}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function y(){}e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.binding=function(o){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(o){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},"./node_modules/style-loader/lib/addStyles.js":function(P,E,e){var r={},h=function(a){var d;return function(){return typeof d>"u"&&(d=a.apply(this,arguments)),d}},s=h(function(){return window&&document&&document.all&&!window.atob}),A=function(a){return document.querySelector(a)},_=function(a){var d={};return function(C){if(typeof C=="function")return C();if(typeof d[C]>"u"){var T=A.call(this,C);if(window.HTMLIFrameElement&&T instanceof window.HTMLIFrameElement)try{T=T.contentDocument.head}catch{T=null}d[C]=T}return d[C]}}(),g=null,v=0,u=[],f=e("./node_modules/style-loader/lib/urls.js");P.exports=function(a,d){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");d=d||{},d.attrs=typeof d.attrs=="object"?d.attrs:{},!d.singleton&&typeof d.singleton!="boolean"&&(d.singleton=s()),d.insertInto||(d.insertInto="head"),d.insertAt||(d.insertAt="bottom");var C=S(a,d);return m(C,d),function(L){for(var R=[],O=0;O<C.length;O++){var j=C[O],D=r[j.id];D.refs--,R.push(D)}if(L){var w=S(L,d);m(w,d)}for(var O=0;O<R.length;O++){var D=R[O];if(D.refs===0){for(var F=0;F<D.parts.length;F++)D.parts[F]();delete r[D.id]}}}};function m(a,d){for(var C=0;C<a.length;C++){var T=a[C],L=r[T.id];if(L){L.refs++;for(var R=0;R<L.parts.length;R++)L.parts[R](T.parts[R]);for(;R<T.parts.length;R++)L.parts.push(t(T.parts[R],d))}else{for(var O=[],R=0;R<T.parts.length;R++)O.push(t(T.parts[R],d));r[T.id]={id:T.id,refs:1,parts:O}}}}function S(a,d){for(var C=[],T={},L=0;L<a.length;L++){var R=a[L],O=d.base?R[0]+d.base:R[0],j=R[1],D=R[2],w=R[3],F={css:j,media:D,sourceMap:w};T[O]?T[O].parts.push(F):C.push(T[O]={id:O,parts:[F]})}return C}function i(a,d){var C=_(a.insertInto);if(!C)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var T=u[u.length-1];if(a.insertAt==="top")T?T.nextSibling?C.insertBefore(d,T.nextSibling):C.appendChild(d):C.insertBefore(d,C.firstChild),u.push(d);else if(a.insertAt==="bottom")C.appendChild(d);else if(typeof a.insertAt=="object"&&a.insertAt.before){var L=_(a.insertInto+" "+a.insertAt.before);C.insertBefore(d,L)}else throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`)}function p(a){if(a.parentNode===null)return!1;a.parentNode.removeChild(a);var d=u.indexOf(a);d>=0&&u.splice(d,1)}function y(a){var d=document.createElement("style");return a.attrs.type="text/css",l(d,a.attrs),i(a,d),d}function o(a){var d=document.createElement("link");return a.attrs.type="text/css",a.attrs.rel="stylesheet",l(d,a.attrs),i(a,d),d}function l(a,d){Object.keys(d).forEach(function(C){a.setAttribute(C,d[C])})}function t(a,d){var C,T,L,R;if(d.transform&&a.css)if(R=d.transform(a.css),R)a.css=R;else return function(){};if(d.singleton){var O=v++;C=g||(g=y(d)),T=c.bind(null,C,O,!1),L=c.bind(null,C,O,!0)}else a.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(C=o(d),T=x.bind(null,C,d),L=function(){p(C),C.href&&URL.revokeObjectURL(C.href)}):(C=y(d),T=b.bind(null,C),L=function(){p(C)});return T(a),function(D){if(D){if(D.css===a.css&&D.media===a.media&&D.sourceMap===a.sourceMap)return;T(a=D)}else L()}}var n=function(){var a=[];return function(d,C){return a[d]=C,a.filter(Boolean).join(`
`)}}();function c(a,d,C,T){var L=C?"":T.css;if(a.styleSheet)a.styleSheet.cssText=n(d,L);else{var R=document.createTextNode(L),O=a.childNodes;O[d]&&a.removeChild(O[d]),O.length?a.insertBefore(R,O[d]):a.appendChild(R)}}function b(a,d){var C=d.css,T=d.media;if(T&&a.setAttribute("media",T),a.styleSheet)a.styleSheet.cssText=C;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(C))}}function x(a,d,C){var T=C.css,L=C.sourceMap,R=d.convertToAbsoluteUrls===void 0&&L;(d.convertToAbsoluteUrls||R)&&(T=f(T)),L&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(L))))+" */");var O=new Blob([T],{type:"text/css"}),j=a.href;a.href=URL.createObjectURL(O),j&&URL.revokeObjectURL(j)}},"./node_modules/style-loader/lib/urls.js":function(P,E){P.exports=function(e){var r=typeof window<"u"&&window.location;if(!r)throw new Error("fixUrls requires window.location");if(!e||typeof e!="string")return e;var h=r.protocol+"//"+r.host,s=h+r.pathname.replace(/\/[^\/]*$/,"/"),A=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(_,g){var v=g.trim().replace(/^"(.*)"$/,function(f,m){return m}).replace(/^'(.*)'$/,function(f,m){return m});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(v))return _;var u;return v.indexOf("//")===0?u=v:v.indexOf("/")===0?u=h+v:u=s+v.replace(/^\.\//,""),"url("+JSON.stringify(u)+")"});return A}},"./src/base/base_object.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=i(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=i(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=i(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=i(v),f=e("./src/base/utils.js"),m=e("./src/base/events.js"),S=i(m);function i(y){return y&&y.__esModule?y:{default:y}}var p=function(y){(0,u.default)(o,y),(0,g.default)(o,[{key:"options",get:function(){return this._options}}]);function o(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,h.default)(this,o);var t=(0,A.default)(this,y.call(this,l));return t._options=l,t.uniqueId=(0,f.uniqueId)("o"),t}return o}(S.default);E.default=p,P.exports=E.default},"./src/base/container_plugin.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=l(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=l(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=l(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=l(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=l(f),S=e("./src/base/base_object.js"),i=l(S),p=e("./src/base/utils.js"),y=e("./src/base/error_mixin.js"),o=l(y);function l(n){return n&&n.__esModule?n:{default:n}}var t=function(n){(0,m.default)(c,n),(0,u.default)(c,[{key:"playerError",get:function(){return this.container.playerError}}]);function c(b){(0,A.default)(this,c);var x=(0,g.default)(this,n.call(this,b.options));return x.container=b,x.enabled=!0,x.bindEvents(),x}return c.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},c.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},c.prototype.bindEvents=function(){},c.prototype.destroy=function(){this.stopListening()},c}(i.default);E.default=t,(0,h.default)(t.prototype,o.default),t.extend=function(n){return(0,p.extend)(t,n)},t.type="container",P.exports=E.default},"./src/base/core_plugin.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=l(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=l(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=l(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=l(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=l(f),S=e("./src/base/utils.js"),i=e("./src/base/base_object.js"),p=l(i),y=e("./src/base/error_mixin.js"),o=l(y);function l(n){return n&&n.__esModule?n:{default:n}}var t=function(n){(0,m.default)(c,n),(0,u.default)(c,[{key:"playerError",get:function(){return this.core.playerError}}]);function c(b){(0,A.default)(this,c);var x=(0,g.default)(this,n.call(this,b.options));return x.core=b,x.enabled=!0,x.bindEvents(),x}return c.prototype.bindEvents=function(){},c.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},c.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},c.prototype.getExternalInterface=function(){return{}},c.prototype.destroy=function(){this.stopListening()},c}(p.default);E.default=t,(0,h.default)(t.prototype,o.default),t.extend=function(n){return(0,S.extend)(t,n)},t.type="core",P.exports=E.default},"./src/base/error_mixin.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=v(r),s=e("./src/plugins/log/index.js"),A=v(s),_=e("./src/components/error/index.js"),g=v(_);function v(f){return f&&f.__esModule?f:{default:f}}var u={createError:function(m){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{useCodePrefix:!0},i=this.constructor&&this.constructor.type||"",p=this.name||i,y=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,o=p+":"+(m&&m.code||"unknown"),l={description:"",level:g.default.Levels.FATAL,origin:p,scope:i,raw:{}},t=(0,h.default)({},l,m,{code:S.useCodePrefix?o:m.code});if(y&&t.level==g.default.Levels.FATAL&&!t.UI){var n={title:y.t("default_error_title"),message:y.t("default_error_message")};t.UI=n}return this.playerError?this.playerError.createError(t):A.default.warn(p,"PlayerError is not defined. Error: ",t),t}};E.default=u,P.exports=E.default},"./src/base/events.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/keys.js"),h=m(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=m(s),_=e("./node_modules/babel-runtime/helpers/typeof.js"),g=m(_),v=e("./src/plugins/log/index.js"),u=m(v),f=e("./src/base/utils.js");function m(t){return t&&t.__esModule?t:{default:t}}var S=Array.prototype.slice,i=/\s+/,p=function(n,c,b,x){if(!b)return!0;if((typeof b>"u"?"undefined":(0,g.default)(b))==="object"){for(var a in b)n[c].apply(n,[a,b[a]].concat(x));return!1}if(i.test(b)){for(var d=b.split(i),C=0,T=d.length;C<T;C++)n[c].apply(n,[d[C]].concat(x));return!1}return!0},y=function(n,c,b,x){var a=void 0,d=-1,C=n.length,T=c[0],L=c[1],R=c[2];O();function O(){try{switch(c.length){case 0:for(;++d<C;)(a=n[d]).callback.call(a.ctx);return;case 1:for(;++d<C;)(a=n[d]).callback.call(a.ctx,T);return;case 2:for(;++d<C;)(a=n[d]).callback.call(a.ctx,T,L);return;case 3:for(;++d<C;)(a=n[d]).callback.call(a.ctx,T,L,R);return;default:for(;++d<C;)(a=n[d]).callback.apply(a.ctx,c);return}}catch(j){u.default.error.apply(u.default,[b,"error on event",x,"trigger","-",j]),O()}}},o=function(){function t(){(0,A.default)(this,t)}return t.prototype.on=function(c,b,x){if(!p(this,"on",c,[b,x])||!b)return this;this._events||(this._events={});var a=this._events[c]||(this._events[c]=[]);return a.push({callback:b,context:x,ctx:x||this}),this},t.prototype.once=function(c,b,x){var a=this,d=void 0;if(!p(this,"once",c,[b,x])||!b)return this;var C=function(){return a.off(c,d)};return d=function(){C(),b.apply(this,arguments)},this.on(c,d,x)},t.prototype.off=function(c,b,x){var a=void 0,d=void 0,C=void 0,T=void 0,L=void 0,R=void 0,O=void 0,j=void 0;if(!this._events||!p(this,"off",c,[b,x]))return this;if(!c&&!b&&!x)return this._events=void 0,this;for(T=c?[c]:(0,h.default)(this._events),L=0,R=T.length;L<R;L++)if(c=T[L],C=this._events[c],C){if(this._events[c]=a=[],b||x)for(O=0,j=C.length;O<j;O++)d=C[O],(b&&b!==d.callback&&b!==d.callback._callback||x&&x!==d.context)&&a.push(d);a.length||delete this._events[c]}return this},t.prototype.trigger=function(c){var b=this.name||this.constructor.name;if(u.default.debug.apply(u.default,[b].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var x=S.call(arguments,1);if(!p(this,"trigger",c,x))return this;var a=this._events[c],d=this._events.all;return a&&y(a,x,b,c),d&&y(d,arguments,b,c),this},t.prototype.stopListening=function(c,b,x){var a=this._listeningTo;if(!a)return this;var d=!b&&!x;!x&&(typeof b>"u"?"undefined":(0,g.default)(b))==="object"&&(x=this),c&&((a={})[c._listenId]=c);for(var C in a)c=a[C],c.off(b,x,this),(d||(0,h.default)(c._events).length===0)&&delete this._listeningTo[C];return this},t.register=function(c){t.Custom||(t.Custom={});var b=typeof c=="string"&&c.toUpperCase().trim();b&&!t.Custom[b]?t.Custom[b]=b.toLowerCase().split("_").map(function(x,a){return a===0?x:x=x[0].toUpperCase()+x.slice(1)}).join(""):u.default.error("Events","Error when register event: "+c)},t.listAvailableCustomEvents=function(){return t.Custom||(t.Custom={}),(0,h.default)(t.Custom).filter(function(c){return typeof t.Custom[c]=="string"})},t}();E.default=o;var l={listenTo:"on",listenToOnce:"once"};(0,h.default)(l).forEach(function(t){o.prototype[t]=function(n,c,b){var x=this._listeningTo||(this._listeningTo={}),a=n._listenId||(n._listenId=(0,f.uniqueId)("l"));return x[a]=n,!b&&(typeof c>"u"?"undefined":(0,g.default)(c))==="object"&&(b=this),n[l[t]](c,b,this),this}}),o.PLAYER_READY="ready",o.PLAYER_RESIZE="resize",o.PLAYER_FULLSCREEN="fullscreen",o.PLAYER_PLAY="play",o.PLAYER_PAUSE="pause",o.PLAYER_STOP="stop",o.PLAYER_ENDED="ended",o.PLAYER_SEEK="seek",o.PLAYER_ERROR="playererror",o.ERROR="error",o.PLAYER_TIMEUPDATE="timeupdate",o.PLAYER_VOLUMEUPDATE="volumeupdate",o.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",o.PLAYBACK_PROGRESS="playback:progress",o.PLAYBACK_TIMEUPDATE="playback:timeupdate",o.PLAYBACK_READY="playback:ready",o.PLAYBACK_BUFFERING="playback:buffering",o.PLAYBACK_BUFFERFULL="playback:bufferfull",o.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",o.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",o.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",o.PLAYBACK_BITRATE="playback:bitrate",o.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",o.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",o.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",o.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",o.PLAYBACK_DVR="playback:dvr",o.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",o.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",o.PLAYBACK_ENDED="playback:ended",o.PLAYBACK_PLAY_INTENT="playback:play:intent",o.PLAYBACK_PLAY="playback:play",o.PLAYBACK_PAUSE="playback:pause",o.PLAYBACK_SEEK="playback:seek",o.PLAYBACK_SEEKED="playback:seeked",o.PLAYBACK_STOP="playback:stop",o.PLAYBACK_ERROR="playback:error",o.PLAYBACK_STATS_ADD="playback:stats:add",o.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",o.PLAYBACK_LEVEL_SWITCH="playback:level:switch",o.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",o.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",o.CORE_CONTAINERS_CREATED="core:containers:created",o.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",o.CORE_OPTIONS_CHANGE="core:options:change",o.CORE_READY="core:ready",o.CORE_FULLSCREEN="core:fullscreen",o.CORE_RESIZE="core:resize",o.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",o.CORE_MOUSE_MOVE="core:mousemove",o.CORE_MOUSE_LEAVE="core:mouseleave",o.CONTAINER_PLAYBACKSTATE="container:playbackstate",o.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",o.CONTAINER_BITRATE="container:bitrate",o.CONTAINER_STATS_REPORT="container:stats:report",o.CONTAINER_DESTROYED="container:destroyed",o.CONTAINER_READY="container:ready",o.CONTAINER_ERROR="container:error",o.CONTAINER_LOADEDMETADATA="container:loadedmetadata",o.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",o.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",o.CONTAINER_TIMEUPDATE="container:timeupdate",o.CONTAINER_PROGRESS="container:progress",o.CONTAINER_PLAY="container:play",o.CONTAINER_STOP="container:stop",o.CONTAINER_PAUSE="container:pause",o.CONTAINER_ENDED="container:ended",o.CONTAINER_CLICK="container:click",o.CONTAINER_DBLCLICK="container:dblclick",o.CONTAINER_CONTEXTMENU="container:contextmenu",o.CONTAINER_MOUSE_ENTER="container:mouseenter",o.CONTAINER_MOUSE_LEAVE="container:mouseleave",o.CONTAINER_SEEK="container:seek",o.CONTAINER_SEEKED="container:seeked",o.CONTAINER_VOLUME="container:volume",o.CONTAINER_FULLSCREEN="container:fullscreen",o.CONTAINER_STATE_BUFFERING="container:state:buffering",o.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",o.CONTAINER_SETTINGSUPDATE="container:settingsupdate",o.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",o.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",o.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",o.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",o.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",o.CONTAINER_STATS_ADD="container:stats:add",o.CONTAINER_OPTIONS_CHANGE="container:options:change",o.MEDIACONTROL_RENDERED="mediacontrol:rendered",o.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",o.MEDIACONTROL_SHOW="mediacontrol:show",o.MEDIACONTROL_HIDE="mediacontrol:hide",o.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",o.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",o.MEDIACONTROL_PLAYING="mediacontrol:playing",o.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",o.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",o.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",P.exports=E.default},"./src/base/media.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=E.mp4="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";E.default={mp4:r}},"./src/base/playback.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=n(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=n(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=n(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=n(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=n(f),S=e("./src/base/utils.js"),i=e("./src/base/ui_object.js"),p=n(i),y=e("./src/base/error_mixin.js"),o=n(y),l=e("./node_modules/clappr-zepto/zepto.js"),t=n(l);function n(b){return b&&b.__esModule?b:{default:b}}var c=function(b){(0,m.default)(x,b),(0,u.default)(x,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consented",get:function(){return this._consented}}]);function x(a,d,C){(0,A.default)(this,x);var T=(0,g.default)(this,b.call(this,a));return T.settings={},T._i18n=d,T.playerError=C,T._consented=!1,T}return x.prototype.consent=function(){this._consented=!0},x.prototype.play=function(){},x.prototype.pause=function(){},x.prototype.stop=function(){},x.prototype.seek=function(d){},x.prototype.seekPercentage=function(d){},x.prototype.getStartTimeOffset=function(){return 0},x.prototype.getDuration=function(){return 0},x.prototype.isPlaying=function(){return!1},x.prototype.getPlaybackType=function(){return x.NO_OP},x.prototype.isHighDefinitionInUse=function(){return!1},x.prototype.volume=function(d){},x.prototype.configure=function(d){this._options=t.default.extend(this._options,d)},x.prototype.attemptAutoPlay=function(){var d=this;this.canAutoPlay(function(C,T){C&&d.play()})},x.prototype.canAutoPlay=function(d){d(!0,null)},(0,u.default)(x,[{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(d){}}]),x}(p.default);E.default=c,(0,h.default)(c.prototype,o.default),c.extend=function(b){return(0,S.extend)(c,b)},c.canPlay=function(b,x){return!1},c.VOD="vod",c.AOD="aod",c.LIVE="live",c.NO_OP="no_op",c.type="playback",P.exports=E.default},"./src/base/polyfills.js":function(P,E,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this==null)throw new TypeError('"this" is null or not defined');var s=Object(this),A=s.length>>>0;if(typeof h!="function")throw new TypeError("predicate must be a function");for(var _=arguments[1],g=0;g<A;){var v=s[g];if(h.call(_,v,g,s))return v;g++}}})},"./src/base/styler.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/clappr-zepto/zepto.js"),h=_(r),s=e("./src/base/template.js"),A=_(s);function _(v){return v&&v.__esModule?v:{default:v}}var g={getStyleFor:function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{baseUrl:""};return(0,h.default)('<style class="clappr-style"></style>').html((0,A.default)(u.toString())(f))}};E.default=g,P.exports=E.default},"./src/base/template.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},h=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\t|\u2028|\u2029/g,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},g=new RegExp(`[&<>"']`,"g"),v=function(S){return S===null?"":(""+S).replace(g,function(i){return _[i]})},u=0,f=function(S,i){var p,y=new RegExp([(r.escape||h).source,(r.interpolate||h).source,(r.evaluate||h).source].join("|")+"|$","g"),o=0,l="__p+='";S.replace(y,function(n,c,b,x,a){return l+=S.slice(o,a).replace(A,function(d){return"\\"+s[d]}),c&&(l+=`'+
((__t=(`+c+`))==null?'':escapeExpr(__t))+
'`),b&&(l+=`'+
((__t=(`+b+`))==null?'':__t)+
'`),x&&(l+=`';
`+x+`
__p+='`),o=a+n.length,n}),l+=`';
`,r.variable||(l=`with(obj||{}){
`+l+`}
`),l=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+l+`return __p;
//# sourceURL=/microtemplates/source[`+u+++"]";try{p=new Function(r.variable||"obj","escapeExpr",l)}catch(n){throw n.source=l,n}if(i)return p(i,v);var t=function(c){return p.call(this,c,v)};return t.source="function("+(r.variable||"obj")+`){
`+l+"}",t};f.settings=r,E.default=f,P.exports=E.default},"./src/base/ui_container_plugin.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=l(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=l(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=l(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=l(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=l(f),S=e("./src/base/utils.js"),i=e("./src/base/ui_object.js"),p=l(i),y=e("./src/base/error_mixin.js"),o=l(y);function l(n){return n&&n.__esModule?n:{default:n}}var t=function(n){(0,m.default)(c,n),(0,u.default)(c,[{key:"playerError",get:function(){return this.container.playerError}}]);function c(b){(0,A.default)(this,c);var x=(0,g.default)(this,n.call(this,b.options));return x.container=b,x.enabled=!0,x.bindEvents(),x}return c.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},c.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},c.prototype.bindEvents=function(){},c}(p.default);E.default=t,(0,h.default)(t.prototype,o.default),t.extend=function(n){return(0,S.extend)(t,n)},t.type="container",P.exports=E.default},"./src/base/ui_core_plugin.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=l(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=l(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=l(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=l(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=l(f),S=e("./src/base/utils.js"),i=e("./src/base/ui_object.js"),p=l(i),y=e("./src/base/error_mixin.js"),o=l(y);function l(n){return n&&n.__esModule?n:{default:n}}var t=function(n){(0,m.default)(c,n),(0,u.default)(c,[{key:"playerError",get:function(){return this.core.playerError}}]);function c(b){(0,A.default)(this,c);var x=(0,g.default)(this,n.call(this,b.options));return x.core=b,x.enabled=!0,x.bindEvents(),x.render(),x}return c.prototype.bindEvents=function(){},c.prototype.getExternalInterface=function(){return{}},c.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},c.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},c.prototype.render=function(){return this},c}(p.default);E.default=t,(0,h.default)(t.prototype,o.default),t.extend=function(n){return(0,S.extend)(t,n)},t.type="core",P.exports=E.default},"./src/base/ui_object.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=y(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=y(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=y(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=y(v),f=e("./node_modules/clappr-zepto/zepto.js"),m=y(f),S=e("./src/base/utils.js"),i=e("./src/base/base_object.js"),p=y(i);function y(t){return t&&t.__esModule?t:{default:t}}var o=/^(\S+)\s*(.*)$/,l=function(t){(0,u.default)(n,t),(0,g.default)(n,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]);function n(c){(0,h.default)(this,n);var b=(0,A.default)(this,t.call(this,c));return b.cid=(0,S.uniqueId)("c"),b._ensureElement(),b.delegateEvents(),b}return n.prototype.$=function(b){return this.$el.find(b)},n.prototype.render=function(){return this},n.prototype.destroy=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},n.prototype.setElement=function(b,x){return this.$el&&this.undelegateEvents(),this.$el=m.default.zepto.isZ(b)?b:(0,m.default)(b),this.el=this.$el[0],x!==!1&&this.delegateEvents(),this},n.prototype.delegateEvents=function(b){if(!(b||(b=this.events)))return this;this.undelegateEvents();for(var x in b){var a=b[x];if(a&&a.constructor!==Function&&(a=this[b[x]]),!!a){var d=x.match(o),C=d[1],T=d[2];C+=".delegateEvents"+this.cid,T===""?this.$el.on(C,a.bind(this)):this.$el.on(C,T,a.bind(this))}}return this},n.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},n.prototype._ensureElement=function(){if(this.el)this.setElement(this.el,!1);else{var b=m.default.extend({},this.attributes);this.id&&(b.id=this.id),this.className&&(b.class=this.className);var x=S.DomRecycler.create(this.tagName).attr(b);this.setElement(x,!1)}},n}(p.default);E.default=l,P.exports=E.default},"./src/base/utils.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0}),E.DoubleEventHandler=E.DomRecycler=E.cancelAnimationFrame=E.requestAnimationFrame=E.QueryString=E.Config=E.Fullscreen=void 0;var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=x(r),s=e("./node_modules/babel-runtime/helpers/createClass.js"),A=x(s),_=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),g=x(_),v=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=x(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=x(f),S=e("./node_modules/babel-runtime/core-js/object/define-property.js"),i=x(S),p=e("./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js"),y=x(p);E.assign=a,E.extend=d,E.formatTime=C,E.seekStringToSeconds=O,E.uniqueId=D,E.isNumber=w,E.currentScriptUrl=F,E.getBrowserLanguage=N,E.now=I,E.removeArrayItem=X,E.listContainsIgnoreCase=$,E.canAutoPlayMedia=ee,e("./src/base/polyfills.js");var o=e("./src/components/browser/index.js"),l=x(o),t=e("./node_modules/clappr-zepto/zepto.js"),n=x(t),c=e("./src/base/media.js"),b=x(c);function x(W){return W&&W.__esModule?W:{default:W}}function a(W,Y){if(Y)for(var te in Y){var se=(0,y.default)(Y,te);se?(0,i.default)(W,te,se):W[te]=Y[te]}return W}function d(W,Y){var te=function(se){(0,m.default)(ce,se);function ce(){(0,g.default)(this,ce);for(var ue=arguments.length,re=Array(ue),ne=0;ne<ue;ne++)re[ne]=arguments[ne];var z=(0,u.default)(this,se.call.apply(se,[this].concat(re)));return Y.initialize&&Y.initialize.apply(z,re),z}return ce}(W);return a(te.prototype,Y),te}function C(W,Y){if(!isFinite(W))return"--:--";W=W*1e3,W=parseInt(W/1e3);var te=W%60;W=parseInt(W/60);var se=W%60;W=parseInt(W/60);var ce=W%24,ue=parseInt(W/24),re="";return ue&&ue>0&&(re+=ue+":",ce<1&&(re+="00:")),(ce&&ce>0||Y)&&(re+=("0"+ce).slice(-2)+":"),re+=("0"+se).slice(-2)+":",re+=("0"+te).slice(-2),re.trim()}var T=E.Fullscreen={getFullscreenElement:function(){return document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement},requestFullscreen:function(Y){Y.requestFullscreen?Y.requestFullscreen():Y.webkitRequestFullscreen?Y.webkitRequestFullscreen():Y.mozRequestFullScreen?Y.mozRequestFullScreen():Y.msRequestFullscreen?Y.msRequestFullscreen():Y.querySelector&&Y.querySelector("video")&&Y.querySelector("video").webkitEnterFullScreen?Y.querySelector("video").webkitEnterFullScreen():Y.webkitEnterFullScreen&&Y.webkitEnterFullScreen()},cancelFullscreen:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;Y.exitFullscreen?Y.exitFullscreen():Y.webkitCancelFullScreen?Y.webkitCancelFullScreen():Y.webkitExitFullscreen?Y.webkitExitFullscreen():Y.mozCancelFullScreen?Y.mozCancelFullScreen():Y.msExitFullscreen&&Y.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},L=E.Config=function(){function W(){(0,g.default)(this,W)}return W._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},W._defaultValueFor=function(te){try{return this._defaultConfig()[te].parse(this._defaultConfig()[te].value)}catch{return}},W._createKeyspace=function(te){return"clappr."+document.domain+"."+te},W.restore=function(te){return l.default.hasLocalstorage&&localStorage[this._createKeyspace(te)]?this._defaultConfig()[te].parse(localStorage[this._createKeyspace(te)]):this._defaultValueFor(te)},W.persist=function(te,se){if(l.default.hasLocalstorage)try{return localStorage[this._createKeyspace(te)]=se,!0}catch{return!1}},W}(),R=E.QueryString=function(){function W(){(0,g.default)(this,W)}return W.parse=function(te){for(var se=void 0,ce=/\+/g,ue=/([^&=]+)=?([^&]*)/g,re=function(ae){return decodeURIComponent(ae.replace(ce," "))},ne={};se=ue.exec(te);)ne[re(se[1]).toLowerCase()]=re(se[2]);return ne},(0,A.default)(W,null,[{key:"params",get:function(){var te=window.location.search.substring(1);return te!==this.query&&(this._urlParams=this.parse(te),this.query=te),this._urlParams}},{key:"hashParams",get:function(){var te=window.location.hash.substring(1);return te!==this.hash&&(this._hashParams=this.parse(te),this.hash=te),this._hashParams}}]),W}();function O(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"t",Y=0,te=R.params[W]||R.hashParams[W]||"",se=te.match(/[0-9]+[hms]+/g)||[];if(se.length>0){var ce={h:3600,m:60,s:1};se.forEach(function(ue){if(ue){var re=ue[ue.length-1],ne=parseInt(ue.slice(0,ue.length-1),10);Y+=ne*ce[re]}})}else te&&(Y=parseInt(te,10));return Y}var j={};function D(W){j[W]||(j[W]=0);var Y=++j[W];return W+Y}function w(W){return W-parseFloat(W)+1>=0}function F(){var W=document.getElementsByTagName("script");return W.length?W[W.length-1].src:""}var B=E.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(W){window.setTimeout(W,1e3/60)}).bind(window),M=E.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function N(){return window.navigator&&window.navigator.language}function I(){return window.performance&&window.performance.now?performance.now():Date.now()}function X(W,Y){var te=W.indexOf(Y);te>=0&&W.splice(te,1)}function $(W,Y){return W===void 0||Y===void 0?!1:Y.find(function(te){return W.toLowerCase()===te.toLowerCase()})!==void 0}function ee(W,Y){Y=(0,h.default)({inline:!1,muted:!1,timeout:250,type:"video",source:b.default.mp4,element:null},Y);var te=Y.element?Y.element:document.createElement(Y.type);te.muted=Y.muted,Y.muted===!0&&te.setAttribute("muted","muted"),Y.inline===!0&&te.setAttribute("playsinline","playsinline"),te.src=Y.source;var se=te.play(),ce=setTimeout(function(){ue(!1,new Error("Timeout "+Y.timeout+" ms has been reached"))},Y.timeout),ue=function(ne){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;clearTimeout(ce),W(ne,z)};se!==void 0?se.then(function(){return ue(!0)}).catch(function(re){return ue(!1,re)}):ue(!0)}var K=[],J=E.DomRecycler=function(){function W(){(0,g.default)(this,W)}return W.configure=function(te){this.options=n.default.extend(this.options,te)},W.create=function(te){return this.options.recycleVideo&&te==="video"&&K.length>0?K.shift():(0,n.default)("<"+te+">")},W.garbage=function(te){!this.options.recycleVideo||te[0].tagName.toUpperCase()!=="VIDEO"||(te.children().remove(),K.push(te))},W}();J.options={recycleVideo:!1};var V=E.DoubleEventHandler=function(){function W(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;(0,g.default)(this,W),this.delay=Y,this.lastTime=0}return W.prototype.handle=function(te,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ue=new Date().getTime(),re=ue-this.lastTime;re<this.delay&&re>0&&(se(),ce&&te.preventDefault()),this.lastTime=ue},W}();E.default={Config:L,Fullscreen:T,QueryString:R,DomRecycler:J,extend:d,formatTime:C,seekStringToSeconds:O,uniqueId:D,currentScriptUrl:F,isNumber:w,requestAnimationFrame:B,cancelAnimationFrame:M,getBrowserLanguage:N,now:I,removeArrayItem:X,canAutoPlayMedia:ee,Media:b.default,DoubleEventHandler:V}},"./src/components/browser/browser.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0}),E.getDevice=E.getViewportSize=E.getOsData=E.getBrowserData=E.getBrowserInfo=void 0;var r=e("./node_modules/babel-runtime/core-js/get-iterator.js"),h=f(r),s=e("./node_modules/clappr-zepto/zepto.js"),A=f(s),_=e("./src/components/browser/browser_data.js"),g=f(_),v=e("./src/components/browser/os_data.js"),u=f(v);function f(a){return a&&a.__esModule?a:{default:a}}var m={},S=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch{return!1}},i=function(){try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!d}catch{return!!(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==void 0&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},p=E.getBrowserInfo=function(d){var C=d.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],T=void 0;if(/trident/i.test(C[1]))return T=/\brv[ :]+(\d+)/g.exec(d)||[],{name:"IE",version:parseInt(T[1]||"")};if(C[1]==="Chrome"){if(T=d.match(/\bOPR\/(\d+)/),T!=null)return{name:"Opera",version:parseInt(T[1])};if(T=d.match(/\bEdge\/(\d+)/),T!=null)return{name:"Edge",version:parseInt(T[1])}}else/android/i.test(d)&&(T=d.match(/version\/(\d+)/i))&&(C.splice(1,1,"Android WebView"),C.splice(2,1,T[1]));return C=C[2]?[C[1],C[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:C[0],version:parseInt(C[1])}},y=E.getBrowserData=function(){var d={},C=m.userAgent.toLowerCase(),T=!0,L=!1,R=void 0;try{for(var O=(0,h.default)(g.default),j;!(T=(j=O.next()).done);T=!0){var D=j.value,w=new RegExp(D.identifier.toLowerCase()),F=w.exec(C);if(F!=null&&F[1]){if(d.name=D.name,d.group=D.group,D.versionIdentifier){var B=new RegExp(D.versionIdentifier.toLowerCase()),M=B.exec(C);M!=null&&M[1]&&o(M[1],d)}else o(F[1],d);break}}}catch(N){L=!0,R=N}finally{try{!T&&O.return&&O.return()}finally{if(L)throw R}}return d},o=function(d,C){var T=d.split(".",2);C.fullVersion=d,T[0]&&(C.majorVersion=parseInt(T[0])),T[1]&&(C.minorVersion=parseInt(T[1]))},l=E.getOsData=function(){var d={},C=m.userAgent.toLowerCase(),T=!0,L=!1,R=void 0;try{for(var O=(0,h.default)(u.default),j;!(T=(j=O.next()).done);T=!0){var D=j.value,w=new RegExp(D.identifier.toLowerCase()),F=w.exec(C);if(F!=null){if(d.name=D.name,d.group=D.group,D.version)t(D.version,D.versionSeparator?D.versionSeparator:".",d);else if(F[1])t(F[1],D.versionSeparator?D.versionSeparator:".",d);else if(D.versionIdentifier){var B=new RegExp(D.versionIdentifier.toLowerCase()),M=B.exec(C);M!=null&&M[1]&&t(M[1],D.versionSeparator?D.versionSeparator:".",d)}break}}}catch(N){L=!0,R=N}finally{try{!T&&O.return&&O.return()}finally{if(L)throw R}}return d},t=function(d,C,T){var L=C.substr(0,1)=="["?new RegExp(C,"g"):C,R=d.split(L,2);C!="."&&(d=d.replace(new RegExp(C,"g"),".")),T.fullVersion=d,R&&R[0]&&(T.majorVersion=parseInt(R[0])),R&&R[1]&&(T.minorVersion=parseInt(R[1]))},n=E.getViewportSize=function(){var d={};return d.width=(0,A.default)(window).width(),d.height=(0,A.default)(window).height(),d},c=function(){switch(window.orientation){case-90:case 90:m.viewport.orientation="landscape";break;default:m.viewport.orientation="portrait";break}},b=E.getDevice=function(d){var C=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,T=C.exec(d),L=T&&(T[1]||T[2])||"";return L},x=p(navigator.userAgent);m.isEdge=/edge/i.test(navigator.userAgent),m.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!m.isEdge,m.isSafari=/safari/i.test(navigator.userAgent)&&!m.isChrome&&!m.isEdge,m.isFirefox=/firefox/i.test(navigator.userAgent),m.isLegacyIE=!!window.ActiveXObject,m.isIE=m.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),m.isIE11=/trident.*rv:11/i.test(navigator.userAgent),m.isChromecast=m.isChrome&&/CrKey/i.test(navigator.userAgent),m.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),m.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),m.isAndroid=/Android/i.test(navigator.userAgent),m.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),m.isWin8App=/MSAppHost/i.test(navigator.userAgent),m.isWiiU=/WiiU/i.test(navigator.userAgent),m.isPS4=/PlayStation 4/i.test(navigator.userAgent),m.hasLocalstorage=S(),m.hasFlash=i(),m.name=x.name,m.version=x.version,m.userAgent=navigator.userAgent,m.data=y(),m.os=l(),m.viewport=n(),m.device=b(m.userAgent),typeof window.orientation<"u"&&c(),E.default=m},"./src/components/browser/browser_data.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}];E.default=r,P.exports=E.default},"./src/components/browser/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/browser/browser.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/browser/os_data.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}];E.default=r,P.exports=E.default},"./src/components/container/container.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=b(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=b(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=b(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=b(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=b(f),S=e("./src/base/events.js"),i=b(S),p=e("./src/base/ui_object.js"),y=b(p),o=e("./src/base/error_mixin.js"),l=b(o),t=e("./src/base/utils.js");e("./src/components/container/public/style.scss");var n=e("./node_modules/clappr-zepto/zepto.js"),c=b(n);function b(a){return a&&a.__esModule?a:{default:a}}var x=function(a){(0,m.default)(d,a),(0,u.default)(d,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(T){this.playback.closedCaptionsTrackId=T}}]);function d(C,T,L){(0,A.default)(this,d);var R=(0,g.default)(this,a.call(this,C));return R._i18n=T,R.currentTime=0,R.volume=100,R.playback=C.playback,R.playerError=L,R.settings=c.default.extend({},R.playback.settings),R.isReady=!1,R.mediaControlDisabled=!1,R.plugins=[R.playback],R.dblTapHandler=new t.DoubleEventHandler(500),R.clickTimer=null,R.clickDelay=200,R.bindEvents(),R}return d.prototype.bindEvents=function(){this.listenTo(this.playback,i.default.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,i.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,i.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,i.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,i.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,i.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,i.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,i.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,i.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,i.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,i.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,i.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,i.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,i.default.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,i.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,i.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,i.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,i.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,i.default.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,i.default.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,i.default.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)},d.prototype.subtitleAvailable=function(){this.trigger(i.default.CONTAINER_SUBTITLE_AVAILABLE)},d.prototype.subtitleChanged=function(T){this.trigger(i.default.CONTAINER_SUBTITLE_CHANGED,T)},d.prototype.playbackStateChanged=function(T){this.trigger(i.default.CONTAINER_PLAYBACKSTATE,T)},d.prototype.playbackDvrStateChanged=function(T){this.settings=this.playback.settings,this.dvrInUse=T,this.trigger(i.default.CONTAINER_PLAYBACKDVRSTATECHANGED,T)},d.prototype.updateBitrate=function(T){this.trigger(i.default.CONTAINER_BITRATE,T)},d.prototype.statsReport=function(T){this.trigger(i.default.CONTAINER_STATS_REPORT,T)},d.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},d.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},d.prototype.isDvrInUse=function(){return!!this.dvrInUse},d.prototype.destroy=function(){this.trigger(i.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach(function(T){return T.destroy()}),this.$el.remove()},d.prototype.setStyle=function(T){this.$el.css(T)},d.prototype.animate=function(T,L){return this.$el.animate(T,L).promise()},d.prototype.ready=function(){this.isReady=!0,this.trigger(i.default.CONTAINER_READY,this.name)},d.prototype.isPlaying=function(){return this.playback.isPlaying()},d.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},d.prototype.getCurrentTime=function(){return this.currentTime},d.prototype.getDuration=function(){return this.playback.getDuration()},d.prototype.error=function(T){this.isReady||this.ready(),this.trigger(i.default.CONTAINER_ERROR,T,this.name)},d.prototype.loadedMetadata=function(T){this.trigger(i.default.CONTAINER_LOADEDMETADATA,T)},d.prototype.timeUpdated=function(T){this.currentTime=T.current,this.trigger(i.default.CONTAINER_TIMEUPDATE,T,this.name)},d.prototype.onProgress=function(){for(var T=arguments.length,L=Array(T),R=0;R<T;R++)L[R]=arguments[R];this.trigger.apply(this,[i.default.CONTAINER_PROGRESS].concat(L,[this.name]))},d.prototype.playing=function(){this.trigger(i.default.CONTAINER_PLAY,this.name)},d.prototype.paused=function(){this.trigger(i.default.CONTAINER_PAUSE,this.name)},d.prototype.play=function(){this.playback.play()},d.prototype.stop=function(){this.playback.stop(),this.currentTime=0},d.prototype.pause=function(){this.playback.pause()},d.prototype.onEnded=function(){this.trigger(i.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},d.prototype.stopped=function(){this.trigger(i.default.CONTAINER_STOP)},d.prototype.clicked=function(){var T=this;(!this.options.chromeless||this.options.allowUserInteraction)&&(this.clickTimer=setTimeout(function(){T.clickTimer&&T.trigger(i.default.CONTAINER_CLICK,T,T.name)},this.clickDelay))},d.prototype.cancelClicked=function(){clearTimeout(this.clickTimer),this.clickTimer=null},d.prototype.dblClicked=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&(this.cancelClicked(),this.trigger(i.default.CONTAINER_DBLCLICK,this,this.name))},d.prototype.dblTap=function(T){var L=this;(!this.options.chromeless||this.options.allowUserInteraction)&&this.dblTapHandler.handle(T,function(){L.cancelClicked(),L.trigger(i.default.CONTAINER_DBLCLICK,L,L.name)})},d.prototype.onContextMenu=function(T){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(i.default.CONTAINER_CONTEXTMENU,T,this.name)},d.prototype.seek=function(T){this.trigger(i.default.CONTAINER_SEEK,T,this.name),this.playback.seek(T)},d.prototype.onSeeked=function(){this.trigger(i.default.CONTAINER_SEEKED,this.name)},d.prototype.seekPercentage=function(T){var L=this.getDuration();if(T>=0&&T<=100){var R=L*(T/100);this.seek(R)}},d.prototype.setVolume=function(T){this.volume=parseInt(T,10),this.trigger(i.default.CONTAINER_VOLUME,T,this.name),this.playback.volume(T)},d.prototype.fullscreen=function(){this.trigger(i.default.CONTAINER_FULLSCREEN,this.name)},d.prototype.onBuffering=function(){this.trigger(i.default.CONTAINER_STATE_BUFFERING,this.name)},d.prototype.bufferfull=function(){this.trigger(i.default.CONTAINER_STATE_BUFFERFULL,this.name)},d.prototype.addPlugin=function(T){this.plugins.push(T)},d.prototype.hasPlugin=function(T){return!!this.getPlugin(T)},d.prototype.getPlugin=function(T){return this.plugins.filter(function(L){return L.name===T})[0]},d.prototype.mouseEnter=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(i.default.CONTAINER_MOUSE_ENTER)},d.prototype.mouseLeave=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(i.default.CONTAINER_MOUSE_LEAVE)},d.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(i.default.CONTAINER_SETTINGSUPDATE)},d.prototype.highDefinitionUpdate=function(T){this.trigger(i.default.CONTAINER_HIGHDEFINITIONUPDATE,T)},d.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},d.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(i.default.CONTAINER_MEDIACONTROL_DISABLE))},d.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(i.default.CONTAINER_MEDIACONTROL_ENABLE))},d.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},d.prototype.configure=function(T){this._options=c.default.extend(this._options,T),this.updateStyle(),this.playback.configure(this.options),this.trigger(i.default.CONTAINER_OPTIONS_CHANGE)},d.prototype.render=function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this},d}(y.default);E.default=x,(0,h.default)(x.prototype,l.default),P.exports=E.default},"./src/components/container/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/container/container.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/container/public/style.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/components/container/public/style.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/components/container_factory/container_factory.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/typeof.js"),h=c(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=c(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=c(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=c(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=c(f),S=e("./src/base/base_object.js"),i=c(S),p=e("./src/base/events.js"),y=c(p),o=e("./src/components/container/index.js"),l=c(o),t=e("./node_modules/clappr-zepto/zepto.js"),n=c(t);function c(x){return x&&x.__esModule?x:{default:x}}var b=function(x){(0,m.default)(a,x),(0,u.default)(a,[{key:"options",get:function(){return this._options},set:function(C){this._options=C}}]);function a(d,C,T,L){(0,A.default)(this,a);var R=(0,g.default)(this,x.call(this,d));return R._i18n=T,R.loader=C,R.playerError=L,R}return a.prototype.createContainers=function(){var C=this;return n.default.Deferred(function(T){T.resolve(C.options.sources.map(function(L){return C.createContainer(L)}))})},a.prototype.findPlaybackPlugin=function(C,T){return this.loader.playbackPlugins.filter(function(L){return L.canPlay(C,T)})[0]},a.prototype.createContainer=function(C){var T=null,L=this.options.mimeType;(typeof C>"u"?"undefined":(0,h.default)(C))==="object"?(T=C.source.toString(),C.mimeType&&(L=C.mimeType)):T=C.toString(),T.match(/^\/\//)&&(T=window.location.protocol+T);var R=n.default.extend({},this.options,{src:T,mimeType:L}),O=this.findPlaybackPlugin(T,L),j=new O(R,this._i18n,this.playerError);R=n.default.extend({},R,{playback:j});var D=new l.default(R,this._i18n,this.playerError),w=n.default.Deferred();return w.promise(D),this.addContainerPlugins(D),this.listenToOnce(D,y.default.CONTAINER_READY,function(){return w.resolve(D)}),D},a.prototype.addContainerPlugins=function(C){this.loader.containerPlugins.forEach(function(T){C.addPlugin(new T(C))})},a}(i.default);E.default=b,P.exports=E.default},"./src/components/container_factory/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/container_factory/container_factory.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/core/core.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=I(r),s=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),A=I(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=I(_),v=e("./node_modules/babel-runtime/helpers/createClass.js"),u=I(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=I(f),S=e("./src/base/utils.js"),i=e("./src/base/styler.js"),p=I(i),y=e("./src/base/events.js"),o=I(y),l=e("./src/base/ui_object.js"),t=I(l),n=e("./src/base/ui_core_plugin.js"),c=I(n),b=e("./src/components/browser/index.js"),x=I(b),a=e("./src/components/container_factory/index.js"),d=I(a),C=e("./src/components/mediator.js"),T=I(C),L=e("./src/components/player_info.js"),R=I(L),O=e("./src/components/error/index.js"),j=I(O),D=e("./src/base/error_mixin.js"),w=I(D),F=e("./node_modules/clappr-zepto/zepto.js"),B=I(F);e("./src/components/core/public/style.scss");var M=e("./src/components/core/public/fonts.css"),N=I(M);function I(ee){return ee&&ee.__esModule?ee:{default:ee}}var X=void 0,$=function(ee){(0,m.default)(K,ee),(0,u.default)(K,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(W){return W}}}},{key:"mediaControl",get:function(){return this.getPlugin("media_control")||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl?this._dummyMediaControl:(this._dummyMediaControl=new c.default(this),this._dummyMediaControl)}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(V){this._activeContainer=V,this.trigger(o.default.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]);function K(J){(0,A.default)(this,K);var V=(0,g.default)(this,ee.call(this,J));return V.playerError=new j.default(J,V),V.configureDomRecycler(),V.playerInfo=R.default.getInstance(J.playerId),V.firstResize=!0,V.plugins=[],V.containers=[],V._boundFullscreenHandler=function(){return V.handleFullscreenChange()},(0,B.default)(document).bind("fullscreenchange",V._boundFullscreenHandler),(0,B.default)(document).bind("MSFullscreenChange",V._boundFullscreenHandler),(0,B.default)(document).bind("mozfullscreenchange",V._boundFullscreenHandler),x.default.isMobile&&(0,B.default)(window).bind("resize",function(W){V.handleWindowResize(W)}),V}return K.prototype.configureDomRecycler=function(){var V=this.options&&this.options.playback&&this.options.playback.recycleVideo;S.DomRecycler.configure({recycleVideo:V})},K.prototype.createContainers=function(V){this.defer=B.default.Deferred(),this.defer.promise(this),this.containerFactory=new d.default(V,V.loader,this.i18n,this.playerError),this.prepareContainers()},K.prototype.prepareContainers=function(){var V=this;this.containerFactory.createContainers().then(function(W){return V.setupContainers(W)}).then(function(W){return V.resolveOnContainersReady(W)})},K.prototype.updateSize=function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()},K.prototype.setFullscreen=function(){x.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,B.default)(window).width(),height:(0,B.default)(window).height()})},K.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,B.default)(window).width(),height:(0,B.default)(window).height()},this.resize(this.playerInfo.currentSize)},K.prototype.resize=function(V){!(0,S.isNumber)(V.height)&&!(0,S.isNumber)(V.width)?(this.el.style.height=""+V.height,this.el.style.width=""+V.width):(this.el.style.height=V.height+"px",this.el.style.width=V.width+"px"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=V.width,this.options.height=V.height,this.playerInfo.currentSize=V,this.triggerResize(this.playerInfo.currentSize)},K.prototype.enableResizeObserver=function(){var V=this,W=function(){V.triggerResize({width:V.el.clientWidth,height:V.el.clientHeight})};this.resizeObserverInterval=setInterval(W,500)},K.prototype.triggerResize=function(V){var W=this.firstResize||this.oldHeight!==V.height||this.oldWidth!==V.width;W&&(this.oldHeight=V.height,this.oldWidth=V.width,this.playerInfo.computedSize=V,this.firstResize=!1,T.default.trigger(this.options.playerId+":"+o.default.PLAYER_RESIZE,V),this.trigger(o.default.CORE_RESIZE,V))},K.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},K.prototype.resolveOnContainersReady=function(V){var W=this;B.default.when.apply(B.default,V).done(function(){W.defer.resolve(W),W.ready=!0,W.trigger(o.default.CORE_READY)})},K.prototype.addPlugin=function(V){this.plugins.push(V)},K.prototype.hasPlugin=function(V){return!!this.getPlugin(V)},K.prototype.getPlugin=function(V){return this.plugins.filter(function(W){return W.name===V})[0]},K.prototype.load=function(V,W){this.options.mimeType=W,V=V&&V.constructor===Array?V:[V],this.options.sources=V,this.containers.forEach(function(Y){return Y.destroy()}),this.containerFactory.options=B.default.extend(this.options,{sources:V}),this.prepareContainers()},K.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach(function(V){return V.destroy()}),this.plugins.forEach(function(V){return V.destroy()}),this.$el.remove(),(0,B.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,B.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,B.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()},K.prototype.handleFullscreenChange=function(){this.trigger(o.default.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()},K.prototype.handleWindowResize=function(V){var W=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==W&&(this._screenOrientation=W,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(o.default.CORE_SCREEN_ORIENTATION_CHANGED,{event:V,orientation:this._screenOrientation}))},K.prototype.removeContainer=function(V){this.stopListening(V),this.containers=this.containers.filter(function(W){return W!==V})},K.prototype.setupContainer=function(V){this.listenTo(V,o.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(V)},K.prototype.setupContainers=function(V){return V.forEach(this.setupContainer.bind(this)),this.trigger(o.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=V[0],this.render(),this.appendToParent(),this.containers},K.prototype.renderContainers=function(){var V=this;this.containers.forEach(function(W){return V.el.appendChild(W.render().el)})},K.prototype.createContainer=function(V,W){var Y=this.containerFactory.createContainer(V,W);return this.setupContainer(Y),this.el.appendChild(Y.render().el),Y},K.prototype.getCurrentContainer=function(){return this.activeContainer},K.prototype.getCurrentPlayback=function(){return this.activePlayback},K.prototype.getPlaybackType=function(){return this.activeContainer&&this.activeContainer.getPlaybackType()},K.prototype.isFullscreen=function(){return S.Fullscreen.getFullscreenElement()===(x.default.isiOS?this.activeContainer.el:this.el)},K.prototype.toggleFullscreen=function(){this.isFullscreen()?(S.Fullscreen.cancelFullscreen(),!x.default.isiOS&&this.$el.removeClass("fullscreen nocursor")):(S.Fullscreen.requestFullscreen(x.default.isiOS?this.activeContainer.el:this.el),!x.default.isiOS&&this.$el.addClass("fullscreen"))},K.prototype.onMouseMove=function(V){this.trigger(o.default.CORE_MOUSE_MOVE,V)},K.prototype.onMouseLeave=function(V){this.trigger(o.default.CORE_MOUSE_LEAVE,V)},K.prototype.configure=function(V){var W=this;this._options=B.default.extend(this._options,V),this.configureDomRecycler();var Y=V.source||V.sources;Y&&this.load(Y,V.mimeType||this.options.mimeType),this.trigger(o.default.CORE_OPTIONS_CHANGE,V),this.containers.forEach(function(te){return te.configure(W.options)})},K.prototype.appendToParent=function(){var V=this.$el.parent()&&this.$el.parent().length;!V&&this.$el.appendTo(this.options.parentElement)},K.prototype.render=function(){X||(X=p.default.getStyleFor(N.default,{baseUrl:this.options.baseUrl})),(0,B.default)("head").append(X),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var V={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=V,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},K}(t.default);E.default=$,(0,h.default)($.prototype,w.default),P.exports=E.default},"./src/components/core/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/core/core.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/core/public/Roboto.ttf":function(P,E){P.exports="<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"},"./src/components/core/public/fonts.css":function(P,E,e){var r=e("./node_modules/css-loader/lib/url/escape.js");E=P.exports=e("./node_modules/css-loader/lib/css-base.js")(!1),E.push([P.i,`@font-face {
  font-family: "Roboto";
  font-style: normal;
  font-weight: 400;
  src: local("Roboto"), local("Roboto-Regular"), url(`+r(e("./src/components/core/public/Roboto.ttf"))+`) format("truetype");
}
`,""])},"./src/components/core/public/style.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/components/core/public/style.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/components/core_factory/core_factory.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=p(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=p(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=p(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=p(v),f=e("./src/base/base_object.js"),m=p(f),S=e("./src/components/core/index.js"),i=p(S);function p(o){return o&&o.__esModule?o:{default:o}}var y=function(o){(0,u.default)(l,o),(0,g.default)(l,[{key:"loader",get:function(){return this.player.loader}}]);function l(t){(0,h.default)(this,l);var n=(0,A.default)(this,o.call(this));return n.player=t,n._options=t.options,n}return l.prototype.create=function(){return this.options.loader=this.loader,this.core=new i.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},l.prototype.addCorePlugins=function(){var n=this;return this.loader.corePlugins.forEach(function(c){var b=new c(n.core);n.core.addPlugin(b),n.setupExternalInterface(b)}),this.core},l.prototype.setupExternalInterface=function(n){var c=n.getExternalInterface();for(var b in c)this.player[b]=c[b].bind(n),this.core[b]=c[b].bind(n)},l}(m.default);E.default=y,P.exports=E.default},"./src/components/core_factory/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/core_factory/core_factory.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/error/error.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=o(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=o(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=o(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=o(v),f=e("./src/base/events.js"),m=o(f),S=e("./src/base/base_object.js"),i=o(S),p=e("./src/plugins/log/index.js"),y=o(p);function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t){(0,u.default)(n,t),(0,g.default)(n,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]);function n(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1];(0,h.default)(this,n);var x=(0,A.default)(this,t.call(this,c));return x.core=b,x}return n.prototype.createError=function(b){if(!this.core){y.default.warn(this.name,"Core is not set. Error: ",b);return}this.core.trigger(m.default.ERROR,b)},n}(i.default);E.default=l,P.exports=E.default},"./src/components/error/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/error/error.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/loader/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/loader/loader.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/components/loader/loader.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/create.js"),h=q(r),s=e("./node_modules/babel-runtime/helpers/toConsumableArray.js"),A=q(s),_=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),g=q(_),v=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=q(v),f=e("./node_modules/babel-runtime/helpers/inherits.js"),m=q(f),S=e("./src/base/base_object.js"),i=q(S),p=e("./src/components/player_info.js"),y=q(p),o=e("./src/playbacks/html5_video/index.js"),l=q(o),t=e("./src/playbacks/flash/index.js"),n=q(t),c=e("./src/playbacks/html5_audio/index.js"),b=q(c),x=e("./src/playbacks/flashls/index.js"),a=q(x),d=e("./src/playbacks/hls/index.js"),C=q(d),T=e("./src/playbacks/html_img/index.js"),L=q(T),R=e("./src/playbacks/no_op/index.js"),O=q(R),j=e("./src/plugins/spinner_three_bounce/index.js"),D=q(j),w=e("./src/plugins/stats/index.js"),F=q(w),B=e("./src/plugins/watermark/index.js"),M=q(B),N=e("./src/plugins/poster/index.js"),I=q(N),X=e("./src/plugins/google_analytics/index.js"),$=q(X),ee=e("./src/plugins/click_to_pause/index.js"),K=q(ee),J=e("./src/plugins/media_control/index.js"),V=q(J),W=e("./src/plugins/dvr_controls/index.js"),Y=q(W),te=e("./src/plugins/closed_captions/index.js"),se=q(te),ce=e("./src/plugins/favicon/index.js"),ue=q(ce),re=e("./src/plugins/seek_time/index.js"),ne=q(re),z=e("./src/plugins/sources.js"),ae=q(z),de=e("./src/plugins/end_video.js"),he=q(de),k=e("./src/plugins/strings.js"),U=q(k),H=e("./src/plugins/error_screen/index.js"),Q=q(H);function q(oe){return oe&&oe.__esModule?oe:{default:oe}}var ie=function(oe){(0,m.default)(fe,oe);function fe(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,g.default)(this,fe);var ge=(0,u.default)(this,oe.call(this));return ge.playerId=ve,ge.playbackPlugins=[],ye||(ge.playbackPlugins=[].concat((0,A.default)(ge.playbackPlugins),[C.default])),ge.playbackPlugins=[].concat((0,A.default)(ge.playbackPlugins),[l.default,b.default]),ye||(ge.playbackPlugins=[].concat((0,A.default)(ge.playbackPlugins),[n.default,a.default])),ge.playbackPlugins=[].concat((0,A.default)(ge.playbackPlugins),[L.default,O.default]),ge.containerPlugins=[D.default,M.default,I.default,F.default,$.default,K.default],ge.corePlugins=[V.default,Y.default,se.default,ue.default,ne.default,ae.default,he.default,Q.default,U.default],Array.isArray(pe)||ge.validateExternalPluginsType(pe),ge.addExternalPlugins(pe),ge}return fe.prototype.groupPluginsByType=function(ve){return Array.isArray(ve)&&(ve=ve.reduce(function(ye,ge){return ye[ge.type]||(ye[ge.type]=[]),ye[ge.type].push(ge),ye},{})),ve},fe.prototype.removeDups=function(ve){var ye=function(_e,Re){return _e[Re.prototype.name]&&delete _e[Re.prototype.name],_e[Re.prototype.name]=Re,_e},ge=ve.reduceRight(ye,(0,h.default)(null)),xe=[];for(var Le in ge)xe.unshift(ge[Le]);return xe},fe.prototype.addExternalPlugins=function(ve){ve=this.groupPluginsByType(ve),ve.playback&&(this.playbackPlugins=this.removeDups(ve.playback.concat(this.playbackPlugins))),ve.container&&(this.containerPlugins=this.removeDups(ve.container.concat(this.containerPlugins))),ve.core&&(this.corePlugins=this.removeDups(ve.core.concat(this.corePlugins))),y.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},fe.prototype.validateExternalPluginsType=function(ve){var ye=["playback","container","core"];ye.forEach(function(ge){(ve[ge]||[]).forEach(function(xe){var Le="external "+xe.type+" plugin on "+ge+" array";if(xe.type!==ge)throw new ReferenceError(Le)})})},fe}(i.default);E.default=ie,P.exports=E.default},"./src/components/mediator.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=_(r),s=e("./src/base/events.js"),A=_(s);function _(u){return u&&u.__esModule?u:{default:u}}var g=new A.default,v=function u(){(0,h.default)(this,u)};E.default=v,v.on=function(u,f,m){g.on(u,f,m)},v.once=function(u,f,m){g.once(u,f,m)},v.off=function(u,f,m){g.off(u,f,m)},v.trigger=function(u){for(var f=arguments.length,m=Array(f>1?f-1:0),S=1;S<f;S++)m[S-1]=arguments[S];g.trigger.apply(g,[u].concat(m))},v.stopListening=function(u,f,m){g.stopListening(u,f,m)},P.exports=E.default},"./src/components/player.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/core-js/object/assign.js"),h=D(r),s=e("./node_modules/babel-runtime/core-js/object/keys.js"),A=D(s),_=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),g=D(_),v=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=D(v),f=e("./node_modules/babel-runtime/helpers/createClass.js"),m=D(f),S=e("./node_modules/babel-runtime/helpers/inherits.js"),i=D(S),p=e("./src/base/utils.js"),y=e("./src/base/base_object.js"),o=D(y),l=e("./src/base/events.js"),t=D(l),n=e("./src/components/browser/index.js"),c=D(n),b=e("./src/components/core_factory/index.js"),x=D(b),a=e("./src/components/loader/index.js"),d=D(a),C=e("./src/components/player_info.js"),T=D(C),L=e("./src/base/error_mixin.js"),R=D(L),O=e("./node_modules/clappr-zepto/zepto.js"),j=D(O);function D(B){return B&&B.__esModule?B:{default:B}}var w=(0,p.currentScriptUrl)().replace(/\/[^/]+$/,""),F=function(B){(0,i.default)(M,B),(0,m.default)(M,[{key:"loader",set:function(I){this._loader=I},get:function(){return this._loader||(this._loader=new d.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:t.default.PLAYER_READY,onResize:t.default.PLAYER_RESIZE,onPlay:t.default.PLAYER_PLAY,onPause:t.default.PLAYER_PAUSE,onStop:t.default.PLAYER_STOP,onEnded:t.default.PLAYER_ENDED,onSeek:t.default.PLAYER_SEEK,onError:t.default.PLAYER_ERROR,onTimeUpdate:t.default.PLAYER_TIMEUPDATE,onVolumeUpdate:t.default.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:t.default.PLAYER_SUBTITLE_AVAILABLE}}}]);function M(N){(0,g.default)(this,M);var I=(0,u.default)(this,B.call(this,N)),X={recycleVideo:!0},$={playerId:(0,p.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:w,allowUserInteraction:c.default.isMobile,playback:X};return I._options=j.default.extend($,N),I.options.sources=I._normalizeSources(N),I.options.chromeless||(I.options.allowUserInteraction=!0),I.options.allowUserInteraction||(I.options.disableKeyboardShortcuts=!0),I._registerOptionEventListeners(I.options.events),I._coreFactory=new x.default(I),I.playerInfo=T.default.getInstance(I.options.playerId),I.playerInfo.currentSize={width:N.width,height:N.height},I.playerInfo.options=I.options,I.options.parentId?I.setParentId(I.options.parentId):I.options.parent&&I.attachTo(I.options.parent),I}return M.prototype.setParentId=function(I){var X=document.querySelector(I);return X&&this.attachTo(X),this},M.prototype.attachTo=function(I){return this.options.parentElement=I,this.core=this._coreFactory.create(),this._addEventListeners(),this},M.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,t.default.CORE_READY,this._onReady),this.listenTo(this.core,t.default.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,t.default.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,t.default.CORE_RESIZE,this._onResize),this},M.prototype._addContainerEventListeners=function(){var I=this.core.activeContainer;return I&&(this.listenTo(I,t.default.CONTAINER_PLAY,this._onPlay),this.listenTo(I,t.default.CONTAINER_PAUSE,this._onPause),this.listenTo(I,t.default.CONTAINER_STOP,this._onStop),this.listenTo(I,t.default.CONTAINER_ENDED,this._onEnded),this.listenTo(I,t.default.CONTAINER_SEEK,this._onSeek),this.listenTo(I,t.default.CONTAINER_ERROR,this._onError),this.listenTo(I,t.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(I,t.default.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(I,t.default.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this},M.prototype._registerOptionEventListeners=function(){var I=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=(0,A.default)(X).length>0;return ee&&(0,A.default)($).forEach(function(K){var J=I.eventsMapping[K];J&&I.off(J,$[K])}),(0,A.default)(X).forEach(function(K){var J=I.eventsMapping[K];if(J){var V=X[K];V=typeof V=="function"&&V,V&&I.on(J,V)}}),this},M.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},M.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(t.default.PLAYER_READY)},M.prototype._onFullscreenChange=function(I){this.trigger(t.default.PLAYER_FULLSCREEN,I)},M.prototype._onVolumeUpdate=function(I){this.trigger(t.default.PLAYER_VOLUMEUPDATE,I)},M.prototype._onSubtitleAvailable=function(){this.trigger(t.default.PLAYER_SUBTITLE_AVAILABLE)},M.prototype._onResize=function(I){this.trigger(t.default.PLAYER_RESIZE,I)},M.prototype._onPlay=function(){this.trigger(t.default.PLAYER_PLAY)},M.prototype._onPause=function(){this.trigger(t.default.PLAYER_PAUSE)},M.prototype._onStop=function(){this.trigger(t.default.PLAYER_STOP,this.getCurrentTime())},M.prototype._onEnded=function(){this.trigger(t.default.PLAYER_ENDED)},M.prototype._onSeek=function(I){this.trigger(t.default.PLAYER_SEEK,I)},M.prototype._onTimeUpdate=function(I){this.trigger(t.default.PLAYER_TIMEUPDATE,I)},M.prototype._onError=function(I){this.trigger(t.default.PLAYER_ERROR,I)},M.prototype._normalizeSources=function(I){var X=I.sources||(I.source!==void 0?[I.source]:[]);return X.length===0?[{source:"",mimeType:""}]:X},M.prototype.resize=function(I){return this.core.resize(I),this},M.prototype.load=function(I,X,$){return $!==void 0&&this.configure({autoPlay:!!$}),this.core.load(I,X),this},M.prototype.destroy=function(){return this.stopListening(),this.core.destroy(),this},M.prototype.consent=function(){return this.core.getCurrentPlayback().consent(),this},M.prototype.play=function(){return this.core.activeContainer.play(),this},M.prototype.pause=function(){return this.core.activeContainer.pause(),this},M.prototype.stop=function(){return this.core.activeContainer.stop(),this},M.prototype.seek=function(I){return this.core.activeContainer.seek(I),this},M.prototype.seekPercentage=function(I){return this.core.activeContainer.seekPercentage(I),this},M.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},M.prototype.unmute=function(){return this.setVolume(typeof this._mutedVolume=="number"?this._mutedVolume:100),this._mutedVolume=null,this},M.prototype.isPlaying=function(){return this.core.activeContainer.isPlaying()},M.prototype.isDvrEnabled=function(){return this.core.activeContainer.isDvrEnabled()},M.prototype.isDvrInUse=function(){return this.core.activeContainer.isDvrInUse()},M.prototype.configure=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._registerOptionEventListeners(I.events,this.options.events),this.core.configure(I),this},M.prototype.getPlugin=function(I){var X=this.core.plugins.concat(this.core.activeContainer.plugins);return X.filter(function($){return $.name===I})[0]},M.prototype.getCurrentTime=function(){return this.core.activeContainer.getCurrentTime()},M.prototype.getStartTimeOffset=function(){return this.core.activeContainer.getStartTimeOffset()},M.prototype.getDuration=function(){return this.core.activeContainer.getDuration()},M}(o.default);E.default=F,(0,h.default)(F.prototype,R.default),P.exports=E.default},"./src/components/player_info.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=s(r);function s(_){return _&&_.__esModule?_:{default:_}}var A=function _(){(0,h.default)(this,_),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};A._players={},A.getInstance=function(_){return A._players[_]||(A._players[_]=new A)},E.default=A,P.exports=E.default},"./src/icons/01-play.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},"./src/icons/02-pause.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},"./src/icons/03-stop.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},"./src/icons/04-volume.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},"./src/icons/05-mute.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},"./src/icons/06-expand.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},"./src/icons/07-shrink.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},"./src/icons/08-hd.svg":function(P,E){P.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},"./src/icons/09-cc.svg":function(P,E){P.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'},"./src/icons/10-reload.svg":function(P,E){P.exports='<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},"./src/main.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/components/player.js"),h=me(r),s=e("./src/base/utils.js"),A=me(s),_=e("./src/base/events.js"),g=me(_),v=e("./src/base/playback.js"),u=me(v),f=e("./src/base/container_plugin.js"),m=me(f),S=e("./src/base/core_plugin.js"),i=me(S),p=e("./src/base/ui_core_plugin.js"),y=me(p),o=e("./src/base/ui_container_plugin.js"),l=me(o),t=e("./src/base/base_object.js"),n=me(t),c=e("./src/base/ui_object.js"),b=me(c),x=e("./src/components/browser/index.js"),a=me(x),d=e("./src/components/container/index.js"),C=me(d),T=e("./src/components/core/index.js"),L=me(T),R=e("./src/components/error/index.js"),O=me(R),j=e("./src/components/loader/index.js"),D=me(j),w=e("./src/components/mediator.js"),F=me(w),B=e("./src/components/player_info.js"),M=me(B),N=e("./src/playbacks/base_flash_playback/index.js"),I=me(N),X=e("./src/playbacks/flash/index.js"),$=me(X),ee=e("./src/playbacks/flashls/index.js"),K=me(ee),J=e("./src/playbacks/hls/index.js"),V=me(J),W=e("./src/playbacks/html5_audio/index.js"),Y=me(W),te=e("./src/playbacks/html5_video/index.js"),se=me(te),ce=e("./src/playbacks/html_img/index.js"),ue=me(ce),re=e("./src/playbacks/no_op/index.js"),ne=me(re),z=e("./src/plugins/media_control/index.js"),ae=me(z),de=e("./src/plugins/click_to_pause/index.js"),he=me(de),k=e("./src/plugins/dvr_controls/index.js"),U=me(k),H=e("./src/plugins/favicon/index.js"),Q=me(H),q=e("./src/plugins/log/index.js"),ie=me(q),oe=e("./src/plugins/poster/index.js"),fe=me(oe),pe=e("./src/plugins/spinner_three_bounce/index.js"),ve=me(pe),ye=e("./src/plugins/watermark/index.js"),ge=me(ye),xe=e("./src/base/styler.js"),Le=me(xe),Ye=e("./src/vendor/index.js"),_e=me(Ye),Re=e("./src/base/template.js"),At=me(Re),bt=e("./node_modules/clappr-zepto/zepto.js"),Et=me(bt);function me(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}var xt="0.3.11";E.default={Player:h.default,Mediator:F.default,Events:g.default,Browser:a.default,PlayerInfo:M.default,MediaControl:ae.default,ContainerPlugin:m.default,UIContainerPlugin:l.default,CorePlugin:i.default,UICorePlugin:y.default,Playback:u.default,Container:C.default,Core:L.default,PlayerError:O.default,Loader:D.default,BaseObject:n.default,UIObject:b.default,Utils:A.default,BaseFlashPlayback:I.default,Flash:$.default,FlasHLS:K.default,HLS:V.default,HTML5Audio:Y.default,HTML5Video:se.default,HTMLImg:ue.default,NoOp:ne.default,ClickToPausePlugin:he.default,DVRControls:U.default,Favicon:Q.default,Log:ie.default,Poster:fe.default,SpinnerThreeBouncePlugin:ve.default,WaterMarkPlugin:ge.default,Styler:Le.default,Vendor:_e.default,version:xt,template:At.default,$:Et.default},P.exports=E.default},"./src/playbacks/base_flash_playback/base_flash_playback.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=t(r),s=e("./node_modules/babel-runtime/helpers/createClass.js"),A=t(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=t(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=t(v),f=e("./src/base/playback.js"),m=t(f),S=e("./src/base/template.js"),i=t(S),p=e("./src/components/browser/index.js"),y=t(p),o=e("./src/playbacks/base_flash_playback/public/flash.html"),l=t(o);e("./src/playbacks/base_flash_playback/public/flash.scss");function t(b){return b&&b.__esModule?b:{default:b}}var n="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",c=function(b){(0,u.default)(x,b);function x(){return(0,h.default)(this,x),(0,g.default)(this,b.apply(this,arguments))}return x.prototype.setElement=function(d){this.$el=d,this.el=d[0]},x.prototype.render=function(){return this.$el.attr("data",this.swfPath),this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),y.default.isIE&&(this.$("embed").remove(),y.default.isLegacyIE&&this.$el.attr("classid",n)),this.el.id=this.cid,this},(0,A.default)(x,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,i.default)(l.default)}},{key:"attributes",get:function(){var d="application/x-shockwave-flash";return y.default.isLegacyIE&&(d=""),{class:"clappr-flash-playback",type:d,width:"100%",height:"100%",data:this.swfPath,"data-flash-playback":this.name}}}]),x}(m.default);E.default=c,P.exports=E.default},"./src/playbacks/base_flash_playback/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0}),E.default=e("./src/playbacks/base_flash_playback/base_flash_playback.js"),P.exports=E.default},"./src/playbacks/base_flash_playback/public/flash.html":function(P,E){P.exports=`<param name="movie" value="<%= swfPath %>">
<param name="quality" value="autohigh">
<param name="swliveconnect" value="true">
<param name="allowScriptAccess" value="always">
<param name="bgcolor" value="#000000">
<param name="allowFullScreen" value="false">
<param name="wmode" value="<%= wmode %>">
<param name="tabindex" value="1">
<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">
<embed
  name="<%= cid %>"
  type="application/x-shockwave-flash"
  disabled="disabled"
  tabindex="-1"
  enablecontextmenu="false"
  allowScriptAccess="always"
  quality="autohigh"
  pluginspage="http://www.macromedia.com/go/getflashplayer"
  wmode="<%= wmode %>"
  swliveconnect="true"
  allowfullscreen="false"
  bgcolor="#000000"
  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"
  data="<%= swfPath %>"
  src="<%= swfPath %>"
  width="100%"
  height="100%">
</embed>
`},"./src/playbacks/base_flash_playback/public/flash.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/playbacks/flash/flash.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=L(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=L(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=L(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=L(v),f=e("./src/base/utils.js"),m=e("./src/playbacks/base_flash_playback/index.js"),S=L(m),i=e("./src/components/browser/index.js"),p=L(i),y=e("./src/components/mediator.js"),o=L(y),l=e("./src/base/template.js"),t=L(l),n=e("./node_modules/clappr-zepto/zepto.js"),c=L(n),b=e("./src/base/events.js"),x=L(b),a=e("./src/base/playback.js"),d=L(a),C=e("./src/playbacks/flash/public/Player.swf"),T=L(C);function L(j){return j&&j.__esModule?j:{default:j}}var R=60,O=function(j){(0,u.default)(D,j),(0,g.default)(D,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,t.default)(T.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return this._currentState==="ENDED"}},{key:"buffering",get:function(){return!!this._bufferingState&&this._currentState!=="ENDED"}}]);function D(){(0,h.default)(this,D);for(var w=arguments.length,F=Array(w),B=0;B<w;B++)F[B]=arguments[B];var M=(0,A.default)(this,j.call.apply(j,[this].concat(F)));return M._src=M.options.src,M._baseUrl=M.options.baseUrl,M._autoPlay=M.options.autoPlay,M.settings={default:["seekbar"]},M.settings.left=["playpause","position","duration"],M.settings.right=["fullscreen","volume"],M.settings.seekEnabled=!0,M._isReadyState=!1,M._addListeners(),M}return D.prototype._bootstrap=function(){var F=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%",this._currentState==="PLAYING"?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,c.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():o.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=R?setTimeout(function(){return F._bootstrap()},50):this.trigger(x.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},D.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(x.default.PLAYBACK_READY,this.name),this.trigger(x.default.PLAYBACK_SETTINGSUPDATE,this.name)},D.prototype.getPlaybackType=function(){return d.default.VOD},D.prototype.isHighDefinitionInUse=function(){return!1},D.prototype._updateTime=function(){this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},D.prototype._addListeners=function(){o.default.on(this.uniqueId+":progress",this._progress,this),o.default.on(this.uniqueId+":timeupdate",this._updateTime,this),o.default.on(this.uniqueId+":statechanged",this._checkState,this),o.default.on(this.uniqueId+":flashready",this._bootstrap,this)},D.prototype.stopListening=function(){j.prototype.stopListening.call(this),o.default.off(this.uniqueId+":progress"),o.default.off(this.uniqueId+":timeupdate"),o.default.off(this.uniqueId+":statechanged"),o.default.off(this.uniqueId+":flashready")},D.prototype._checkState=function(){this._isIdle||this._currentState==="PAUSED"||(this._currentState!=="PLAYING_BUFFERING"&&this.el.getState()==="PLAYING_BUFFERING"?(this._bufferingState=!0,this.trigger(x.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):this.el.getState()==="PLAYING"?(this._bufferingState=!1,this.trigger(x.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):this.el.getState()==="IDLE"?this._currentState="IDLE":this.el.getState()==="ENDED"&&(this.trigger(x.default.PLAYBACK_ENDED,this.name),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},D.prototype._progress=function(){this._currentState!=="IDLE"&&this._currentState!=="ENDED"&&this.trigger(x.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},D.prototype._firstPlay=function(){var F=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return F._checkInitialSeek()}),this._currentState="PLAYING"):this.listenToOnce(this,x.default.PLAYBACK_READY,this._firstPlay)},D.prototype._checkInitialSeek=function(){var F=(0,f.seekStringToSeconds)(window.location.href);F!==0&&this.seekSeconds(F)},D.prototype.play=function(){this.trigger(x.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"||this._currentState==="PLAYING_BUFFERING"?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(x.default.PLAYBACK_PLAY,this.name)):this._currentState!=="PLAYING"&&(this._firstPlay(),this.trigger(x.default.PLAYBACK_PLAY,this.name))},D.prototype.volume=function(F){var B=this;this.isReady?this.el.playerVolume(F):this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return B.volume(F)})},D.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(x.default.PLAYBACK_PAUSE,this.name)},D.prototype.stop=function(){this.el.playerStop(),this.trigger(x.default.PLAYBACK_STOP),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},D.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},D.prototype.getDuration=function(){return this.el.getDuration()},D.prototype.seekPercentage=function(F){var B=this;if(this.el.getDuration()>0){var M=this.el.getDuration()*(F/100);this.seek(M)}else this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return B.seekPercentage(F)})},D.prototype.seek=function(F){var B=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(F),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:F,total:this.el.getDuration()},this.name),this._currentState==="PAUSED"&&this.el.playerPause()):this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return B.seek(F)})},D.prototype.destroy=function(){clearInterval(this.bootstrapId),j.prototype.stopListening.call(this),this.$el.remove()},(0,g.default)(D,[{key:"isReady",get:function(){return this._isReadyState}}]),D}(S.default);E.default=O,O.canPlay=function(j){if(!p.default.hasFlash||!j||j.constructor!==String)return!1;var D=j.split("?")[0].match(/.*\.(.*)$/)||[];return D.length>1&&!p.default.isMobile&&D[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)},P.exports=E.default},"./src/playbacks/flash/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/flash/flash.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/flash/public/Player.swf":function(P,E){P.exports="<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"},"./src/playbacks/flashls/flashls.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=j(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=j(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=j(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=j(v),f=e("./src/playbacks/base_flash_playback/index.js"),m=j(f),S=e("./src/base/events.js"),i=j(S),p=e("./src/base/template.js"),y=j(p),o=e("./src/base/playback.js"),l=j(o),t=e("./src/components/mediator.js"),n=j(t),c=e("./src/components/browser/index.js"),b=j(c),x=e("./src/components/error/index.js"),a=j(x),d=e("./src/playbacks/flashls/flashls_events.js"),C=j(d),T=e("./src/playbacks/flashls/public/HLSPlayer.swf"),L=j(T),R=e("./node_modules/clappr-zepto/zepto.js"),O=j(R);function j(B){return B&&B.__esModule?B:{default:B}}var D=60,w=-1,F=function(B){(0,u.default)(M,B),(0,g.default)(M,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,y.default)(L.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?w:this._currentLevel},set:function(I){this._currentLevel=I,this.trigger(i.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(I)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]);function M(){(0,h.default)(this,M);for(var N=arguments.length,I=Array(N),X=0;X<N;X++)I[X]=arguments[X];var $=(0,A.default)(this,B.call.apply(B,[this].concat(I)));return $._src=$.options.src,$._baseUrl=$.options.baseUrl,$._initHlsParameters($.options),$.highDefinition=!1,$._autoPlay=$.options.autoPlay,$._loop=$.options.loop,$._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},$.settings=O.default.extend({},$._defaultSettings),$._playbackType=l.default.LIVE,$._hasEnded=!1,$._addListeners(),$}return M.prototype._initHlsParameters=function(I){this._autoStartLoad=I.autoStartLoad===void 0?!0:I.autoStartLoad,this._capLevelToStage=I.capLevelToStage===void 0?!1:I.capLevelToStage,this._maxLevelCappingMode=I.maxLevelCappingMode===void 0?"downscale":I.maxLevelCappingMode,this._minBufferLength=I.minBufferLength===void 0?-1:I.minBufferLength,this._minBufferLengthCapping=I.minBufferLengthCapping===void 0?-1:I.minBufferLengthCapping,this._maxBufferLength=I.maxBufferLength===void 0?120:I.maxBufferLength,this._maxBackBufferLength=I.maxBackBufferLength===void 0?30:I.maxBackBufferLength,this._lowBufferLength=I.lowBufferLength===void 0?3:I.lowBufferLength,this._mediaTimePeriod=I.mediaTimePeriod===void 0?100:I.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=I.fpsDroppedMonitoringPeriod===void 0?5e3:I.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=I.fpsDroppedMonitoringThreshold===void 0?.2:I.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=I.capLevelonFPSDrop===void 0?!1:I.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=I.smoothAutoSwitchonFPSDrop===void 0?this.capLevelonFPSDrop:I.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=I.switchDownOnLevelError===void 0?!0:I.switchDownOnLevelError,this._seekMode=I.seekMode===void 0?"ACCURATE":I.seekMode,this._keyLoadMaxRetry=I.keyLoadMaxRetry===void 0?3:I.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=I.keyLoadMaxRetryTimeout===void 0?64e3:I.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=I.fragmentLoadMaxRetry===void 0?3:I.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=I.fragmentLoadMaxRetryTimeout===void 0?4e3:I.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=I.fragmentLoadSkipAfterMaxRetry===void 0?!0:I.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=I.maxSkippedFragments===void 0?5:I.maxSkippedFragments,this._flushLiveURLCache=I.flushLiveURLCache===void 0?!1:I.flushLiveURLCache,this._initialLiveManifestSize=I.initialLiveManifestSize===void 0?1:I.initialLiveManifestSize,this._manifestLoadMaxRetry=I.manifestLoadMaxRetry===void 0?3:I.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=I.manifestLoadMaxRetryTimeout===void 0?64e3:I.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=I.manifestRedundantLoadmaxRetry===void 0?3:I.manifestRedundantLoadmaxRetry,this._startFromBitrate=I.startFromBitrate===void 0?-1:I.startFromBitrate,this._startFromLevel=I.startFromLevel===void 0?-1:I.startFromLevel,this._autoStartMaxDuration=I.autoStartMaxDuration===void 0?-1:I.autoStartMaxDuration,this._seekFromLevel=I.seekFromLevel===void 0?-1:I.seekFromLevel,this._useHardwareVideoDecoder=I.useHardwareVideoDecoder===void 0?!1:I.useHardwareVideoDecoder,this._hlsLogEnabled=I.hlsLogEnabled===void 0?!0:I.hlsLogEnabled,this._logDebug=I.logDebug===void 0?!1:I.logDebug,this._logDebug2=I.logDebug2===void 0?!1:I.logDebug2,this._logWarn=I.logWarn===void 0?!0:I.logWarn,this._logError=I.logError===void 0?!0:I.logError,this._hlsMinimumDvrSize=I.hlsMinimumDvrSize===void 0?60:I.hlsMinimumDvrSize},M.prototype._addListeners=function(){var I=this;n.default.on(this.cid+":flashready",function(){return I._bootstrap()}),n.default.on(this.cid+":timeupdate",function(X){return I._updateTime(X)}),n.default.on(this.cid+":playbackstate",function(X){return I._setPlaybackState(X)}),n.default.on(this.cid+":levelchanged",function(X){return I._levelChanged(X)}),n.default.on(this.cid+":error",function(X,$,ee){return I._flashPlaybackError(X,$,ee)}),n.default.on(this.cid+":fragmentloaded",function(X){return I._onFragmentLoaded(X)}),n.default.on(this.cid+":levelendlist",function(X){return I._onLevelEndlist(X)})},M.prototype.stopListening=function(){B.prototype.stopListening.call(this),n.default.off(this.cid+":flashready"),n.default.off(this.cid+":timeupdate"),n.default.off(this.cid+":playbackstate"),n.default.off(this.cid+":levelchanged"),n.default.off(this.cid+":playbackerror"),n.default.off(this.cid+":fragmentloaded"),n.default.off(this.cid+":manifestloaded"),n.default.off(this.cid+":levelendlist")},M.prototype._bootstrap=function(){var I=this;if(this.el.playerLoad)this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(i.default.PLAYBACK_READY,this.name);else if(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=D)setTimeout(function(){return I._bootstrap()},50);else{var X=this.createError({code:"playerLoadFail_maxNumberAttemptsReached",description:this.name+" error: Max number of attempts reached",level:a.default.Levels.FATAL,raw:{}});this.trigger(i.default.PLAYBACK_ERROR,X)}},M.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},M.prototype.setAutoStartLoad=function(I){this._autoStartLoad=I,this.el.playerSetAutoStartLoad(this._autoStartLoad)},M.prototype.setCapLevelToStage=function(I){this._capLevelToStage=I,this.el.playerSetCapLevelToStage(this._capLevelToStage)},M.prototype.setMaxLevelCappingMode=function(I){this._maxLevelCappingMode=I,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},M.prototype.setSetMinBufferLength=function(I){this._minBufferLength=I,this.el.playerSetMinBufferLength(this._minBufferLength)},M.prototype.setMinBufferLengthCapping=function(I){this._minBufferLengthCapping=I,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},M.prototype.setMaxBufferLength=function(I){this._maxBufferLength=I,this.el.playerSetMaxBufferLength(this._maxBufferLength)},M.prototype.setMaxBackBufferLength=function(I){this._maxBackBufferLength=I,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},M.prototype.setLowBufferLength=function(I){this._lowBufferLength=I,this.el.playerSetLowBufferLength(this._lowBufferLength)},M.prototype.setMediaTimePeriod=function(I){this._mediaTimePeriod=I,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},M.prototype.setFpsDroppedMonitoringPeriod=function(I){this._fpsDroppedMonitoringPeriod=I,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},M.prototype.setFpsDroppedMonitoringThreshold=function(I){this._fpsDroppedMonitoringThreshold=I,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},M.prototype.setCapLevelonFPSDrop=function(I){this._capLevelonFPSDrop=I,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},M.prototype.setSmoothAutoSwitchonFPSDrop=function(I){this._smoothAutoSwitchonFPSDrop=I,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},M.prototype.setSwitchDownOnLevelError=function(I){this._switchDownOnLevelError=I,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},M.prototype.setSeekMode=function(I){this._seekMode=I,this.el.playerSetSeekMode(this._seekMode)},M.prototype.setKeyLoadMaxRetry=function(I){this._keyLoadMaxRetry=I,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},M.prototype.setKeyLoadMaxRetryTimeout=function(I){this._keyLoadMaxRetryTimeout=I,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},M.prototype.setFragmentLoadMaxRetry=function(I){this._fragmentLoadMaxRetry=I,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},M.prototype.setFragmentLoadMaxRetryTimeout=function(I){this._fragmentLoadMaxRetryTimeout=I,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},M.prototype.setFragmentLoadSkipAfterMaxRetry=function(I){this._fragmentLoadSkipAfterMaxRetry=I,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},M.prototype.setMaxSkippedFragments=function(I){this._maxSkippedFragments=I,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},M.prototype.setFlushLiveURLCache=function(I){this._flushLiveURLCache=I,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},M.prototype.setInitialLiveManifestSize=function(I){this._initialLiveManifestSize=I,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},M.prototype.setManifestLoadMaxRetry=function(I){this._manifestLoadMaxRetry=I,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},M.prototype.setManifestLoadMaxRetryTimeout=function(I){this._manifestLoadMaxRetryTimeout=I,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},M.prototype.setManifestRedundantLoadmaxRetry=function(I){this._manifestRedundantLoadmaxRetry=I,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},M.prototype.setStartFromBitrate=function(I){this._startFromBitrate=I,this.el.playerSetStartFromBitrate(this._startFromBitrate)},M.prototype.setStartFromLevel=function(I){this._startFromLevel=I,this.el.playerSetStartFromLevel(this._startFromLevel)},M.prototype.setAutoStartMaxDuration=function(I){this._autoStartMaxDuration=I,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},M.prototype.setSeekFromLevel=function(I){this._seekFromLevel=I,this.el.playerSetSeekFromLevel(this._seekFromLevel)},M.prototype.setUseHardwareVideoDecoder=function(I){this._useHardwareVideoDecoder=I,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},M.prototype.setSetLogInfo=function(I){this._hlsLogEnabled=I,this.el.playerSetLogInfo(this._hlsLogEnabled)},M.prototype.setLogDebug=function(I){this._logDebug=I,this.el.playerSetLogDebug(this._logDebug)},M.prototype.setLogDebug2=function(I){this._logDebug2=I,this.el.playerSetLogDebug2(this._logDebug2)},M.prototype.setLogWarn=function(I){this._logWarn=I,this.el.playerSetLogWarn(this._logWarn)},M.prototype.setLogError=function(I){this._logError=I,this.el.playerSetLogError(this._logError)},M.prototype._levelChanged=function(I){var X=this.el.getLevels()[I];X&&(this.highDefinition=X.height>=720||X.bitrate/1e3>=2e3,this.trigger(i.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),(!this._levels||this._levels.length===0)&&this._fillLevels(),this.trigger(i.default.PLAYBACK_BITRATE,{height:X.height,width:X.width,bandwidth:X.bitrate,bitrate:X.bitrate,level:I}),this.trigger(i.default.PLAYBACK_LEVEL_SWITCH_END))},M.prototype._updateTime=function(I){if(this._currentState!=="IDLE"){var X=this._normalizeDuration(I.duration),$=Math.min(Math.max(I.position,0),X),ee=this._dvrEnabled,K=this._playbackType===l.default.LIVE;this._dvrEnabled=K&&X>this._hlsMinimumDvrSize,!(X===100||K===void 0)&&(this._dvrEnabled!==ee&&(this._updateSettings(),this.trigger(i.default.PLAYBACK_SETTINGSUPDATE,this.name)),K&&!this._dvrEnabled&&($=X),this.trigger(i.default.PLAYBACK_TIMEUPDATE,{current:$,total:X},this.name))}},M.prototype.play=function(){this.trigger(i.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"?this.el.playerResume():!this._srcLoaded&&this._currentState!=="PLAYING"?this._firstPlay():this.el.playerPlay()},M.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},M.prototype.getCurrentTime=function(){return this.el.getPosition()},M.prototype.getCurrentLevelIndex=function(){return this._currentLevel},M.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},M.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},M.prototype.setCurrentLevel=function(I){this.currentLevel=I},M.prototype.isHighDefinitionInUse=function(){return this.highDefinition},M.prototype.getLevels=function(){return this.levels},M.prototype._setPlaybackState=function(I){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(I)>=0?(this._bufferingState=!0,this.trigger(i.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(I)):["PLAYING","PAUSED"].indexOf(I)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(i.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(I)):I==="IDLE"&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(I),this._hasEnded=!0,this.trigger(i.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(i.default.PLAYBACK_ENDED,this.name)))},M.prototype._updateCurrentState=function(I){this._currentState=I,I!=="IDLE"&&(this._hasEnded=!1),this._updatePlaybackType(),I==="PLAYING"?this.trigger(i.default.PLAYBACK_PLAY,this.name):I==="PAUSED"&&this.trigger(i.default.PLAYBACK_PAUSE,this.name)},M.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===l.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(i.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},M.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},M.prototype._stopReportingProgress=function(){this._reportingProgress=!1},M.prototype._onFragmentLoaded=function(I){if(this.trigger(i.default.PLAYBACK_FRAGMENT_LOADED,I),this._reportingProgress&&this.getCurrentTime()){var X=this.getCurrentTime()+this.el.getbufferLength();this.trigger(i.default.PLAYBACK_PROGRESS,{start:this.getCurrentTime(),current:X,total:this.el.getDuration()})}},M.prototype._onLevelEndlist=function(){this._updatePlaybackType()},M.prototype._firstPlay=function(){var I=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(n.default.once(this.cid+":manifestloaded",function(X,$){return I._manifestLoaded(X,$)}),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},M.prototype.volume=function(I){var X=this;this.isReady?this.el.playerVolume(I):this.listenToOnce(this,i.default.PLAYBACK_BUFFERFULL,function(){return X.volume(I)})},M.prototype.pause=function(){(this._playbackType!==l.default.LIVE||this._dvrEnabled)&&(this.el.playerPause(),this._playbackType===l.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0))},M.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(i.default.PLAYBACK_STOP),this.trigger(i.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},M.prototype.isPlaying=function(){return this._currentState?!!this._currentState.match(/playing/i):!1},M.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},M.prototype._normalizeDuration=function(I){return this._playbackType===l.default.LIVE&&(I=Math.max(0,I-10)),I},M.prototype.seekPercentage=function(I){var X=this.el.getDuration(),$=0;I>0&&($=X*I/100),this.seek($)},M.prototype.seek=function(I){var X=this.getDuration();if(this._playbackType===l.default.LIVE){var $=X-I>3;this._updateDvr($)}this.el.playerSeek(I),this.trigger(i.default.PLAYBACK_TIMEUPDATE,{current:I,total:X},this.name)},M.prototype._updateDvr=function(I){var X=!!this._dvrInUse;this._dvrInUse=I,this._dvrInUse!==X&&(this._updateSettings(),this.trigger(i.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(i.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},M.prototype._flashPlaybackError=function(I,X,$){var ee={code:I,description:$,level:a.default.Levels.FATAL,raw:{code:I,url:X,message:$}},K=this.createError(ee);this.trigger(i.default.PLAYBACK_ERROR,K),this.trigger(i.default.PLAYBACK_STOP)},M.prototype._manifestLoaded=function(I,X){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(i.default.PLAYBACK_LOADEDMETADATA,{duration:I,data:X})},M.prototype._fillLevels=function(){var I=this.el.getLevels(),X=I.length;this._levels=[];for(var $=0;$<X;$++)this._levels.push({id:$,label:I[$].height+"p",level:I[$]});this.trigger(i.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},M.prototype.destroy=function(){this.stopListening(),this.$el.remove()},M.prototype._updateSettings=function(){this.settings=O.default.extend({},this._defaultSettings),this._playbackType===l.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},M.prototype._createCallbacks=function(){var I=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new C.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(X,$){I.flashlsEvents[X].apply(I.flashlsEvents,$)}},M.prototype.render=function(){return B.prototype.render.call(this),this._createCallbacks(),this},(0,g.default)(M,[{key:"isReady",get:function(){return this._isReadyState}},{key:"dvrEnabled",get:function(){return!!this._dvrEnabled}}]),M}(m.default);E.default=F,F.canPlay=function(B,M){var N=B.split("?")[0].match(/.*\.(.*)$/)||[];return b.default.hasFlash&&(N.length>1&&N[1].toLowerCase()==="m3u8"||M==="application/x-mpegURL"||M==="application/vnd.apple.mpegurl")},P.exports=E.default},"./src/playbacks/flashls/flashls_events.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=_(r),s=e("./src/components/mediator.js"),A=_(s);function _(v){return v&&v.__esModule?v:{default:v}}var g=function(){function v(u){(0,h.default)(this,v),this.instanceId=u}return v.prototype.ready=function(){A.default.trigger(this.instanceId+":flashready")},v.prototype.videoSize=function(f,m){A.default.trigger(this.instanceId+":videosizechanged",f,m)},v.prototype.complete=function(){A.default.trigger(this.instanceId+":complete")},v.prototype.error=function(f,m,S){A.default.trigger(this.instanceId+":error",f,m,S)},v.prototype.manifest=function(f,m){A.default.trigger(this.instanceId+":manifestloaded",f,m)},v.prototype.audioLevelLoaded=function(f){A.default.trigger(this.instanceId+":audiolevelloaded",f)},v.prototype.levelLoaded=function(f){A.default.trigger(this.instanceId+":levelloaded",f)},v.prototype.levelEndlist=function(f){A.default.trigger(this.instanceId+":levelendlist",f)},v.prototype.fragmentLoaded=function(f){A.default.trigger(this.instanceId+":fragmentloaded",f)},v.prototype.fragmentPlaying=function(f){A.default.trigger(this.instanceId+":fragmentplaying",f)},v.prototype.position=function(f){A.default.trigger(this.instanceId+":timeupdate",f)},v.prototype.state=function(f){A.default.trigger(this.instanceId+":playbackstate",f)},v.prototype.seekState=function(f){A.default.trigger(this.instanceId+":seekstate",f)},v.prototype.switch=function(f){A.default.trigger(this.instanceId+":levelchanged",f)},v.prototype.audioTracksListChange=function(f){A.default.trigger(this.instanceId+":audiotracklistchanged",f)},v.prototype.audioTrackChange=function(f){A.default.trigger(this.instanceId+":audiotrackchanged",f)},v}();E.default=g,P.exports=E.default},"./src/playbacks/flashls/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/flashls/flashls.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/flashls/public/HLSPlayer.swf":function(P,E){P.exports="<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"},"./src/playbacks/hls/hls.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/toConsumableArray.js"),h=O(r),s=e("./node_modules/babel-runtime/core-js/json/stringify.js"),A=O(s),_=e("./node_modules/babel-runtime/helpers/extends.js"),g=O(_),v=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=O(v),f=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=O(f),S=e("./node_modules/babel-runtime/helpers/createClass.js"),i=O(S),p=e("./node_modules/babel-runtime/helpers/inherits.js"),y=O(p),o=e("./src/playbacks/html5_video/index.js"),l=O(o),t=e("./node_modules/hls.js/dist/hls.js"),n=O(t),c=e("./src/base/events.js"),b=O(c),x=e("./src/base/playback.js"),a=O(x),d=e("./src/base/utils.js"),C=e("./src/plugins/log/index.js"),T=O(C),L=e("./src/components/error/index.js"),R=O(L);function O(w){return w&&w.__esModule?w:{default:w}}var j=-1,D=function(w){(0,y.default)(F,w),(0,i.default)(F,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?j:this._currentLevel},set:function(M){this._currentLevel=M,this.trigger(b.default.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===a.default.LIVE&&this._playlistType!=="EVENT"?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return(0,d.now)()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var M=this._localStartTimeCorrelation,N=this._now-M.local,I=(M.remote+N)/1e3;return Math.min(I,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var M=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return M;var N=this._localEndTimeCorrelation,I=this._now-N.local,X=(N.remote+I)/1e3;return Math.max(M-this._extrapolatedWindowDuration,Math.min(X,M))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return this._segmentTargetDuration===null?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return n.default}}]);function F(){(0,u.default)(this,F);for(var B=arguments.length,M=Array(B),N=0;N<B;N++)M[N]=arguments[N];var I=(0,m.default)(this,w.call.apply(w,[this].concat(M)));return I.options.playback=(0,g.default)({},I.options,I.options.playback),I._minDvrSize=typeof I.options.hlsMinimumDvrSize>"u"?60:I.options.hlsMinimumDvrSize,I._extrapolatedWindowNumSegments=!I.options.playback||typeof I.options.playback.extrapolatedWindowNumSegments>"u"?2:I.options.playback.extrapolatedWindowNumSegments,I._playbackType=a.default.VOD,I._lastTimeUpdate={current:0,total:0},I._lastDuration=null,I._playableRegionStartTime=0,I._localStartTimeCorrelation=null,I._localEndTimeCorrelation=null,I._playableRegionDuration=0,I._programDateTime=0,I._durationExcludesAfterLiveSyncPoint=!1,I._segmentTargetDuration=null,I._playlistType=null,I._recoverAttemptsRemaining=I.options.hlsRecoverAttempts||16,I}return F.prototype._setup=function(){var M=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new n.default((0,d.assign)({},this.options.playback.hlsjsConfig)),this._hls.on(n.default.Events.MEDIA_ATTACHED,function(){return M._hls.loadSource(M.options.src)}),this._hls.on(n.default.Events.LEVEL_LOADED,function(N,I){return M._updatePlaybackType(N,I)}),this._hls.on(n.default.Events.LEVEL_UPDATED,function(N,I){return M._onLevelUpdated(N,I)}),this._hls.on(n.default.Events.LEVEL_SWITCHING,function(N,I){return M._onLevelSwitch(N,I)}),this._hls.on(n.default.Events.FRAG_LOADED,function(N,I){return M._onFragmentLoaded(N,I)}),this._hls.on(n.default.Events.ERROR,function(N,I){return M._onHLSJSError(N,I)}),this._hls.on(n.default.Events.SUBTITLE_TRACK_LOADED,function(N,I){return M._onSubtitleLoaded(N,I)}),this._hls.on(n.default.Events.SUBTITLE_TRACKS_UPDATED,function(){return M._ccTracksUpdated=!0}),this._hls.attachMedia(this.el)},F.prototype.render=function(){return this._ready(),w.prototype.render.call(this)},F.prototype._ready=function(){this._isReadyState=!0,this.trigger(b.default.PLAYBACK_READY,this.name)},F.prototype._recover=function(M,N,I){if(!this._recoveredDecodingError)this._recoveredDecodingError=!0,this._hls.recoverMediaError();else if(!this._recoveredAudioCodecError)this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else{T.default.error("hlsjs: failed to recover",{evt:M,data:N}),I.level=R.default.Levels.FATAL;var X=this.createError(I);this.trigger(b.default.PLAYBACK_ERROR,X),this.stop()}},F.prototype._setupSrc=function(M){},F.prototype._startTimeUpdateTimer=function(){var M=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval(function(){M._onDurationChange(),M._onTimeUpdate()},100))},F.prototype._stopTimeUpdateTimer=function(){!this._timeUpdateTimer||(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)},F.prototype.getProgramDateTime=function(){return this._programDateTime},F.prototype.getDuration=function(){return this._duration},F.prototype.getCurrentTime=function(){return Math.max(0,this.el.currentTime-this._startTime)},F.prototype.getStartTimeOffset=function(){return this._startTime},F.prototype.seekPercentage=function(M){var N=this._duration;M>0&&(N=this._duration*(M/100)),this.seek(N)},F.prototype.seek=function(M){M<0&&(T.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),M=this.getDuration()),this.dvrEnabled&&this._updateDvr(M<this.getDuration()-3),M+=this._startTime,w.prototype.seek.call(this,M)},F.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},F.prototype._updateDvr=function(M){this.trigger(b.default.PLAYBACK_DVR,M),this.trigger(b.default.PLAYBACK_STATS_ADD,{dvr:M})},F.prototype._updateSettings=function(){this._playbackType===a.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(b.default.PLAYBACK_SETTINGSUPDATE)},F.prototype._onHLSJSError=function(M,N){var I={code:N.type+"_"+N.details,description:this.name+" error: type: "+N.type+", details: "+N.details,raw:N},X=void 0;if(N.response&&(I.description+=", response: "+(0,A.default)(N.response)),N.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,N.type){case n.default.ErrorTypes.NETWORK_ERROR:switch(N.details){case n.default.ErrorDetails.MANIFEST_LOAD_ERROR:case n.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case n.default.ErrorDetails.MANIFEST_PARSING_ERROR:case n.default.ErrorDetails.LEVEL_LOAD_ERROR:case n.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:T.default.error("hlsjs: unrecoverable network fatal error.",{evt:M,data:N}),X=this.createError(I),this.trigger(b.default.PLAYBACK_ERROR,X),this.stop();break;default:T.default.warn("hlsjs: trying to recover from network error.",{evt:M,data:N}),I.level=R.default.Levels.WARN,this.createError(I),this._hls.startLoad();break}break;case n.default.ErrorTypes.MEDIA_ERROR:T.default.warn("hlsjs: trying to recover from media error.",{evt:M,data:N}),I.level=R.default.Levels.WARN,this.createError(I),this._recover(M,N,I);break;default:T.default.error("hlsjs: could not recover from error.",{evt:M,data:N}),X=this.createError(I),this.trigger(b.default.PLAYBACK_ERROR,X),this.stop();break}else T.default.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:M,data:N}),X=this.createError(I),this.trigger(b.default.PLAYBACK_ERROR,X),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(N)){T.default.error("hlsjs: could not load decrypt key.",{evt:M,data:N}),X=this.createError(I),this.trigger(b.default.PLAYBACK_ERROR,X),this.stop();return}I.level=R.default.Levels.WARN,this.createError(I),T.default.warn("hlsjs: non-fatal error occurred",{evt:M,data:N})}},F.prototype._keyIsDenied=function(M){return M.type===n.default.ErrorTypes.NETWORK_ERROR&&M.details===n.default.ErrorDetails.KEY_LOAD_ERROR&&M.response&&M.response.code>=400},F.prototype._onTimeUpdate=function(){var M={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},N=this._lastTimeUpdate&&M.current===this._lastTimeUpdate.current&&M.total===this._lastTimeUpdate.total;N||(this._lastTimeUpdate=M,this.trigger(b.default.PLAYBACK_TIMEUPDATE,M,this.name))},F.prototype._onDurationChange=function(){var M=this.getDuration();this._lastDuration!==M&&(this._lastDuration=M,w.prototype._onDurationChange.call(this))},F.prototype._onProgress=function(){if(!!this.el.buffered.length){for(var M=[],N=0,I=0;I<this.el.buffered.length;I++)M=[].concat((0,h.default)(M),[{start:Math.max(0,this.el.buffered.start(I)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(I)-this._playableRegionStartTime)}]),this.el.currentTime>=M[I].start&&this.el.currentTime<=M[I].end&&(N=I);var X={start:M[N].start,current:M[N].end,total:this.getDuration()};this.trigger(b.default.PLAYBACK_PROGRESS,X,M)}},F.prototype.play=function(){this._hls||this._setup(),w.prototype.play.call(this),this._startTimeUpdateTimer()},F.prototype.pause=function(){!this._hls||(w.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},F.prototype.stop=function(){this._stopTimeUpdateTimer(),this._hls&&(w.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},F.prototype.destroy=function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),w.prototype.destroy.call(this)},F.prototype._updatePlaybackType=function(M,N){this._playbackType=N.details.live?a.default.LIVE:a.default.VOD,this._onLevelUpdated(M,N),this._ccTracksUpdated&&this._playbackType===a.default.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()},F.prototype._fillLevels=function(){this._levels=this._hls.levels.map(function(M,N){return{id:N,level:M,label:M.bitrate/1e3+"Kbps"}}),this.trigger(b.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},F.prototype._onLevelUpdated=function(M,N){this._segmentTargetDuration=N.details.targetduration,this._playlistType=N.details.type||null;var I=!1,X=!1,$=N.details.fragments,ee=this._playableRegionStartTime,K=this._playableRegionDuration;if($.length!==0){if($[0].rawProgramDateTime&&(this._programDateTime=$[0].rawProgramDateTime),this._playableRegionStartTime!==$[0].start&&(I=!0,this._playableRegionStartTime=$[0].start),I)if(!this._localStartTimeCorrelation)this._localStartTimeCorrelation={local:this._now,remote:($[0].start+this._extrapolatedWindowDuration/2)*1e3};else{var J=this._localStartTimeCorrelation,V=this._now-J.local,W=(J.remote+V)/1e3;W<$[0].start?this._localStartTimeCorrelation={local:this._now,remote:$[0].start*1e3}:W>ee+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:Math.max($[0].start,ee+this._extrapolatedWindowDuration)*1e3})}var Y=N.details.totalduration;if(this._playbackType===a.default.LIVE){var te=N.details.targetduration,se=this.options.playback.hlsjsConfig||{},ce=se.liveSyncDurationCount||n.default.DefaultConfig.liveSyncDurationCount,ue=te*ce;ue<=Y?(Y-=ue,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}Y!==this._playableRegionDuration&&(X=!0,this._playableRegionDuration=Y);var re=$[0].start+Y,ne=ee+K,z=re!==ne;if(z)if(!this._localEndTimeCorrelation)this._localEndTimeCorrelation={local:this._now,remote:re*1e3};else{var ae=this._localEndTimeCorrelation,de=this._now-ae.local,he=(ae.remote+de)/1e3;he>re?this._localEndTimeCorrelation={local:this._now,remote:re*1e3}:he<re-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:(re-this._extrapolatedWindowDuration)*1e3}:he>ne&&(this._localEndTimeCorrelation={local:this._now,remote:ne*1e3})}X&&this._onDurationChange(),I&&this._onProgress()}},F.prototype._onFragmentLoaded=function(M,N){this.trigger(b.default.PLAYBACK_FRAGMENT_LOADED,N)},F.prototype._onSubtitleLoaded=function(){if(!this._ccIsSetup){this.trigger(b.default.PLAYBACK_SUBTITLE_AVAILABLE);var M=this._playbackType===a.default.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=M,this._ccIsSetup=!0}},F.prototype._onLevelSwitch=function(M,N){this.levels.length||this._fillLevels(),this.trigger(b.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(b.default.PLAYBACK_LEVEL_SWITCH,N);var I=this._hls.levels[N.level];I&&(this.highDefinition=I.height>=720||I.bitrate/1e3>=2e3,this.trigger(b.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(b.default.PLAYBACK_BITRATE,{height:I.height,width:I.width,bandwidth:I.bitrate,bitrate:I.bitrate,level:N.level}))},F.prototype.getPlaybackType=function(){return this._playbackType},F.prototype.isSeekEnabled=function(){return this._playbackType===a.default.VOD||this.dvrEnabled},(0,i.default)(F,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===a.default.LIVE}}]),F}(l.default);E.default=D,D.canPlay=function(w,F){var B=w.split("?")[0].match(/.*\.(.*)$/)||[],M=B.length>1&&B[1].toLowerCase()==="m3u8"||(0,d.listContainsIgnoreCase)(F,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!!(n.default.isSupported()&&M)},P.exports=E.default},"./src/playbacks/hls/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/hls/hls.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/html5_audio/html5_audio.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=o(r),s=e("./node_modules/babel-runtime/helpers/createClass.js"),A=o(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=o(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=o(v),f=e("./src/base/events.js"),m=o(f),S=e("./src/base/playback.js"),i=o(S),p=e("./src/playbacks/html5_video/index.js"),y=o(p);function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t){(0,u.default)(n,t);function n(){return(0,h.default)(this,n),(0,g.default)(this,t.apply(this,arguments))}return n.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(m.default.PLAYBACK_SETTINGSUPDATE)},n.prototype.getPlaybackType=function(){return i.default.AOD},(0,A.default)(n,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),n}(y.default);E.default=l,l.canPlay=function(t,n){var c={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return y.default._canPlay("audio",c,t,n)},P.exports=E.default},"./src/playbacks/html5_audio/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/html5_audio/html5_audio.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/html5_video/html5_video.js":function(P,E,e){(function(r){Object.defineProperty(E,"__esModule",{value:!0});var h=e("./node_modules/babel-runtime/core-js/array/from.js"),s=B(h),A=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),_=B(A),g=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=B(g),u=e("./node_modules/babel-runtime/helpers/createClass.js"),f=B(u),m=e("./node_modules/babel-runtime/helpers/inherits.js"),S=B(m),i=e("./node_modules/babel-runtime/helpers/toConsumableArray.js"),p=B(i),y=e("./node_modules/babel-runtime/core-js/object/keys.js"),o=B(y),l=e("./src/base/utils.js"),t=e("./src/base/playback.js"),n=B(t),c=e("./src/components/browser/index.js"),b=B(c),x=e("./src/components/error/index.js"),a=B(x),d=e("./src/base/events.js"),C=B(d),T=e("./src/plugins/log/index.js"),L=B(T),R=e("./node_modules/clappr-zepto/zepto.js"),O=B(R),j=e("./src/base/template.js"),D=B(j),w=e("./src/playbacks/html5_video/public/tracks.html"),F=B(w);e("./src/playbacks/html5_video/public/style.scss");function B(ee){return ee&&ee.__esModule?ee:{default:ee}}var M={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(ee){return'video/mp4; codecs="'+ee+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};M.ogv=M.ogg,M["3gp"]=M["3gpp"];var N={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},I=(0,o.default)(N).reduce(function(ee,K){return[].concat((0,p.default)(ee),(0,p.default)(N[K]))},[]),X={code:"unknown",message:"unknown"},$=function(ee){(0,S.default)(K,ee),(0,f.default)(K,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var V=this.options.src,W=K._mimeTypesForUrl(V,N,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||I.indexOf(W[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]);function K(){(0,_.default)(this,K);for(var J=arguments.length,V=Array(J),W=0;W<J;W++)V[W]=arguments[W];var Y=(0,v.default)(this,ee.call.apply(ee,[this].concat(V)));Y._destroyed=!1,Y._loadStarted=!1,Y._isBuffering=!1,Y._playheadMoving=!1,Y._playheadMovingTimer=null,Y._stopped=!1,Y._ccTrackId=-1,Y._setupSrc(Y.options.src),Y.options.playback||(Y.options.playback=Y.options||{}),Y.options.playback.disableContextMenu=Y.options.playback.disableContextMenu||Y.options.disableVideoTagContextMenu;var te=Y.options.playback,se=te.preload||(b.default.isSafari?"auto":Y.options.preload),ce=void 0;return Y.options.poster&&(typeof Y.options.poster=="string"?ce=Y.options.poster:typeof Y.options.poster.url=="string"&&(ce=Y.options.poster.url)),O.default.extend(Y.el,{muted:Y.options.mute,defaultMuted:Y.options.mute,loop:Y.options.loop,poster:ce,preload:se||"metadata",controls:(te.controls||Y.options.useVideoTagDefaultControls)&&"controls",crossOrigin:te.crossOrigin,"x-webkit-playsinline":te.playInline}),te.playInline&&Y.$el.attr({playsinline:"playsinline"}),te.crossOrigin&&Y.$el.attr({crossorigin:te.crossOrigin}),Y.settings={default:["seekbar"]},Y.settings.left=["playpause","position","duration"],Y.settings.right=["fullscreen","volume","hd-indicator"],te.externalTracks&&Y._setupExternalTracks(te.externalTracks),Y.options.autoPlay&&Y.attemptAutoPlay(),Y}return K.prototype.configure=function(V){ee.prototype.configure.call(this,V),this.el.loop=!!V.loop},K.prototype.attemptAutoPlay=function(){var V=this;this.canAutoPlay(function(W,Y){Y&&L.default.warn(V.name,"autoplay error.",{result:W,error:Y}),W&&r.nextTick(function(){return!V._destroyed&&V.play()})})},K.prototype.canAutoPlay=function(V){this.options.disableCanAutoPlay&&V(!0,null);var W={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};b.default.isMobile&&l.DomRecycler.options.recycleVideo&&(W.element=this.el),(0,l.canAutoPlayMedia)(V,W)},K.prototype._setupExternalTracks=function(V){this._externalTracks=V.map(function(W){return{kind:W.kind||"subtitles",label:W.label,lang:W.lang,src:W.src}})},K.prototype._setupSrc=function(V){this.el.src!==V&&(this._ccIsSetup=!1,this.el.src=V,this._src=this.el.src)},K.prototype._onLoadedMetadata=function(V){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_LOADEDMETADATA,{duration:V.target.duration,data:V}),this._updateSettings();var W=typeof this._options.autoSeekFromUrl>"u"||this._options.autoSeekFromUrl;this.getPlaybackType()!==n.default.LIVE&&W&&this._checkInitialSeek()},K.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},K.prototype._updateSettings=function(){this.getPlaybackType()===n.default.VOD||this.getPlaybackType()===n.default.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(C.default.PLAYBACK_SETTINGSUPDATE)},K.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},K.prototype.getPlaybackType=function(){var V=this.tagName==="audio"?n.default.AOD:n.default.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?n.default.LIVE:V},K.prototype.isHighDefinitionInUse=function(){return!1},K.prototype.consent=function(){this.isPlaying()||(ee.prototype.consent.call(this),this.el.load())},K.prototype.play=function(){this.trigger(C.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var V=this.el.play();V&&V.catch&&V.catch(function(){})},K.prototype.pause=function(){this.el.pause()},K.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_STOP)},K.prototype.volume=function(V){V===0?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=V/100)},K.prototype.mute=function(){this.el.muted=!0},K.prototype.unmute=function(){this.el.muted=!1},K.prototype.isMuted=function(){return this.el.muted===!0||this.el.volume===0},K.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},K.prototype._startPlayheadMovingChecks=function(){this._playheadMovingTimer===null&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},K.prototype._stopPlayheadMovingChecks=function(){this._playheadMovingTimer!==null&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},K.prototype._determineIfPlayheadMoving=function(){var V=this._playheadMovingTimeOnCheck,W=this.el.currentTime;this._playheadMoving=V!==W,this._playheadMovingTimeOnCheck=W,this._handleBufferingEvents()},K.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},K.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},K.prototype._onCanPlay=function(){this._handleBufferingEvents()},K.prototype._onPlaying=function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_PLAY)},K.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_PAUSE)},K.prototype._onSeeking=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_SEEK)},K.prototype._onSeeked=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_SEEKED)},K.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_ENDED,this.name)},K.prototype._handleBufferingEvents=function(){var V=!this.el.ended&&!this.el.paused,W=this._loadStarted&&!this.el.ended&&!this._stopped&&(V&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==W&&(this._isBuffering=W,W?this.trigger(C.default.PLAYBACK_BUFFERING,this.name):this.trigger(C.default.PLAYBACK_BUFFERFULL,this.name))},K.prototype._onError=function(){var V=this.el.error||X,W=V.code,Y=V.message,te=W===X.code,se=this.createError({code:W,description:Y,raw:this.el.error,level:te?a.default.Levels.WARN:a.default.Levels.FATAL});te?L.default.warn(this.name,"HTML5 unknown error: ",se):this.trigger(C.default.PLAYBACK_ERROR,se)},K.prototype.destroy=function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),ee.prototype.destroy.call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,l.DomRecycler.garbage(this.$el)},K.prototype.seek=function(V){this.el.currentTime=V},K.prototype.seekPercentage=function(V){var W=this.el.duration*(V/100);this.seek(W)},K.prototype._checkInitialSeek=function(){var V=(0,l.seekStringToSeconds)();V!==0&&this.seek(V)},K.prototype.getCurrentTime=function(){return this.el.currentTime},K.prototype.getDuration=function(){return this.el.duration},K.prototype._onTimeUpdate=function(){this.getPlaybackType()===n.default.LIVE?this.trigger(C.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(C.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},K.prototype._onProgress=function(){if(!!this.el.buffered.length){for(var V=[],W=0,Y=0;Y<this.el.buffered.length;Y++)V=[].concat((0,p.default)(V),[{start:this.el.buffered.start(Y),end:this.el.buffered.end(Y)}]),this.el.currentTime>=V[Y].start&&this.el.currentTime<=V[Y].end&&(W=Y);var te={start:V[W].start,current:V[W].end,total:this.el.duration};this.trigger(C.default.PLAYBACK_PROGRESS,te,V)}},K.prototype._typeFor=function(V){var W=K._mimeTypesForUrl(V,M,this.options.mimeType);W.length===0&&(W=K._mimeTypesForUrl(V,N,this.options.mimeType));var Y=W[0]||"";return Y.split(";")[0]},K.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(C.default.PLAYBACK_READY,this.name))},K.prototype._checkForClosedCaptions=function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(C.default.PLAYBACK_SUBTITLE_AVAILABLE);var V=this.closedCaptionsTrackId;this.closedCaptionsTrackId=V,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}},K.prototype._handleTextTrackChange=function(){var V=this.closedCaptionsTracks,W=V.find(function(Y){return Y.track.mode==="showing"})||{id:-1};this._ccTrackId!==W.id&&(this._ccTrackId=W.id,this.trigger(C.default.PLAYBACK_SUBTITLE_CHANGED,{id:W.id}))},K.prototype.render=function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",function(){return!1}),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this},(0,f.default)(K,[{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===K.prototype.name}},{key:"closedCaptionsTracks",get:function(){var V=0,W=function(){return V++},Y=this.el.textTracks?(0,s.default)(this.el.textTracks):[];return Y.filter(function(te){return te.kind==="subtitles"||te.kind==="captions"}).map(function(te){return{id:W(),name:te.label,track:te}})}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(V){if(!!(0,l.isNumber)(V)){var W=this.closedCaptionsTracks,Y=void 0;V!==-1&&(Y=W.find(function(te){return te.id===V}),!Y||Y.track.mode==="showing")||(W.filter(function(te){return te.track.mode!=="hidden"}).forEach(function(te){return te.track.mode="hidden"}),Y&&(Y.track.mode="showing"),this._ccTrackId=V,this.trigger(C.default.PLAYBACK_SUBTITLE_CHANGED,{id:V}))}}},{key:"template",get:function(){return(0,D.default)(F.default)}}]),K}(n.default);E.default=$,$._mimeTypesForUrl=function(ee,K,J){var V=(ee.split("?")[0].match(/.*\.(.*)$/)||[])[1],W=J||V&&K[V.toLowerCase()]||[];return W.constructor===Array?W:[W]},$._canPlay=function(ee,K,J,V){var W=$._mimeTypesForUrl(J,K,V),Y=document.createElement(ee);return!!W.filter(function(te){return!!Y.canPlayType(te).replace(/no/,"")})[0]},$.canPlay=function(ee,K){return $._canPlay("audio",N,ee,K)||$._canPlay("video",M,ee,K)},P.exports=E.default}).call(this,e("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/playbacks/html5_video/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/html5_video/html5_video.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/html5_video/public/style.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/playbacks/html5_video/public/tracks.html":function(P,E){P.exports=`<% for (var i = 0; i < tracks.length; i++) { %>
  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />
<% }; %>
`},"./src/playbacks/html_img/html_img.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=p(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=p(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=p(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=p(v),f=e("./src/base/playback.js"),m=p(f),S=e("./src/base/events.js"),i=p(S);e("./src/playbacks/html_img/public/style.scss");function p(o){return o&&o.__esModule?o:{default:o}}var y=function(o){(0,u.default)(l,o),l.prototype.getPlaybackType=function(){return m.default.NO_OP},(0,g.default)(l,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]);function l(t){(0,h.default)(this,l);var n=(0,A.default)(this,o.call(this,t));return n.el.src=t.src,n}return l.prototype.render=function(){return this.trigger(i.default.PLAYBACK_READY,this.name),this},l.prototype._onLoad=function(){this.trigger(i.default.PLAYBACK_ENDED,this.name)},l.prototype._onError=function(n){var c=n.type==="error"?"load error":"loading aborted";this.trigger(i.default.PLAYBACK_ERROR,{message:c},this.name)},l}(m.default);E.default=y,y.canPlay=function(o){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(o)},P.exports=E.default},"./src/playbacks/html_img/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/html_img/html_img.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/html_img/public/style.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/playbacks/no_op/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/playbacks/no_op/no_op.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/playbacks/no_op/no_op.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=n(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=n(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=n(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=n(v),f=e("./src/base/utils.js"),m=e("./src/base/playback.js"),S=n(m),i=e("./src/base/template.js"),p=n(i),y=e("./src/base/events.js"),o=n(y),l=e("./src/playbacks/no_op/public/error.html"),t=n(l);e("./src/playbacks/no_op/public/style.scss");function n(b){return b&&b.__esModule?b:{default:b}}var c=function(b){(0,u.default)(x,b),(0,g.default)(x,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,p.default)(t.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]);function x(){(0,h.default)(this,x);for(var a=arguments.length,d=Array(a),C=0;C<a;C++)d[C]=arguments[C];var T=(0,A.default)(this,b.call.apply(b,[this].concat(d)));return T._noiseFrameNum=-1,T}return x.prototype.render=function(){var d=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:d})),this.trigger(o.default.PLAYBACK_READY,this.name);var C=!!(this.options.poster&&this.options.poster.showForNoOp);return(this.options.autoPlay||!C)&&this._animate(),this},x.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var d=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),C=void 0;try{C=new Uint32Array(d.data.buffer)}catch{C=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var T=d.data,L=0;L<T.length;L++)C[L]=T[L]}for(var R=C.length,O=Math.random()*6+4,j=0,D=0,w=0;w<R;){if(j<0){j=O*Math.random();var F=Math.pow(Math.random(),.4);D=255*F<<24}j-=1,C[w++]=D}this.context.putImageData(d,0,0)}},x.prototype._loop=function(){var d=this;this._stop||(this._noise(),this._animationHandle=(0,f.requestAnimationFrame)(function(){return d._loop()}))},x.prototype.destroy=function(){this._animationHandle&&((0,f.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},x.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},x}(S.default);E.default=c,c.canPlay=function(b){return!0},P.exports=E.default},"./src/playbacks/no_op/public/error.html":function(P,E){P.exports=`<canvas data-no-op-canvas></canvas>
<p data-no-op-msg><%=message%><p>
`},"./src/playbacks/no_op/public/style.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/click_to_pause/click_to_pause.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=o(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=o(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=o(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=o(v),f=e("./src/base/container_plugin.js"),m=o(f),S=e("./src/base/events.js"),i=o(S),p=e("./src/base/playback.js"),y=o(p);function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t){(0,u.default)(n,t),(0,g.default)(n,[{key:"name",get:function(){return"click_to_pause"}}]);function n(c){return(0,h.default)(this,n),(0,A.default)(this,t.call(this,c))}return n.prototype.bindEvents=function(){this.listenTo(this.container,i.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,i.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},n.prototype.click=function(){(this.container.getPlaybackType()!==y.default.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())},n.prototype.settingsUpdate=function(){var b=this.container.getPlaybackType()!==y.default.LIVE||this.container.isDvrEnabled();if(b!==this.pointerEnabled){var x=b?"addClass":"removeClass";this.container.$el[x]("pointer-enabled"),this.pointerEnabled=b}},n}(m.default);E.default=l,P.exports=E.default},"./src/plugins/click_to_pause/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/click_to_pause/click_to_pause.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/closed_captions/closed_captions.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=c(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=c(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=c(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=c(v),f=e("./src/base/ui_core_plugin.js"),m=c(f),S=e("./src/base/template.js"),i=c(S),p=e("./src/base/events.js"),y=c(p),o=e("./src/icons/09-cc.svg"),l=c(o),t=e("./src/plugins/closed_captions/public/closed_captions.html"),n=c(t);e("./src/plugins/closed_captions/public/closed_captions.scss");function c(x){return x&&x.__esModule?x:{default:x}}var b=function(x){(0,u.default)(a,x),(0,g.default)(a,[{key:"name",get:function(){return"closed_captions"}},{key:"template",get:function(){return(0,i.default)(n.default)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}}]);function a(d){(0,h.default)(this,a);var C=(0,A.default)(this,x.call(this,d)),T=d.options.closedCaptionsConfig;return C._title=T&&T.title?T.title:null,C._ariaLabel=T&&T.ariaLabel?T.ariaLabel:"cc-button",C._labelCb=T&&T.labelCallback&&typeof T.labelCallback=="function"?T.labelCallback:function(L){return L.name},C}return a.prototype.bindEvents=function(){this.listenTo(this.core,y.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_HIDE,this.hideContextMenu),this.container=this.core.getCurrentContainer(),this.container&&(this.listenTo(this.container,y.default.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,y.default.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,y.default.CONTAINER_STOP,this.onContainerStop))},a.prototype.onContainerStop=function(){this.ccAvailable(!1)},a.prototype.containerChanged=function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()},a.prototype.onSubtitleAvailable=function(){this.renderCcButton(),this.ccAvailable(!0)},a.prototype.onSubtitleChanged=function(C){this.setCurrentContextMenuElement(C.id)},a.prototype.onTrackSelect=function(C){var T=parseInt(C.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=T,this.hideContextMenu(),C.stopPropagation(),!1},a.prototype.ccAvailable=function(C){var T=C?"addClass":"removeClass";this.$el[T]("available")},a.prototype.toggleContextMenu=function(){this.$el.find("ul").toggle()},a.prototype.hideContextMenu=function(){this.$el.find("ul").hide()},a.prototype.contextMenuElement=function(C){return this.$el.find("ul a"+(isNaN(C)?"":'[data-cc-select="'+C+'"]')).parent()},a.prototype.setCurrentContextMenuElement=function(C){if(this._trackId!==C){this.contextMenuElement().removeClass("current"),this.contextMenuElement(C).addClass("current");var T=C>-1?"addClass":"removeClass";this.$ccButton[T]("enabled"),this._trackId=C}},a.prototype.renderCcButton=function(){for(var C=this.container?this.container.closedCaptionsTracks:[],T=0;T<C.length;T++)C[T].label=this._labelCb(C[T]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:C})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(l.default),this.$el.append(this.style)},a.prototype.render=function(){this.renderCcButton();var C=this.core.mediaControl.$el.find("button[data-fullscreen]");return C[0]?this.$el.insertAfter(C):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this},a}(m.default);E.default=b,P.exports=E.default},"./src/plugins/closed_captions/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/closed_captions/closed_captions.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/closed_captions/public/closed_captions.html":function(P,E){P.exports=`<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>
<ul>
  <% if (title) { %>
  <li data-title><%= title %></li>
  <% }; %>
  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>
  <% for (var i = 0; i < tracks.length; i++) { %>
    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>
  <% }; %>
</ul>
`},"./src/plugins/closed_captions/public/closed_captions.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/dvr_controls/dvr_controls.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=c(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=c(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=c(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=c(v),f=e("./src/base/ui_core_plugin.js"),m=c(f),S=e("./src/base/template.js"),i=c(S),p=e("./src/base/playback.js"),y=c(p),o=e("./src/base/events.js"),l=c(o),t=e("./src/plugins/dvr_controls/public/index.html"),n=c(t);e("./src/plugins/dvr_controls/public/dvr_controls.scss");function c(x){return x&&x.__esModule?x:{default:x}}var b=function(x){(0,u.default)(a,x),(0,g.default)(a,[{key:"template",get:function(){return(0,i.default)(n.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]);function a(d){(0,h.default)(this,a);var C=(0,A.default)(this,x.call(this,d));return C.settingsUpdate(),C}return a.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,l.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,l.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,l.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),l.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},a.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},a.prototype.dvrChanged=function(C){this.core.getPlaybackType()===y.default.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),C?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))},a.prototype.click=function(){var C=this.core.mediaControl,T=C.container;T.isPlaying()||T.play(),C.$el.hasClass("dvr")&&T.seek(T.getDuration())},a.prototype.settingsUpdate=function(){var C=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click(function(){return C.click()})),this.bindEvents()},a.prototype.shouldRender=function(){var C=this.core.options.useDvrControls===void 0||!!this.core.options.useDvrControls;return C&&this.core.getPlaybackType()===y.default.LIVE},a.prototype.render=function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},a}(m.default);E.default=b,P.exports=E.default},"./src/plugins/dvr_controls/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/dvr_controls/dvr_controls.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/dvr_controls/public/dvr_controls.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/dvr_controls/public/index.html":function(P,E){P.exports=`<div class="live-info"><%= live %></div>
<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>
`},"./src/plugins/end_video.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=p(r),s=e("./node_modules/babel-runtime/helpers/createClass.js"),A=p(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=p(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=p(v),f=e("./src/base/events.js"),m=p(f),S=e("./src/base/core_plugin.js"),i=p(S);function p(o){return o&&o.__esModule?o:{default:o}}var y=function(o){(0,u.default)(l,o);function l(){return(0,h.default)(this,l),(0,g.default)(this,o.apply(this,arguments))}return l.prototype.bindEvents=function(){this.listenTo(this.core,m.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var n=this.core.activeContainer;n&&(this.listenTo(n,m.default.CONTAINER_ENDED,this.ended),this.listenTo(n,m.default.CONTAINER_STOP,this.ended))},l.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},l.prototype.ended=function(){var n=typeof this.core.options.exitFullscreenOnEnd>"u"||this.core.options.exitFullscreenOnEnd;n&&this.core.isFullscreen()&&this.core.toggleFullscreen()},(0,A.default)(l,[{key:"name",get:function(){return"end_video"}}]),l}(i.default);E.default=y,P.exports=E.default},"./src/plugins/error_screen/error_screen.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=x(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=x(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=x(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=x(v),f=e("./src/base/events.js"),m=x(f),S=e("./src/base/ui_core_plugin.js"),i=x(S),p=e("./src/base/template.js"),y=x(p),o=e("./src/components/error/index.js"),l=x(o),t=e("./src/icons/10-reload.svg"),n=x(t),c=e("./src/plugins/error_screen/public/error_screen.html"),b=x(c);e("./src/plugins/error_screen/public/error_screen.scss");function x(d){return d&&d.__esModule?d:{default:d}}var a=function(d){(0,u.default)(C,d),(0,g.default)(C,[{key:"name",get:function(){return"error_screen"}},{key:"template",get:function(){return(0,y.default)(b.default)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}}]);function C(T){var L;(0,h.default)(this,C);var R=(0,A.default)(this,d.call(this,T));return R.options.disableErrorScreen?(L=R.disable(),(0,A.default)(R,L)):R}return C.prototype.bindEvents=function(){this.listenTo(this.core,m.default.ERROR,this.onError),this.listenTo(this.core,m.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)},C.prototype.bindReload=function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))},C.prototype.reload=function(){var L=this;this.listenToOnce(this.core,m.default.CORE_READY,function(){return L.container.play()}),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()},C.prototype.unbindReload=function(){this.reloadButton&&this.reloadButton.off("click")},C.prototype.onContainerChanged=function(){this.err=null,this.unbindReload(),this.hide()},C.prototype.onError=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};L.level===l.default.Levels.FATAL&&(this.err=L,this.container.disableMediaControl(),this.container.stop(),this.show())},C.prototype.show=function(){this.render(),this.$el.show()},C.prototype.hide=function(){this.$el.hide()},C.prototype.render=function(){if(!!this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:n.default})),this.core.$el.append(this.el),this.bindReload(),this},C}(i.default);E.default=a,P.exports=E.default},"./src/plugins/error_screen/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/error_screen/error_screen.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/error_screen/public/error_screen.html":function(P,E){P.exports=`<div class="player-error-screen__content" data-error-screen>
  <% if (icon) { %>
  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>
  <% } %>
  <div class="player-error-screen__title" data-error-screen><%= title %></div>
  <div class="player-error-screen__message" data-error-screen><%= message %></div>
  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>
  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>
</div>
`},"./src/plugins/error_screen/public/error_screen.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/favicon/favicon.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=c(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=c(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=c(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=c(v),f=e("./src/base/core_plugin.js"),m=c(f),S=e("./src/base/events.js"),i=c(S),p=e("./node_modules/clappr-zepto/zepto.js"),y=c(p),o=e("./src/icons/01-play.svg"),l=c(o),t=e("./src/icons/02-pause.svg"),n=c(t);function c(a){return a&&a.__esModule?a:{default:a}}var b=(0,y.default)('link[rel="shortcut icon"]'),x=function(a){(0,u.default)(d,a),(0,g.default)(d,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return b}}]);function d(C){(0,h.default)(this,d);var T=(0,A.default)(this,a.call(this,C));return T._container=null,T.configure(),T}return d.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,i.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,i.default.CORE_OPTIONS_CHANGE,this.configure))},d.prototype.bindEvents=function(){this.listenTo(this.core,i.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,i.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()},d.prototype.containerChanged=function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,i.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,i.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,i.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,i.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,i.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},d.prototype.disable=function(){a.prototype.disable.call(this),this.resetIcon()},d.prototype.destroy=function(){a.prototype.destroy.call(this),this.resetIcon()},d.prototype.createIcon=function(T){var L=(0,y.default)("<canvas/>");L[0].width=16,L[0].height=16;var R=L[0].getContext("2d");R.fillStyle="#000";var O=(0,y.default)(T).find("path").attr("d"),j=new Path2D(O);R.fill(j);var D=(0,y.default)('<link rel="shortcut icon" type="image/png"/>');return D.attr("href",L[0].toDataURL("image/png")),D},d.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(l.default)),this.changeIcon(this.playIcon)},d.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(n.default)),this.changeIcon(this.pauseIcon)},d.prototype.resetIcon=function(){(0,y.default)('link[rel="shortcut icon"]').remove(),(0,y.default)("head").append(this.oldIcon)},d.prototype.changeIcon=function(T){T&&((0,y.default)('link[rel="shortcut icon"]').remove(),(0,y.default)("head").append(T))},d}(m.default);E.default=x,P.exports=E.default},"./src/plugins/favicon/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/favicon/favicon.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/google_analytics/google_analytics.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=p(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=p(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=p(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=p(v),f=e("./src/base/container_plugin.js"),m=p(f),S=e("./src/base/events.js"),i=p(S);function p(o){return o&&o.__esModule?o:{default:o}}var y=function(o){(0,u.default)(l,o),(0,g.default)(l,[{key:"name",get:function(){return"google_analytics"}}]);function l(t){(0,h.default)(this,l);var n=(0,A.default)(this,o.call(this,t));return n.container.options.gaAccount&&(n.account=n.container.options.gaAccount,n.trackerName=n.container.options.gaTrackerName?n.container.options.gaTrackerName+".":"Clappr.",n.domainName=n.container.options.gaDomainName,n.currentHDState=void 0,n.embedScript()),n}return l.prototype.embedScript=function(){var n=this;if(window._gat)this.addEventListeners();else{var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("async","async"),c.setAttribute("src","//www.google-analytics.com/ga.js"),c.onload=function(){return n.addEventListeners()},document.body.appendChild(c)}},l.prototype.addEventListeners=function(){var n=this;this.container&&(this.listenTo(this.container,i.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,i.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,i.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,i.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,i.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,i.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,i.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,i.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,i.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,i.default.CONTAINER_VOLUME,function(c){return n.onVolumeChanged(c)}),this.listenTo(this.container,i.default.CONTAINER_SEEK,function(c){return n.onSeek(c)}),this.listenTo(this.container,i.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,i.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,i.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},l.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},l.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},l.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},l.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},l.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},l.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},l.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},l.prototype.onHD=function(n){var c=n?"ON":"OFF";c!==this.currentHDState&&(this.currentHDState=c,this.push(["Video","HD - "+c,this.container.playback.src]))},l.prototype.onPlaybackChanged=function(n){n.type!==null&&this.push(["Video","Playback Type - "+n.type,this.container.playback.src])},l.prototype.onDVR=function(n){var c=n?"ON":"OFF";this.push(["Interaction","DVR - "+c,this.container.playback.src])},l.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},l.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},l.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},l.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},l.prototype.push=function(n){var c=[this.trackerName+"_trackEvent"].concat(n);_gaq.push(c)},l}(m.default);E.default=y,P.exports=E.default},"./src/plugins/google_analytics/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/google_analytics/google_analytics.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/log/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/log/log.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/log/log.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=A(r),s=e("./src/vendor/index.js");function A(n){return n&&n.__esModule?n:{default:n}}var _="font-weight: bold; font-size: 13px;",g="color: #006600;"+_,v="color: #0000ff;"+_,u="color: #ff8000;"+_,f="color: #ff0000;"+_,m=0,S=1,i=2,p=3,y=p,o=[v,g,u,f,f],l=["debug","info","warn","error","disabled"],t=function(){function n(){var c=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y;(0,h.default)(this,n),this.kibo=new s.Kibo,this.kibo.down(["ctrl shift d"],function(){return c.onOff()}),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=b,this.offLevel=x}return n.prototype.debug=function(b){this.log(b,m,Array.prototype.slice.call(arguments,1))},n.prototype.info=function(b){this.log(b,S,Array.prototype.slice.call(arguments,1))},n.prototype.warn=function(b){this.log(b,i,Array.prototype.slice.call(arguments,1))},n.prototype.error=function(b){this.log(b,p,Array.prototype.slice.call(arguments,1))},n.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+l[this.level],u)},n.prototype.level=function(b){this.level=b},n.prototype.log=function(b,x,a){if(!(this.BLACKLIST.indexOf(a[0])>=0)&&!(x<this.level)){a||(a=b,b=null);var d=o[x],C="";b&&(C="["+b+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+l[x]+"]"+C,d].concat(a))}},n}();E.default=t,t.LEVEL_DEBUG=m,t.LEVEL_INFO=S,t.LEVEL_WARN=i,t.LEVEL_ERROR=p,t.getInstance=function(){return this._instance===void 0&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},t.setLevel=function(n){this.getInstance().level=n},t.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},t.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},t.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},t.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},P.exports=E.default},"./src/plugins/media_control/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/media_control/media_control.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/media_control/media_control.js":function(P,E,e){(function(r){Object.defineProperty(E,"__esModule",{value:!0});var h=e("./node_modules/babel-runtime/core-js/json/stringify.js"),s=se(h),A=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),_=se(A),g=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=se(g),u=e("./node_modules/babel-runtime/helpers/createClass.js"),f=se(u),m=e("./node_modules/babel-runtime/helpers/inherits.js"),S=se(m),i=e("./src/base/utils.js"),p=e("./src/vendor/index.js"),y=e("./src/base/events.js"),o=se(y),l=e("./src/base/ui_core_plugin.js"),t=se(l),n=e("./src/components/browser/index.js"),c=se(n),b=e("./src/components/mediator.js"),x=se(b),a=e("./src/base/template.js"),d=se(a),C=e("./src/base/playback.js"),T=se(C),L=e("./node_modules/clappr-zepto/zepto.js"),R=se(L);e("./src/plugins/media_control/public/media-control.scss");var O=e("./src/plugins/media_control/public/media-control.html"),j=se(O),D=e("./src/icons/01-play.svg"),w=se(D),F=e("./src/icons/02-pause.svg"),B=se(F),M=e("./src/icons/03-stop.svg"),N=se(M),I=e("./src/icons/04-volume.svg"),X=se(I),$=e("./src/icons/05-mute.svg"),ee=se($),K=e("./src/icons/06-expand.svg"),J=se(K),V=e("./src/icons/07-shrink.svg"),W=se(V),Y=e("./src/icons/08-hd.svg"),te=se(Y);function se(ue){return ue&&ue.__esModule?ue:{default:ue}}var ce=function(ue){(0,S.default)(re,ue),(0,f.default)(re,[{key:"name",get:function(){return"media_control"}},{key:"disabled",get:function(){var z=this.container&&this.container.getPlaybackType()===T.default.NO_OP;return this.userDisabled||z}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,d.default)(j.default)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return this.volume===0}}]);function re(ne){(0,_.default)(this,re);var z=(0,v.default)(this,ue.call(this,ne));return z.persistConfig=z.options.persistConfig,z.currentPositionValue=null,z.currentDurationValue=null,z.keepVisible=!1,z.fullScreenOnVideoTagSupported=null,z.setInitialVolume(),z.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},z.kibo=new p.Kibo(z.options.focusElement),z.bindKeyEvents(),z.container?R.default.isEmptyObject(z.container.settings)||(z.settings=R.default.extend({},z.container.settings)):z.settings={},z.userDisabled=!1,(z.container&&z.container.mediaControlDisabled||z.options.chromeless)&&z.disable(),z.stopDragHandler=function(ae){return z.stopDrag(ae)},z.updateDragHandler=function(ae){return z.updateDrag(ae)},(0,R.default)(document).bind("mouseup",z.stopDragHandler),(0,R.default)(document).bind("mousemove",z.updateDragHandler),z}return re.prototype.getExternalInterface=function(){var z=this;return{setVolume:this.setVolume,getVolume:function(){return z.volume}}},re.prototype.bindEvents=function(){var z=this;this.stopListening(),this.listenTo(this.core,o.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,o.default.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,o.default.CORE_MOUSE_LEAVE,function(){return z.hide(z.options.hideMediaControlDelay)}),this.listenTo(this.core,o.default.CORE_FULLSCREEN,this.show),this.listenTo(this.core,o.default.CORE_OPTIONS_CHANGE,this.configure),x.default.on(this.options.playerId+":"+o.default.PLAYER_RESIZE,this.playerResize,this),this.bindContainerEvents()},re.prototype.bindContainerEvents=function(){!this.container||(this.listenTo(this.container,o.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,o.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,o.default.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,o.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,o.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,o.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,o.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,o.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,o.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,o.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,o.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,o.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,o.default.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,o.default.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),this.container.playback.el.nodeName.toLowerCase()==="video"&&this.listenToOnce(this.container,o.default.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))},re.prototype.disable=function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()},re.prototype.enable=function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())},re.prototype.play=function(){this.container&&this.container.play()},re.prototype.pause=function(){this.container&&this.container.pause()},re.prototype.stop=function(){this.container&&this.container.stop()},re.prototype.setInitialVolume=function(){var z=this.persistConfig?i.Config.restore("volume"):100,ae=this.container&&this.container.options||this.options;this.setVolume(ae.mute?0:z,!0)},re.prototype.onVolumeChanged=function(){this.updateVolumeUI()},re.prototype.onLoadedMetadataOnVideoTag=function(){var z=this.playback&&this.playback.el;!i.Fullscreen.fullscreenEnabled()&&z.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())},re.prototype.updateVolumeUI=function(){if(!!this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var z=this.$volumeBarContainer.width(),ae=this.$volumeBarBackground.width(),de=(z-ae)/2,he=ae*this.volume/100+de;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:he}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var k=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,k).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(ee.default),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(X.default),this.applyButtonStyle(this.$volumeIcon)}},re.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(B.default),this.$playStopToggle.append(N.default),this.trigger(o.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(w.default),this.$playStopToggle.append(w.default),this.trigger(o.default.MEDIACONTROL_NOTPLAYING),c.default.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},re.prototype.mousemoveOnSeekBar=function(z){if(this.settings.seekEnabled){var ae=z.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:ae})}this.trigger(o.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,z)},re.prototype.mouseleaveOnSeekBar=function(z){this.trigger(o.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,z)},re.prototype.onVolumeClick=function(z){this.setVolume(this.getVolumeFromUIEvent(z))},re.prototype.mousemoveOnVolumeBar=function(z){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(z))},re.prototype.playerResize=function(z){this.$fullscreenToggle.html("");var ae=this.core.isFullscreen()?W.default:J.default;this.$fullscreenToggle.append(ae),this.applyButtonStyle(this.$fullscreenToggle),this.$el.find(".media-control").length!==0&&this.$el.removeClass("w320"),(z.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},re.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},re.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},re.prototype.startSeekDrag=function(z){!this.settings.seekEnabled||(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),z&&z.preventDefault())},re.prototype.startVolumeDrag=function(z){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),z&&z.preventDefault()},re.prototype.stopDrag=function(z){this.draggingSeekBar&&this.seek(z),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},re.prototype.updateDrag=function(z){if(this.draggingSeekBar){z.preventDefault();var ae=z.pageX-this.$seekBarContainer.offset().left,de=ae/this.$seekBarContainer.width()*100;de=Math.min(100,Math.max(de,0)),this.setSeekPercentage(de)}else this.draggingVolumeBar&&(z.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(z)))},re.prototype.getVolumeFromUIEvent=function(z){var ae=z.pageX-this.$volumeBarContainer.offset().left,de=ae/this.$volumeBarContainer.width()*100;return de},re.prototype.toggleMute=function(){this.setVolume(this.muted?100:0)},re.prototype.setVolume=function(z){var ae=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;z=Math.min(100,Math.max(z,0)),this.intendedVolume=z,this.persistConfig&&!de&&i.Config.persist("volume",z);var he=function(){ae.container&&ae.container.isReady?ae.container.setVolume(z):ae.listenToOnce(ae.container,o.default.CONTAINER_READY,function(){ae.container.setVolume(z)})};this.container?he():this.listenToOnce(this,o.default.MEDIACONTROL_CONTAINERCHANGED,function(){return he()})},re.prototype.toggleFullscreen=function(){this.trigger(o.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()},re.prototype.onActiveContainerChanged=function(){this.fullScreenOnVideoTagSupported=null,x.default.off(this.options.playerId+":"+o.default.PLAYER_RESIZE,this.playerResize,this),this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(o.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(o.default.MEDIACONTROL_CONTAINERCHANGED)},re.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},re.prototype.hideVolumeBar=function(){var z=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:400;!this.$volumeBarContainer||(this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return z.hideVolumeBar()},ae):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return z.$volumeBarContainer.addClass("volume-bar-hide")},ae)))},re.prototype.ended=function(){this.changeTogglePlay()},re.prototype.updateProgressBar=function(z){var ae=z.start/z.total*100,de=z.current/z.total*100;this.$seekBarLoaded.css({left:ae+"%",width:de-ae+"%"})},re.prototype.onTimeUpdate=function(z){if(!this.draggingSeekBar){var ae=z.current<0?z.total:z.current;this.currentPositionValue=ae,this.currentDurationValue=z.total,this.renderSeekBar()}},re.prototype.renderSeekBar=function(){if(!(this.currentPositionValue===null||this.currentDurationValue===null)){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==T.default.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var z=(0,i.formatTime)(this.currentPositionValue),ae=(0,i.formatTime)(this.currentDurationValue);z!==this.displayedPosition&&(this.$position.text(z),this.displayedPosition=z),ae!==this.displayedDuration&&(this.$duration.text(ae),this.displayedDuration=ae)}},re.prototype.seek=function(z){if(!!this.settings.seekEnabled){var ae=z.pageX-this.$seekBarContainer.offset().left,de=ae/this.$seekBarContainer.width()*100;return de=Math.min(100,Math.max(de,0)),this.container&&this.container.seekPercentage(de),this.setSeekPercentage(de),!1}},re.prototype.setKeepVisible=function(){this.keepVisible=!0},re.prototype.resetKeepVisible=function(){this.keepVisible=!1},re.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},re.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},re.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},re.prototype.show=function(z){var ae=this;if(!this.disabled){var de=2e3,he=z&&z.clientX!==this.lastMouseX&&z.clientY!==this.lastMouseY;(!z||he||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(o.default.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(o.default.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return ae.hide()},de),z&&(this.lastMouseX=z.clientX,this.lastMouseY=z.clientY));var k=!0;this.updateCursorStyle(k)}},re.prototype.hide=function(){var z=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!!this.isVisible()){var de=ae||2e3;if(clearTimeout(this.hideId),!(!this.disabled&&this.options.hideMediaControl===!1)){var he=this.userKeepVisible||this.keepVisible,k=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(ae||he||k))this.hideId=setTimeout(function(){return z.hide()},de);else{this.trigger(o.default.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(o.default.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var U=!1;this.updateCursorStyle(U)}}}},re.prototype.updateCursorStyle=function(z){z?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")},re.prototype.settingsUpdate=function(){var z=this.getSettings();z&&!this.fullScreenOnVideoTagSupported&&!i.Fullscreen.fullscreenEnabled()&&(z.default&&(0,i.removeArrayItem)(z.default,"fullscreen"),z.left&&(0,i.removeArrayItem)(z.left,"fullscreen"),z.right&&(0,i.removeArrayItem)(z.right,"fullscreen"));var ae=(0,s.default)(this.settings)!==(0,s.default)(z);ae&&(this.settings=z,this.render())},re.prototype.getSettings=function(){return R.default.extend(!0,{},this.container&&this.container.settings)},re.prototype.highDefinitionUpdate=function(z){this.isHD=z;var ae=z?"addClass":"removeClass";this.$hdIndicator[ae]("enabled")},re.prototype.createCachedElements=function(){var z=this.$el.find(".media-control-layer");this.$duration=z.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=z.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=z.find("button.media-control-button[data-playpause]"),this.$playStopToggle=z.find("button.media-control-button[data-playstop]"),this.$position=z.find(".media-control-indicator[data-position]"),this.$seekBarContainer=z.find(".bar-container[data-seekbar]"),this.$seekBarHover=z.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=z.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=z.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=z.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=z.find(".bar-container[data-volume]"),this.$volumeContainer=z.find(".drawer-container[data-volume]"),this.$volumeIcon=z.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},re.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},re.prototype.initializeIcons=function(){var z=this.$el.find(".media-control-layer");z.find("button.media-control-button[data-play]").append(w.default),z.find("button.media-control-button[data-pause]").append(B.default),z.find("button.media-control-button[data-stop]").append(N.default),this.$playPauseToggle.append(w.default),this.$playStopToggle.append(w.default),this.$volumeIcon.append(X.default),this.$fullscreenToggle.append(J.default),this.$hdIndicator.append(te.default)},re.prototype.setSeekPercentage=function(z){z=Math.max(Math.min(z,100),0),this.displayedSeekBarPercentage!==z&&(this.displayedSeekBarPercentage=z,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:z+"%"}),this.$seekBarScrubber.css({left:z+"%"}))},re.prototype.seekRelative=function(z){if(!!this.settings.seekEnabled){var ae=this.container.getCurrentTime(),de=this.container.getDuration(),he=Math.min(Math.max(ae+z,0),de);he=Math.min(he*100/de,100),this.container.seekPercentage(he)}},re.prototype.bindKeyAndShow=function(z,ae){var de=this;this.kibo.down(z,function(){return de.show(),ae()})},re.prototype.bindKeyEvents=function(){var z=this;if(!(c.default.isMobile||this.options.disableKeyboardShortcuts)){this.unbindKeyEvents(),this.kibo=new p.Kibo(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",function(){return z.togglePlayPause()}),this.bindKeyAndShow("left",function(){return z.seekRelative(-5)}),this.bindKeyAndShow("right",function(){return z.seekRelative(5)}),this.bindKeyAndShow("shift left",function(){return z.seekRelative(-10)}),this.bindKeyAndShow("shift right",function(){return z.seekRelative(10)}),this.bindKeyAndShow("shift ctrl left",function(){return z.seekRelative(-15)}),this.bindKeyAndShow("shift ctrl right",function(){return z.seekRelative(15)});var ae=["1","2","3","4","5","6","7","8","9","0"];ae.forEach(function(de){z.bindKeyAndShow(de,function(){z.settings.seekEnabled&&z.container&&z.container.seekPercentage(de*10)})})}},re.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))},re.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var z=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",z),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},re.prototype.applyButtonStyle=function(z){this.buttonsColor&&z&&(0,R.default)(z).find("svg path").css("fill",this.buttonsColor)},re.prototype.destroy=function(){(0,R.default)(document).unbind("mouseup",this.stopDragHandler),(0,R.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),ue.prototype.destroy.call(this)},re.prototype.configure=function(z){this.options.chromeless||z.source||z.sources?this.disable():this.enable(),this.trigger(o.default.MEDIACONTROL_OPTIONS_CHANGE)},re.prototype.render=function(){var z=this,ae=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout(function(){return z.hide()},ae),this.disabled&&this.hide()),c.default.isSafari&&c.default.isMobile&&(c.default.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var de=0;return this.displayedSeekBarPercentage&&(de=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(de),r.nextTick(function(){!z.settings.seekEnabled&&z.$seekBarContainer.addClass("seek-disabled"),!c.default.isMobile&&!z.options.disableKeyboardShortcuts&&z.bindKeyEvents(),z.playerResize({width:z.options.width,height:z.options.height}),z.hideVolumeBar(0)}),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(o.default.MEDIACONTROL_RENDERED),this},re}(t.default);E.default=ce,ce.extend=function(ue){return(0,i.extend)(ce,ue)},P.exports=E.default}).call(this,e("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/media_control/public/closed-hand.cur":function(P,E){P.exports="<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"},"./src/plugins/media_control/public/media-control.html":function(P,E){P.exports=`<div class="media-control-background" data-background></div>
<div class="media-control-layer" data-controls>
  <%  var renderBar = function(name) { %>
      <div class="bar-container" data-<%= name %>>
        <div class="bar-background" data-<%= name %>>
          <div class="bar-fill-1" data-<%= name %>></div>
          <div class="bar-fill-2" data-<%= name %>></div>
          <div class="bar-hover" data-<%= name %>></div>
        </div>
        <div class="bar-scrubber" data-<%= name %>>
          <div class="bar-scrubber-icon" data-<%= name %>></div>
        </div>
      </div>
  <%  }; %>
  <%  var renderSegmentedBar = function(name, segments) {
      segments = segments || 10; %>
    <div class="bar-container" data-<%= name %>>
    <% for (var i = 0; i < segments; i++) { %>
      <div class="segmented-bar-element" data-<%= name %>></div>
    <% } %>
    </div>
  <% }; %>
  <% var renderDrawer = function(name, renderContent) { %>
      <div class="drawer-container" data-<%= name %>>
        <div class="drawer-icon-container" data-<%= name %>>
          <div class="drawer-icon media-control-icon" data-<%= name %>></div>
          <span class="drawer-text" data-<%= name %>></span>
        </div>
        <% renderContent(name); %>
      </div>
  <% }; %>
  <% var renderIndicator = function(name) { %>
      <div class="media-control-indicator" data-<%= name %>></div>
  <% }; %>
  <% var renderButton = function(name) { %>
    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>
  <% }; %>
  <%  var templates = {
        bar: renderBar,
        segmentedBar: renderSegmentedBar,
      };
      var render = function(settingsList) {
        settingsList.forEach(function(setting) {
          if(setting === "seekbar") {
            renderBar(setting);
          } else if (setting === "volume") {
            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });
          } else if (setting === "duration" || setting === "position") {
            renderIndicator(setting);
          } else {
            renderButton(setting);
          }
        });
      }; %>
  <% if (settings.default && settings.default.length) { %>
  <div class="media-control-center-panel" data-media-control>
    <% render(settings.default); %>
  </div>
  <% } %>
  <% if (settings.left && settings.left.length) { %>
  <div class="media-control-left-panel" data-media-control>
    <% render(settings.left); %>
  </div>
  <% } %>
  <% if (settings.right && settings.right.length) { %>
  <div class="media-control-right-panel" data-media-control>
    <% render(settings.right); %>
  </div>
  <% } %>
</div>
`},"./src/plugins/media_control/public/media-control.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/poster/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/poster/poster.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/poster/poster.js":function(P,E,e){(function(r){Object.defineProperty(E,"__esModule",{value:!0});var h=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=C(h),A=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),_=C(A),g=e("./node_modules/babel-runtime/helpers/createClass.js"),v=C(g),u=e("./node_modules/babel-runtime/helpers/inherits.js"),f=C(u),m=e("./src/base/ui_container_plugin.js"),S=C(m),i=e("./src/base/events.js"),p=C(i),y=e("./src/base/template.js"),o=C(y),l=e("./src/base/playback.js"),t=C(l),n=e("./src/components/error/error.js"),c=C(n),b=e("./src/plugins/poster/public/poster.html"),x=C(b),a=e("./src/icons/01-play.svg"),d=C(a);e("./src/plugins/poster/public/poster.scss");function C(L){return L&&L.__esModule?L:{default:L}}var T=function(L){(0,f.default)(R,L),(0,v.default)(R,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,o.default)(x.default)}},{key:"shouldRender",get:function(){var j=!!(this.options.poster&&this.options.poster.showForNoOp);return this.container.playback.name!=="html_img"&&(this.container.playback.getPlaybackType()!==t.default.NO_OP||j)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||this.options.poster.showOnVideoEnd===void 0}}]);function R(O){(0,s.default)(this,R);var j=(0,_.default)(this,L.call(this,O));return j.hasStartedPlaying=!1,j.playRequested=!1,j.render(),r.nextTick(function(){return j.update()}),j}return R.prototype.bindEvents=function(){this.listenTo(this.container,p.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,p.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,p.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,p.default.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,p.default.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,p.default.CONTAINER_ENDED,this.onStop)},R.prototype.onError=function(j){this.hasFatalError=j.level===c.default.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())},R.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},R.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},R.prototype.updatePlayButton=function(j){j&&(!this.options.chromeless||this.options.allowUserInteraction)?this.showPlayButton():this.hidePlayButton()},R.prototype.showPlayButton=function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))},R.prototype.hidePlayButton=function(){this.$playButton.hide(),this.$el.removeClass("clickable")},R.prototype.clicked=function(){if(!this.hasStartedPlaying)return(!this.options.chromeless||this.options.allowUserInteraction)&&(this.playRequested=!0,this.update(),this.container.play()),!1},R.prototype.shouldHideOnPlay=function(){return!this.container.playback.isAudioOnly},R.prototype.update=function(){if(!!this.shouldRender){var j=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(j),this.updatePoster()}},R.prototype.updatePoster=function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()},R.prototype.showPoster=function(){this.container.disableMediaControl(),this.$el.show()},R.prototype.hidePoster=function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()},R.prototype.render=function(){if(!!this.shouldRender){this.$el.html(this.template());var j=this.options.poster&&this.options.poster.custom===void 0;if(j){var D=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+D+")"})}else this.options.poster&&this.$el.css({background:this.options.poster.custom});this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(d.default),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var w=this.options.mediacontrol&&this.options.mediacontrol.buttons;return w&&this.$el.find("svg path").css("fill",w),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(w=this.options.mediacontrol.buttons,this.$playButton.css("color",w)),this.update(),this}},R}(S.default);E.default=T,P.exports=E.default}).call(this,e("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/poster/public/poster.html":function(P,E){P.exports=`<div class="play-wrapper" data-poster></div>
`},"./src/plugins/poster/public/poster.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/poster/public/poster.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/seek_time/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/seek_time/seek_time.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/seek_time/public/seek_time.html":function(P,E){P.exports=`<span data-seek-time></span>
<span data-duration></span>
`},"./src/plugins/seek_time/public/seek_time.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/seek_time/seek_time.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=b(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=b(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=b(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=b(v),f=e("./src/base/utils.js"),m=e("./src/base/ui_core_plugin.js"),S=b(m),i=e("./src/base/template.js"),p=b(i),y=e("./src/base/events.js"),o=b(y),l=e("./src/base/playback.js"),t=b(l),n=e("./src/plugins/seek_time/public/seek_time.html"),c=b(n);e("./src/plugins/seek_time/public/seek_time.scss");function b(a){return a&&a.__esModule?a:{default:a}}var x=function(a){(0,u.default)(d,a),(0,g.default)(d,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,p.default)(c.default)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===t.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]);function d(C){(0,h.default)(this,d);var T=(0,A.default)(this,a.call(this,C));return T.hoveringOverSeekBar=!1,T.hoverPosition=null,T.duration=null,T.firstFragDateTime=null,T.actualLiveTime=!!T.mediaControl.options.actualLiveTime,T.actualLiveTime&&(T.mediaControl.options.actualLiveServerTime?T.actualLiveServerTimeDiff=new Date().getTime()-new Date(T.mediaControl.options.actualLiveServerTime).getTime():T.actualLiveServerTimeDiff=0),T}return d.prototype.bindEvents=function(){this.listenTo(this.mediaControl,o.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,o.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,o.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,o.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,o.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,o.default.CONTAINER_TIMEUPDATE,this.updateDuration))},d.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},d.prototype.updateDuration=function(T){this.duration=T.total,this.firstFragDateTime=T.firstFragDateTime,this.update()},d.prototype.showTime=function(T){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(T),this.update()},d.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},d.prototype.calculateHoverPosition=function(T){var L=T.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(L/this.mediaControl.$seekBarContainer.width(),0))},d.prototype.getSeekTime=function(){var T=void 0,L=void 0,R=void 0,O=void 0;return this.useActualLiveTime?(this.firstFragDateTime?(O=new Date(this.firstFragDateTime),R=new Date(this.firstFragDateTime),R.setHours(0,0,0,0),L=(O.getTime()-R.getTime())/1e3+this.duration):(R=new Date(new Date().getTime()-this.actualLiveServerTimeDiff),O=new Date(R),L=(O-R.setHours(0,0,0,0))/1e3),T=L-this.duration+this.hoverPosition*this.duration,T<0&&(T+=86400)):T=this.hoverPosition*this.duration,{seekTime:T,secondsSinceMidnight:L}},d.prototype.update=function(){if(!!this.rendered)if(!this.shouldBeVisible())this.$el.hide(),this.$el.css("left","-100%");else{var T=this.getSeekTime(),L=(0,f.formatTime)(T.seekTime,this.useActualLiveTime);if(L!==this.displayedSeekTime&&(this.$seekTimeEl.text(L),this.displayedSeekTime=L),this.durationShown){this.$durationEl.show();var R=(0,f.formatTime)(this.actualLiveTime?T.secondsSinceMidnight:this.duration,this.actualLiveTime);R!==this.displayedDuration&&(this.$durationEl.text(R),this.displayedDuration=R)}else this.$durationEl.hide();this.$el.show();var O=this.mediaControl.$seekBarContainer.width(),j=this.$el.width(),D=this.hoverPosition*O;D-=j/2,D=Math.max(0,Math.min(D,O-j)),this.$el.css("left",D)}},d.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&this.hoverPosition!==null&&this.duration!==null},d.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},d}(S.default);E.default=x,P.exports=E.default},"./src/plugins/sources.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=p(r),s=e("./node_modules/babel-runtime/helpers/createClass.js"),A=p(s),_=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),g=p(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=p(v),f=e("./src/base/core_plugin.js"),m=p(f),S=e("./src/base/events.js"),i=p(S);function p(o){return o&&o.__esModule?o:{default:o}}var y=function(o){(0,u.default)(l,o);function l(){return(0,h.default)(this,l),(0,g.default)(this,o.apply(this,arguments))}return l.prototype.bindEvents=function(){this.listenTo(this.core,i.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},l.prototype.onContainersCreated=function(){var n=this.core.containers.filter(function(c){return c.playback.name!=="no_op"})[0]||this.core.containers[0];n&&this.core.containers.forEach(function(c){c!==n&&c.destroy()})},(0,A.default)(l,[{key:"name",get:function(){return"sources"}}]),l}(m.default);E.default=y,P.exports=E.default},"./src/plugins/spinner_three_bounce/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/spinner_three_bounce/spinner_three_bounce.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/spinner_three_bounce/public/spinner.html":function(P,E){P.exports=`<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>
`},"./src/plugins/spinner_three_bounce/public/spinner.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/spinner_three_bounce/spinner_three_bounce.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=t(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=t(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=t(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=t(v),f=e("./src/base/ui_container_plugin.js"),m=t(f),S=e("./src/base/events.js"),i=t(S),p=e("./src/base/template.js"),y=t(p),o=e("./src/plugins/spinner_three_bounce/public/spinner.html"),l=t(o);e("./src/plugins/spinner_three_bounce/public/spinner.scss");function t(c){return c&&c.__esModule?c:{default:c}}var n=function(c){(0,u.default)(b,c),(0,g.default)(b,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]);function b(x){(0,h.default)(this,b);var a=(0,A.default)(this,c.call(this,x));return a.template=(0,y.default)(l.default),a.showTimeout=null,a.listenTo(a.container,i.default.CONTAINER_STATE_BUFFERING,a.onBuffering),a.listenTo(a.container,i.default.CONTAINER_STATE_BUFFERFULL,a.onBufferFull),a.listenTo(a.container,i.default.CONTAINER_STOP,a.onStop),a.listenTo(a.container,i.default.CONTAINER_ENDED,a.onStop),a.listenTo(a.container,i.default.CONTAINER_ERROR,a.onStop),a.render(),a}return b.prototype.onBuffering=function(){this.show()},b.prototype.onBufferFull=function(){this.hide()},b.prototype.onStop=function(){this.hide()},b.prototype.show=function(){var a=this;this.showTimeout===null&&(this.showTimeout=setTimeout(function(){return a.$el.show()},300))},b.prototype.hide=function(){this.showTimeout!==null&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},b.prototype.render=function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},b}(m.default);E.default=n,P.exports=E.default},"./src/plugins/stats/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/stats/stats.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/stats/stats.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=o(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=o(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=o(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=o(v),f=e("./src/base/container_plugin.js"),m=o(f),S=e("./src/base/events.js"),i=o(S),p=e("./node_modules/clappr-zepto/zepto.js"),y=o(p);function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t){(0,u.default)(n,t),(0,g.default)(n,[{key:"name",get:function(){return"stats"}}]);function n(c){(0,h.default)(this,n);var b=(0,A.default)(this,t.call(this,c));return b.setInitialAttrs(),b.reportInterval=b.options.reportInterval||5e3,b.state="IDLE",b}return n.prototype.bindEvents=function(){this.listenTo(this.container.playback,i.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,i.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,i.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,i.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,i.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,i.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,i.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,i.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,i.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},n.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},n.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},n.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},n.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},n.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},n.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},n.prototype.getWatchingTime=function(){var b=Date.now()-this.watchingTimeInit;return b-this.rebufferingTime},n.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},n.prototype.onStatsAdd=function(b){y.default.extend(this.externalMetrics,b)},n.prototype.getStats=function(){var b={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return y.default.extend(b,this.externalMetrics),b},n.prototype.report=function(){this.container.statsReport(this.getStats())},n}(m.default);E.default=l,P.exports=E.default},"./src/plugins/strings.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=y(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=y(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=y(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=y(v),f=e("./src/base/utils.js"),m=e("./node_modules/clappr-zepto/zepto.js"),S=y(m),i=e("./src/base/core_plugin.js"),p=y(i);function y(l){return l&&l.__esModule?l:{default:l}}var o=function(l){(0,u.default)(t,l),(0,g.default)(t,[{key:"name",get:function(){return"strings"}}]);function t(n){(0,h.default)(this,t);var c=(0,A.default)(this,l.call(this,n));return c._initializeMessages(),c}return t.prototype.t=function(c){var b=this._language(),x=this._messages.en,a=b&&this._messages[b]||x;return a[c]||x[c]||c},t.prototype._language=function(){return this.core.options.language||(0,f.getBrowserLanguage)()},t.prototype._initializeMessages=function(){var c={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador n\xE3o supporta a reprodu\xE7\xE3o deste video. Por favor, tente usar um navegador diferente.",default_error_title:"N\xE3o foi poss\xEDvel reproduzir o v\xEDdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o v\xEDdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproducci\xF3n de un video. Por favor, trate de usar un navegador diferente."},ru:{live:"\u043F\u0440\u044F\u043C\u043E\u0439 \u044D\u0444\u0438\u0440",back_to_live:"\u043A \u043F\u0440\u044F\u043C\u043E\u043C\u0443 \u044D\u0444\u0438\u0440\u0443",disabled:"\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E",playback_not_supported:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u044D\u0442\u043E\u0433\u043E \u0432\u0438\u0434\u0435\u043E. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043E\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"D\xE9sactiv\xE9",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vid\xE9o. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vid\xE9o.",default_error_message:"Un probl\xE8me est survenu lors du chargement de la vid\xE9o."},tr:{live:"canl\u0131",back_to_live:"canl\u0131 yay\u0131na d\xF6n",disabled:"Engelli",playback_not_supported:"Taray\u0131c\u0131n\u0131z bu videoyu oynatma deste\u011Fine sahip de\u011Fil. L\xFCtfen farkl\u0131 bir taray\u0131c\u0131 ile deneyin."},et:{live:"Otse\xFClekanne",back_to_live:"Tagasi otse\xFClekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"\u0645\u0628\u0627\u0634\u0631",back_to_live:"\u0627\u0644\u0631\u062C\u0648\u0639 \u0625\u0644\u0649 \u0627\u0644\u0645\u0628\u0627\u0634\u0631",disabled:"\u0645\u0639\u0637\u0651\u0644",playback_not_supported:"\u0627\u0644\u0645\u062A\u0635\u0641\u062D \u0627\u0644\u0630\u064A \u062A\u0633\u062A\u062E\u062F\u0645\u0647 \u0644\u0627 \u064A\u062F\u0639\u0645 \u062A\u0634\u063A\u064A\u0644 \u0647\u0630\u0627 \u0627\u0644\u0641\u064A\u062F\u064A\u0648. \u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u0633\u062A\u062E\u062F\u0627\u0645 \u0645\u062A\u0635\u0641\u062D \u0622\u062E\u0631.",default_error_title:"\u063A\u064A\u0631 \u0642\u0627\u062F\u0631 \u0627\u0644\u0649 \u0627\u0644\u062A\u0634\u063A\u064A\u0644.",default_error_message:"\u062D\u062F\u062B\u062A \u0645\u0634\u0643\u0644\u0629 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0641\u064A\u062F\u064A\u0648."}};this._messages=S.default.extend(!0,c,this.core.options.strings||{}),this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar},t}(p.default);E.default=o,P.exports=E.default},"./src/plugins/watermark/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/plugins/watermark/watermark.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default=h.default,P.exports=E.default},"./src/plugins/watermark/public/watermark.html":function(P,E){P.exports=`<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>
<% if(typeof imageLink !== 'undefined') { %>
<a target=_blank href="<%= imageLink %>">
<% } %>
<img src="<%= imageUrl %>">
<% if(typeof imageLink !== 'undefined') { %>
</a>
<% } %>
</div>
`},"./src/plugins/watermark/public/watermark.scss":function(P,E,e){var r=e("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/bruno/workspace/clappr/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss");typeof r=="string"&&(r=[[P.i,r,""]]);var h,s={singleton:!0,hmr:!0};s.transform=h,s.insertInto=void 0,e("./node_modules/style-loader/lib/addStyles.js")(r,s),r.locals&&(P.exports=r.locals)},"./src/plugins/watermark/watermark.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=t(r),s=e("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),A=t(s),_=e("./node_modules/babel-runtime/helpers/createClass.js"),g=t(_),v=e("./node_modules/babel-runtime/helpers/inherits.js"),u=t(v),f=e("./src/base/ui_container_plugin.js"),m=t(f),S=e("./src/base/events.js"),i=t(S),p=e("./src/base/template.js"),y=t(p),o=e("./src/plugins/watermark/public/watermark.html"),l=t(o);e("./src/plugins/watermark/public/watermark.scss");function t(c){return c&&c.__esModule?c:{default:c}}var n=function(c){(0,u.default)(b,c),(0,g.default)(b,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,y.default)(l.default)}}]);function b(x){(0,h.default)(this,b);var a=(0,A.default)(this,c.call(this,x));return a.configure(),a}return b.prototype.bindEvents=function(){this.listenTo(this.container,i.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,i.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,i.default.CONTAINER_OPTIONS_CHANGE,this.configure)},b.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},b.prototype.onPlay=function(){this.hidden||this.$el.show()},b.prototype.onStop=function(){this.$el.hide()},b.prototype.render=function(){this.$el.hide();var a={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(a)),this.container.$el.append(this.$el),this},b}(m.default);E.default=n,P.exports=E.default},"./src/vendor/index.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=e("./src/vendor/kibo.js"),h=s(r);function s(A){return A&&A.__esModule?A:{default:A}}E.default={Kibo:h.default},P.exports=E.default},"./src/vendor/kibo.js":function(P,E,e){Object.defineProperty(E,"__esModule",{value:!0});var r=function(s){this.element=s||window.document,this.initialize()};r.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},r.KEY_CODES_BY_NAME={},function(){for(var h in r.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(r.KEY_NAMES_BY_CODE,h)&&(r.KEY_CODES_BY_NAME[r.KEY_NAMES_BY_CODE[h]]=+h)}(),r.MODIFIERS=["shift","ctrl","alt"],r.registerEvent=function(){if(document.addEventListener)return function(h,s,A){h.addEventListener(s,A,!1)};if(document.attachEvent)return function(h,s,A){h.attachEvent("on"+s,A)}}(),r.unregisterEvent=function(){if(document.removeEventListener)return function(h,s,A){h.removeEventListener(s,A,!1)};if(document.detachEvent)return function(h,s,A){h.detachEvent("on"+s,A)}}(),r.stringContains=function(h,s){return h.indexOf(s)!==-1},r.neatString=function(h){return h.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},r.capitalize=function(h){return h.toLowerCase().replace(/^./,function(s){return s.toUpperCase()})},r.isString=function(h){return r.stringContains(Object.prototype.toString.call(h),"String")},r.arrayIncludes=function(){return Array.prototype.indexOf?function(h,s){return h.indexOf(s)!==-1}:function(h,s){for(var A=0;A<h.length;A++)if(h[A]===s)return!0;return!1}}(),r.extractModifiers=function(h){var s,A;for(s=[],A=0;A<r.MODIFIERS.length;A++)r.stringContains(h,r.MODIFIERS[A])&&s.push(r.MODIFIERS[A]);return s},r.extractKey=function(h){var s,A;for(s=r.neatString(h).split(" "),A=0;A<s.length;A++)if(!r.arrayIncludes(r.MODIFIERS,s[A]))return s[A]},r.modifiersAndKey=function(h){var s,A;return r.stringContains(h,"any")?r.neatString(h).split(" ").slice(0,2).join(" "):(s=r.extractModifiers(h),A=r.extractKey(h),A&&!r.arrayIncludes(r.MODIFIERS,A)&&s.push(A),s.join(" "))},r.keyName=function(h){return r.KEY_NAMES_BY_CODE[h+""]},r.keyCode=function(h){return+r.KEY_CODES_BY_NAME[h]},r.prototype.initialize=function(){var h,s=this;for(this.lastKeyCode=-1,this.lastModifiers={},h=0;h<r.MODIFIERS.length;h++)this.lastModifiers[r.MODIFIERS[h]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),r.registerEvent(this.element,"keydown",this.downHandler),r.registerEvent(this.element,"keyup",this.upHandler),r.registerEvent(window,"unload",function A(){r.unregisterEvent(s.element,"keydown",s.downHandler),r.unregisterEvent(s.element,"keyup",s.upHandler),r.unregisterEvent(window,"unload",A)})},r.prototype.handler=function(h){var s=this;return function(A){var _,g,v;for(A=A||window.event,s.lastKeyCode=A.keyCode,_=0;_<r.MODIFIERS.length;_++)s.lastModifiers[r.MODIFIERS[_]]=A[r.MODIFIERS[_]+"Key"];for(r.arrayIncludes(r.MODIFIERS,r.keyName(s.lastKeyCode))&&(s.lastModifiers[r.keyName(s.lastKeyCode)]=!0),g=s["keys"+r.capitalize(h)],_=0;_<g.any.length;_++)g.any[_](A)===!1&&A.preventDefault&&A.preventDefault();if(v=s.lastModifiersAndKey(),g[v])for(_=0;_<g[v].length;_++)g[v][_](A)===!1&&A.preventDefault&&A.preventDefault()}},r.prototype.registerKeys=function(h,s,A){var _,g,v=this["keys"+r.capitalize(h)];for(r.isString(s)&&(s=[s]),_=0;_<s.length;_++)g=s[_],g=r.modifiersAndKey(g+""),v[g]?v[g].push(A):v[g]=[A];return this},r.prototype.unregisterKeys=function(h,s,A){var _,g,v,u=this["keys"+r.capitalize(h)];for(r.isString(s)&&(s=[s]),_=0;_<s.length;_++)if(v=s[_],v=r.modifiersAndKey(v+""),A===null)delete u[v];else if(u[v]){for(g=0;g<u[v].length;g++)if(String(u[v][g])===String(A)){u[v].splice(g,1);break}}return this},r.prototype.off=function(h){return this.unregisterKeys("down",h,null)},r.prototype.delegate=function(h,s,A){return A!==null||A!==void 0?this.registerKeys(h,s,A):this.unregisterKeys(h,s,A)},r.prototype.down=function(h,s){return this.delegate("down",h,s)},r.prototype.up=function(h,s){return this.delegate("up",h,s)},r.prototype.lastKey=function(h){return h?this.lastModifiers[h]:r.keyName(this.lastKeyCode)},r.prototype.lastModifiersAndKey=function(){var h,s;for(h=[],s=0;s<r.MODIFIERS.length;s++)this.lastKey(r.MODIFIERS[s])&&h.push(r.MODIFIERS[s]);return r.arrayIncludes(h,this.lastKey())||h.push(this.lastKey()),h.join(" ")},E.default=r,P.exports=E.default}})})}(Be)),Be.exports}var Sr=vt(),gt={exports:{}};(function(G,Z){(function(E,e){G.exports=e(vt())})(typeof self<"u"?self:Lt,function(P){return function(E){var e={};function r(h){if(e[h])return e[h].exports;var s=e[h]={i:h,l:!1,exports:{}};return E[h].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=E,r.c=e,r.d=function(h,s,A){r.o(h,s)||Object.defineProperty(h,s,{configurable:!1,enumerable:!0,get:A})},r.n=function(h){var s=h&&h.__esModule?function(){return h.default}:function(){return h};return r.d(s,"a",s),s},r.o=function(h,s){return Object.prototype.hasOwnProperty.call(h,s)},r.p="<%=baseUrl%>/",r(r.s=39)}([function(E,e){var r=E.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=r)},function(E,e,r){var h=r(10),s=r(29),A=r(14),_=Object.defineProperty;e.f=r(2)?Object.defineProperty:function(v,u,f){if(h(v),u=A(u,!0),h(f),s)try{return _(v,u,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported!");return"value"in f&&(v[u]=f.value),v}},function(E,e,r){E.exports=!r(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(E,e){var r={}.hasOwnProperty;E.exports=function(h,s){return r.call(h,s)}},function(E,e){var r=E.exports={version:"2.5.5"};typeof __e=="number"&&(__e=r)},function(E,e,r){var h=r(1),s=r(12);E.exports=r(2)?function(A,_,g){return h.f(A,_,s(1,g))}:function(A,_,g){return A[_]=g,A}},function(E,e){E.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},function(E,e,r){var h=r(54),s=r(16);E.exports=function(A){return h(s(A))}},function(E,e,r){var h=r(22)("wks"),s=r(13),A=r(0).Symbol,_=typeof A=="function",g=E.exports=function(v){return h[v]||(h[v]=_&&A[v]||(_?A:s)("Symbol."+v))};g.store=h},function(E,e,r){var h=r(0),s=r(4),A=r(28),_=r(5),g=r(3),v="prototype",u=function(f,m,S){var i=f&u.F,p=f&u.G,y=f&u.S,o=f&u.P,l=f&u.B,t=f&u.W,n=p?s:s[m]||(s[m]={}),c=n[v],b=p?h:y?h[m]:(h[m]||{})[v],x,a,d;p&&(S=m);for(x in S)a=!i&&b&&b[x]!==void 0,!(a&&g(n,x))&&(d=a?b[x]:S[x],n[x]=p&&typeof b[x]!="function"?S[x]:l&&a?A(d,h):t&&b[x]==d?function(C){var T=function(L,R,O){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(L);case 2:return new C(L,R)}return new C(L,R,O)}return C.apply(this,arguments)};return T[v]=C[v],T}(d):o&&typeof d=="function"?A(Function.call,d):d,o&&((n.virtual||(n.virtual={}))[x]=d,f&u.R&&c&&!c[x]&&_(c,x,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,E.exports=u},function(E,e,r){var h=r(6);E.exports=function(s){if(!h(s))throw TypeError(s+" is not an object!");return s}},function(E,e){E.exports=function(r){try{return!!r()}catch{return!0}}},function(E,e){E.exports=function(r,h){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:h}}},function(E,e){var r=0,h=Math.random();E.exports=function(s){return"Symbol(".concat(s===void 0?"":s,")_",(++r+h).toString(36))}},function(E,e,r){var h=r(6);E.exports=function(s,A){if(!h(s))return s;var _,g;if(A&&typeof(_=s.toString)=="function"&&!h(g=_.call(s))||typeof(_=s.valueOf)=="function"&&!h(g=_.call(s))||!A&&typeof(_=s.toString)=="function"&&!h(g=_.call(s)))return g;throw TypeError("Can't convert object to primitive value")}},function(E,e){var r=Math.ceil,h=Math.floor;E.exports=function(s){return isNaN(s=+s)?0:(s>0?h:r)(s)}},function(E,e){E.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}},function(E,e){E.exports=!0},function(E,e){E.exports={}},function(E,e,r){var h=r(10),s=r(53),A=r(23),_=r(21)("IE_PROTO"),g=function(){},v="prototype",u=function(){var f=r(30)("iframe"),m=A.length,S="<",i=">",p;for(f.style.display="none",r(58).appendChild(f),f.src="javascript:",p=f.contentWindow.document,p.open(),p.write(S+"script"+i+"document.F=Object"+S+"/script"+i),p.close(),u=p.F;m--;)delete u[v][A[m]];return u()};E.exports=Object.create||function(m,S){var i;return m!==null?(g[v]=h(m),i=new g,g[v]=null,i[_]=m):i=u(),S===void 0?i:s(i,S)}},function(E,e,r){var h=r(34),s=r(23);E.exports=Object.keys||function(_){return h(_,s)}},function(E,e,r){var h=r(22)("keys"),s=r(13);E.exports=function(A){return h[A]||(h[A]=s(A))}},function(E,e,r){var h=r(0),s="__core-js_shared__",A=h[s]||(h[s]={});E.exports=function(_){return A[_]||(A[_]={})}},function(E,e){E.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(E,e,r){var h=r(1).f,s=r(3),A=r(8)("toStringTag");E.exports=function(_,g,v){_&&!s(_=v?_:_.prototype,A)&&h(_,A,{configurable:!0,value:g})}},function(E,e,r){e.f=r(8)},function(E,e,r){var h=r(0),s=r(4),A=r(17),_=r(25),g=r(1).f;E.exports=function(v){var u=s.Symbol||(s.Symbol=A?{}:h.Symbol||{});v.charAt(0)!="_"&&!(v in u)&&g(u,v,{value:_.f(v)})}},function(E,e){e.f={}.propertyIsEnumerable},function(E,e,r){var h=r(46);E.exports=function(s,A,_){if(h(s),A===void 0)return s;switch(_){case 1:return function(g){return s.call(A,g)};case 2:return function(g,v){return s.call(A,g,v)};case 3:return function(g,v,u){return s.call(A,g,v,u)}}return function(){return s.apply(A,arguments)}}},function(E,e,r){E.exports=!r(2)&&!r(11)(function(){return Object.defineProperty(r(30)("div"),"a",{get:function(){return 7}}).a!=7})},function(E,e,r){var h=r(6),s=r(0).document,A=h(s)&&h(s.createElement);E.exports=function(_){return A?s.createElement(_):{}}},function(E,e,r){e.__esModule=!0;var h=r(48),s=v(h),A=r(65),_=v(A),g=typeof _.default=="function"&&typeof s.default=="symbol"?function(u){return typeof u}:function(u){return u&&typeof _.default=="function"&&u.constructor===_.default&&u!==_.default.prototype?"symbol":typeof u};function v(u){return u&&u.__esModule?u:{default:u}}e.default=typeof _.default=="function"&&g(s.default)==="symbol"?function(u){return typeof u>"u"?"undefined":g(u)}:function(u){return u&&typeof _.default=="function"&&u.constructor===_.default&&u!==_.default.prototype?"symbol":typeof u>"u"?"undefined":g(u)}},function(E,e,r){var h=r(17),s=r(9),A=r(33),_=r(5),g=r(18),v=r(52),u=r(24),f=r(59),m=r(8)("iterator"),S=!([].keys&&"next"in[].keys()),i="@@iterator",p="keys",y="values",o=function(){return this};E.exports=function(l,t,n,c,b,x,a){v(n,t,c);var d=function(N){if(!S&&N in R)return R[N];switch(N){case p:return function(){return new n(this,N)};case y:return function(){return new n(this,N)}}return function(){return new n(this,N)}},C=t+" Iterator",T=b==y,L=!1,R=l.prototype,O=R[m]||R[i]||b&&R[b],j=O||d(b),D=b?T?d("entries"):j:void 0,w=t=="Array"&&R.entries||O,F,B,M;if(w&&(M=f(w.call(new l)),M!==Object.prototype&&M.next&&(u(M,C,!0),!h&&typeof M[m]!="function"&&_(M,m,o))),T&&O&&O.name!==y&&(L=!0,j=function(){return O.call(this)}),(!h||a)&&(S||L||!R[m])&&_(R,m,j),g[t]=j,g[C]=o,b)if(F={values:T?j:d(y),keys:x?j:d(p),entries:D},a)for(B in F)B in R||A(R,B,F[B]);else s(s.P+s.F*(S||L),t,F);return F}},function(E,e,r){E.exports=r(5)},function(E,e,r){var h=r(3),s=r(7),A=r(55)(!1),_=r(21)("IE_PROTO");E.exports=function(g,v){var u=s(g),f=0,m=[],S;for(S in u)S!=_&&h(u,S)&&m.push(S);for(;v.length>f;)h(u,S=v[f++])&&(~A(m,S)||m.push(S));return m}},function(E,e){var r={}.toString;E.exports=function(h){return r.call(h).slice(8,-1)}},function(E,e){e.f=Object.getOwnPropertySymbols},function(E,e,r){var h=r(34),s=r(23).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(_){return h(_,s)}},function(E,e,r){var h=r(27),s=r(12),A=r(7),_=r(14),g=r(3),v=r(29),u=Object.getOwnPropertyDescriptor;e.f=r(2)?u:function(m,S){if(m=A(m),S=_(S,!0),v)try{return u(m,S)}catch{}if(g(m,S))return s(!h.f.call(m,S),m[S])}},function(E,e,r){Object.defineProperty(e,"__esModule",{value:!0});var h=r(40),s=A(h);function A(_){return _&&_.__esModule?_:{default:_}}e.default=s.default,E.exports=e.default},function(E,e,r){Object.defineProperty(e,"__esModule",{value:!0});var h=r(41),s=o(h),A=r(42),_=o(A),g=r(47),v=o(g),u=r(75),f=o(u),m=r(83),S=r(84),i=o(S),p=r(85),y=o(p);function o(n){return n&&n.__esModule?n:{default:n}}var l=-1,t=function(n){(0,f.default)(c,n);function c(){return(0,s.default)(this,c),(0,v.default)(this,n.apply(this,arguments))}return c.prototype.bindEvents=function(){this.listenTo(this.core,m.Events.CORE_READY,this.bindPlaybackEvents),this.listenTo(this.core,m.Events.CORE_ACTIVE_CONTAINER_CHANGED,this.reload),this.listenTo(this.core.mediaControl,m.Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,m.Events.MEDIACONTROL_HIDE,this.hideSelectLevelMenu)},c.prototype.unBindEvents=function(){this.stopListening(this.core,m.Events.CORE_READY),this.stopListening(this.core,m.Events.CORE_ACTIVE_CONTAINER_CHANGED),this.stopListening(this.core.mediaControl,m.Events.MEDIACONTROL_RENDERED),this.stopListening(this.core.mediaControl,m.Events.MEDIACONTROL_HIDE),this.stopListening(this.core.activePlayback,m.Events.PLAYBACK_LEVELS_AVAILABLE),this.stopListening(this.core.activePlayback,m.Events.PLAYBACK_LEVEL_SWITCH_START),this.stopListening(this.core.activePlayback,m.Events.PLAYBACK_LEVEL_SWITCH_END),this.stopListening(this.core.activePlayback,m.Events.PLAYBACK_BITRATE)},c.prototype.bindPlaybackEvents=function(){var x=this.core.activePlayback;this.listenTo(x,m.Events.PLAYBACK_LEVELS_AVAILABLE,this.fillLevels),this.listenTo(x,m.Events.PLAYBACK_LEVEL_SWITCH_START,this.startLevelSwitch),this.listenTo(x,m.Events.PLAYBACK_LEVEL_SWITCH_END,this.stopLevelSwitch),this.listenTo(x,m.Events.PLAYBACK_BITRATE,this.updateCurrentLevel);var a=x.levels&&x.levels.length>0;a&&this.fillLevels(x.levels)},c.prototype.reload=function(){this.unBindEvents(),this.bindEvents(),this.bindPlaybackEvents()},c.prototype.shouldRender=function(){if(!this.core.activeContainer)return!1;var x=this.core.activePlayback;if(!x)return!1;var a=x.currentLevel!==void 0,d=!!(this.levels&&this.levels.length>1);return a&&d},c.prototype.render=function(){if(this.shouldRender()){var x=m.Styler.getStyleFor(y.default,{baseUrl:this.core.options.baseUrl});this.$el.html(this.template({levels:this.levels,title:this.getTitle()})),this.$el.append(x),this.core.mediaControl.$(".media-control-right-panel").append(this.el),this.highlightCurrentLevel()}return this},c.prototype.fillLevels=function(x){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l;this.selectedLevelId===void 0&&(this.selectedLevelId=a),this.levels=x,this.configureLevelsLabels(),this.render()},c.prototype.configureLevelsLabels=function(){if(this.core.options.levelSelectorConfig!==void 0){var x=this.core.options.levelSelectorConfig.labelCallback;if(x&&typeof x!="function")throw new TypeError("labelCallback must be a function");var a=this.core.options.levelSelectorConfig.labels,d=a?this.core.options.levelSelectorConfig.labels:{};if(x||a){var C=void 0,T=void 0;for(var L in this.levels)C=this.levels[L],T=d[C.id],x?C.label=x(C,T):T&&(C.label=T)}}},c.prototype.findLevelBy=function(x){var a=void 0;return this.levels.forEach(function(d){d.id===x&&(a=d)}),a},c.prototype.onLevelSelect=function(x){return this.selectedLevelId=parseInt(x.target.dataset.levelSelectorSelect,10),this.core.activePlayback.currentLevel==this.selectedLevelId||(this.core.activePlayback.currentLevel=this.selectedLevelId,this.toggleContextMenu(),x.stopPropagation()),!1},c.prototype.onShowLevelSelectMenu=function(){this.toggleContextMenu()},c.prototype.hideSelectLevelMenu=function(){this.$(".level_selector ul").hide()},c.prototype.toggleContextMenu=function(){this.$(".level_selector ul").toggle()},c.prototype.buttonElement=function(){return this.$(".level_selector button")},c.prototype.levelElement=function(x){return this.$(".level_selector ul a"+(isNaN(x)?"":'[data-level-selector-select="'+x+'"]')).parent()},c.prototype.getTitle=function(){return(this.core.options.levelSelectorConfig||{}).title},c.prototype.startLevelSwitch=function(){this.buttonElement().addClass("changing")},c.prototype.stopLevelSwitch=function(){this.buttonElement().removeClass("changing")},c.prototype.updateText=function(x){x===l?this.buttonElement().text(this.currentLevel?"AUTO ("+this.currentLevel.label+")":"AUTO"):this.buttonElement().text(this.findLevelBy(x).label)},c.prototype.updateCurrentLevel=function(x){var a=this.findLevelBy(x.level);this.currentLevel=a||null,this.highlightCurrentLevel()},c.prototype.highlightCurrentLevel=function(){this.levelElement().removeClass("current"),this.currentLevel&&this.levelElement(this.currentLevel.id).addClass("current"),this.updateText(this.selectedLevelId)},(0,_.default)(c,[{key:"name",get:function(){return"level_selector"}},{key:"template",get:function(){return(0,m.template)(i.default)}},{key:"attributes",get:function(){return{class:this.name,"data-level-selector":""}}},{key:"events",get:function(){return{"click [data-level-selector-select]":"onLevelSelect","click [data-level-selector-button]":"onShowLevelSelectMenu"}}}],[{key:"version",get:function(){return VERSION}}]),c}(m.UICorePlugin);e.default=t,E.exports=e.default},function(E,e,r){e.__esModule=!0,e.default=function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}},function(E,e,r){e.__esModule=!0;var h=r(43),s=A(h);function A(_){return _&&_.__esModule?_:{default:_}}e.default=function(){function _(g,v){for(var u=0;u<v.length;u++){var f=v[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),(0,s.default)(g,f.key,f)}}return function(g,v,u){return v&&_(g.prototype,v),u&&_(g,u),g}}()},function(E,e,r){E.exports={default:r(44),__esModule:!0}},function(E,e,r){r(45);var h=r(4).Object;E.exports=function(A,_,g){return h.defineProperty(A,_,g)}},function(E,e,r){var h=r(9);h(h.S+h.F*!r(2),"Object",{defineProperty:r(1).f})},function(E,e){E.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}},function(E,e,r){e.__esModule=!0;var h=r(31),s=A(h);function A(_){return _&&_.__esModule?_:{default:_}}e.default=function(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&((typeof g>"u"?"undefined":(0,s.default)(g))==="object"||typeof g=="function")?g:_}},function(E,e,r){E.exports={default:r(49),__esModule:!0}},function(E,e,r){r(50),r(61),E.exports=r(25).f("iterator")},function(E,e,r){var h=r(51)(!0);r(32)(String,"String",function(s){this._t=String(s),this._i=0},function(){var s=this._t,A=this._i,_;return A>=s.length?{value:void 0,done:!0}:(_=h(s,A),this._i+=_.length,{value:_,done:!1})})},function(E,e,r){var h=r(15),s=r(16);E.exports=function(A){return function(_,g){var v=String(s(_)),u=h(g),f=v.length,m,S;return u<0||u>=f?A?"":void 0:(m=v.charCodeAt(u),m<55296||m>56319||u+1===f||(S=v.charCodeAt(u+1))<56320||S>57343?A?v.charAt(u):m:A?v.slice(u,u+2):(m-55296<<10)+(S-56320)+65536)}}},function(E,e,r){var h=r(19),s=r(12),A=r(24),_={};r(5)(_,r(8)("iterator"),function(){return this}),E.exports=function(g,v,u){g.prototype=h(_,{next:s(1,u)}),A(g,v+" Iterator")}},function(E,e,r){var h=r(1),s=r(10),A=r(20);E.exports=r(2)?Object.defineProperties:function(g,v){s(g);for(var u=A(v),f=u.length,m=0,S;f>m;)h.f(g,S=u[m++],v[S]);return g}},function(E,e,r){var h=r(35);E.exports=Object("z").propertyIsEnumerable(0)?Object:function(s){return h(s)=="String"?s.split(""):Object(s)}},function(E,e,r){var h=r(7),s=r(56),A=r(57);E.exports=function(_){return function(g,v,u){var f=h(g),m=s(f.length),S=A(u,m),i;if(_&&v!=v){for(;m>S;)if(i=f[S++],i!=i)return!0}else for(;m>S;S++)if((_||S in f)&&f[S]===v)return _||S||0;return!_&&-1}}},function(E,e,r){var h=r(15),s=Math.min;E.exports=function(A){return A>0?s(h(A),9007199254740991):0}},function(E,e,r){var h=r(15),s=Math.max,A=Math.min;E.exports=function(_,g){return _=h(_),_<0?s(_+g,0):A(_,g)}},function(E,e,r){var h=r(0).document;E.exports=h&&h.documentElement},function(E,e,r){var h=r(3),s=r(60),A=r(21)("IE_PROTO"),_=Object.prototype;E.exports=Object.getPrototypeOf||function(g){return g=s(g),h(g,A)?g[A]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?_:null}},function(E,e,r){var h=r(16);E.exports=function(s){return Object(h(s))}},function(E,e,r){r(62);for(var h=r(0),s=r(5),A=r(18),_=r(8)("toStringTag"),g="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),v=0;v<g.length;v++){var u=g[v],f=h[u],m=f&&f.prototype;m&&!m[_]&&s(m,_,u),A[u]=A.Array}},function(E,e,r){var h=r(63),s=r(64),A=r(18),_=r(7);E.exports=r(32)(Array,"Array",function(g,v){this._t=_(g),this._i=0,this._k=v},function(){var g=this._t,v=this._k,u=this._i++;return!g||u>=g.length?(this._t=void 0,s(1)):v=="keys"?s(0,u):v=="values"?s(0,g[u]):s(0,[u,g[u]])},"values"),A.Arguments=A.Array,h("keys"),h("values"),h("entries")},function(E,e){E.exports=function(){}},function(E,e){E.exports=function(r,h){return{value:h,done:!!r}}},function(E,e,r){E.exports={default:r(66),__esModule:!0}},function(E,e,r){r(67),r(72),r(73),r(74),E.exports=r(4).Symbol},function(E,e,r){var h=r(0),s=r(3),A=r(2),_=r(9),g=r(33),v=r(68).KEY,u=r(11),f=r(22),m=r(24),S=r(13),i=r(8),p=r(25),y=r(26),o=r(69),l=r(70),t=r(10),n=r(6),c=r(7),b=r(14),x=r(12),a=r(19),d=r(71),C=r(38),T=r(1),L=r(20),R=C.f,O=T.f,j=d.f,D=h.Symbol,w=h.JSON,F=w&&w.stringify,B="prototype",M=i("_hidden"),N=i("toPrimitive"),I={}.propertyIsEnumerable,X=f("symbol-registry"),$=f("symbols"),ee=f("op-symbols"),K=Object[B],J=typeof D=="function",V=h.QObject,W=!V||!V[B]||!V[B].findChild,Y=A&&u(function(){return a(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a!=7})?function(Q,q,ie){var oe=R(K,q);oe&&delete K[q],O(Q,q,ie),oe&&Q!==K&&O(K,q,oe)}:O,te=function(Q){var q=$[Q]=a(D[B]);return q._k=Q,q},se=J&&typeof D.iterator=="symbol"?function(Q){return typeof Q=="symbol"}:function(Q){return Q instanceof D},ce=function(q,ie,oe){return q===K&&ce(ee,ie,oe),t(q),ie=b(ie,!0),t(oe),s($,ie)?(oe.enumerable?(s(q,M)&&q[M][ie]&&(q[M][ie]=!1),oe=a(oe,{enumerable:x(0,!1)})):(s(q,M)||O(q,M,x(1,{})),q[M][ie]=!0),Y(q,ie,oe)):O(q,ie,oe)},ue=function(q,ie){t(q);for(var oe=o(ie=c(ie)),fe=0,pe=oe.length,ve;pe>fe;)ce(q,ve=oe[fe++],ie[ve]);return q},re=function(q,ie){return ie===void 0?a(q):ue(a(q),ie)},ne=function(q){var ie=I.call(this,q=b(q,!0));return this===K&&s($,q)&&!s(ee,q)?!1:ie||!s(this,q)||!s($,q)||s(this,M)&&this[M][q]?ie:!0},z=function(q,ie){if(q=c(q),ie=b(ie,!0),!(q===K&&s($,ie)&&!s(ee,ie))){var oe=R(q,ie);return oe&&s($,ie)&&!(s(q,M)&&q[M][ie])&&(oe.enumerable=!0),oe}},ae=function(q){for(var ie=j(c(q)),oe=[],fe=0,pe;ie.length>fe;)!s($,pe=ie[fe++])&&pe!=M&&pe!=v&&oe.push(pe);return oe},de=function(q){for(var ie=q===K,oe=j(ie?ee:c(q)),fe=[],pe=0,ve;oe.length>pe;)s($,ve=oe[pe++])&&(ie?s(K,ve):!0)&&fe.push($[ve]);return fe};J||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var q=S(arguments.length>0?arguments[0]:void 0),ie=function(oe){this===K&&ie.call(ee,oe),s(this,M)&&s(this[M],q)&&(this[M][q]=!1),Y(this,q,x(1,oe))};return A&&W&&Y(K,q,{configurable:!0,set:ie}),te(q)},g(D[B],"toString",function(){return this._k}),C.f=z,T.f=ce,r(37).f=d.f=ae,r(27).f=ne,r(36).f=de,A&&!r(17)&&g(K,"propertyIsEnumerable",ne,!0),p.f=function(Q){return te(i(Q))}),_(_.G+_.W+_.F*!J,{Symbol:D});for(var he="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),k=0;he.length>k;)i(he[k++]);for(var U=L(i.store),H=0;U.length>H;)y(U[H++]);_(_.S+_.F*!J,"Symbol",{for:function(Q){return s(X,Q+="")?X[Q]:X[Q]=D(Q)},keyFor:function(q){if(!se(q))throw TypeError(q+" is not a symbol!");for(var ie in X)if(X[ie]===q)return ie},useSetter:function(){W=!0},useSimple:function(){W=!1}}),_(_.S+_.F*!J,"Object",{create:re,defineProperty:ce,defineProperties:ue,getOwnPropertyDescriptor:z,getOwnPropertyNames:ae,getOwnPropertySymbols:de}),w&&_(_.S+_.F*(!J||u(function(){var Q=D();return F([Q])!="[null]"||F({a:Q})!="{}"||F(Object(Q))!="{}"})),"JSON",{stringify:function(q){for(var ie=[q],oe=1,fe,pe;arguments.length>oe;)ie.push(arguments[oe++]);if(pe=fe=ie[1],!(!n(fe)&&q===void 0||se(q)))return l(fe)||(fe=function(ve,ye){if(typeof pe=="function"&&(ye=pe.call(this,ve,ye)),!se(ye))return ye}),ie[1]=fe,F.apply(w,ie)}}),D[B][N]||r(5)(D[B],N,D[B].valueOf),m(D,"Symbol"),m(Math,"Math",!0),m(h.JSON,"JSON",!0)},function(E,e,r){var h=r(13)("meta"),s=r(6),A=r(3),_=r(1).f,g=0,v=Object.isExtensible||function(){return!0},u=!r(11)(function(){return v(Object.preventExtensions({}))}),f=function(y){_(y,h,{value:{i:"O"+ ++g,w:{}}})},m=function(y,o){if(!s(y))return typeof y=="symbol"?y:(typeof y=="string"?"S":"P")+y;if(!A(y,h)){if(!v(y))return"F";if(!o)return"E";f(y)}return y[h].i},S=function(y,o){if(!A(y,h)){if(!v(y))return!0;if(!o)return!1;f(y)}return y[h].w},i=function(y){return u&&p.NEED&&v(y)&&!A(y,h)&&f(y),y},p=E.exports={KEY:h,NEED:!1,fastKey:m,getWeak:S,onFreeze:i}},function(E,e,r){var h=r(20),s=r(36),A=r(27);E.exports=function(_){var g=h(_),v=s.f;if(v)for(var u=v(_),f=A.f,m=0,S;u.length>m;)f.call(_,S=u[m++])&&g.push(S);return g}},function(E,e,r){var h=r(35);E.exports=Array.isArray||function(A){return h(A)=="Array"}},function(E,e,r){var h=r(7),s=r(37).f,A={}.toString,_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],g=function(v){try{return s(v)}catch{return _.slice()}};E.exports.f=function(u){return _&&A.call(u)=="[object Window]"?g(u):s(h(u))}},function(E,e){},function(E,e,r){r(26)("asyncIterator")},function(E,e,r){r(26)("observable")},function(E,e,r){e.__esModule=!0;var h=r(76),s=u(h),A=r(80),_=u(A),g=r(31),v=u(g);function u(f){return f&&f.__esModule?f:{default:f}}e.default=function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof m>"u"?"undefined":(0,v.default)(m)));f.prototype=(0,_.default)(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(s.default?(0,s.default)(f,m):f.__proto__=m)}},function(E,e,r){E.exports={default:r(77),__esModule:!0}},function(E,e,r){r(78),E.exports=r(4).Object.setPrototypeOf},function(E,e,r){var h=r(9);h(h.S,"Object",{setPrototypeOf:r(79).set})},function(E,e,r){var h=r(6),s=r(10),A=function(_,g){if(s(_),!h(g)&&g!==null)throw TypeError(g+": can't set as prototype!")};E.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(_,g,v){try{v=r(28)(Function.call,r(38).f(Object.prototype,"__proto__").set,2),v(_,[]),g=!(_ instanceof Array)}catch{g=!0}return function(f,m){return A(f,m),g?f.__proto__=m:v(f,m),f}}({},!1):void 0),check:A}},function(E,e,r){E.exports={default:r(81),__esModule:!0}},function(E,e,r){r(82);var h=r(4).Object;E.exports=function(A,_){return h.create(A,_)}},function(E,e,r){var h=r(9);h(h.S,"Object",{create:r(19)})},function(E,e){E.exports=P},function(E,e){E.exports=`<button data-level-selector-button>
  Auto
</button>
<ul>
  <% if (title) { %>
  <li data-title><%= title %></li>
  <% }; %>
  <li><a href="#" data-level-selector-select="-1">AUTO</a></li>
  <% for (var i = 0; i < levels.length; i++) { %>
    <li><a href="#" data-level-selector-select="<%= levels[i].id %>"><%= levels[i].label %></a></li>
  <% }; %>
</ul>
`},function(E,e,r){var h=r(86);typeof h=="string"&&(h=[[E.i,h,""]]),r(88)(h,{singleton:!0}),h.locals&&(E.exports=h.locals)},function(E,e,r){e=E.exports=r(87)(!1),e.push([E.i,`.level_selector[data-level-selector] {
  float: right;
  position: relative;
  height: 100%; }
  .level_selector[data-level-selector] button {
    background-color: transparent;
    color: #fff;
    font-family: Roboto,"Open Sans",Arial,sans-serif;
    -webkit-font-smoothing: antialiased;
    border: none;
    font-size: 12px;
    height: 100%; }
    .level_selector[data-level-selector] button:hover {
      color: #c9c9c9; }
    .level_selector[data-level-selector] button.changing {
      -webkit-animation: pulse 0.5s infinite alternate; }
  .level_selector[data-level-selector] > ul {
    list-style-type: none;
    position: absolute;
    bottom: 100%;
    display: none;
    background-color: rgba(28, 28, 28, 0.9);
    white-space: nowrap; }
  .level_selector[data-level-selector] li {
    font-size: 12px;
    color: #eee; }
    .level_selector[data-level-selector] li[data-title] {
      background-color: #333;
      padding: 8px 25px; }
    .level_selector[data-level-selector] li a {
      color: #eee;
      padding: 5px 10px;
      display: block;
      text-decoration: none; }
      .level_selector[data-level-selector] li a:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff; }
        .level_selector[data-level-selector] li a:hover a {
          color: #fff;
          text-decoration: none; }
    .level_selector[data-level-selector] li.current a {
      color: #2ecc71; }
`,""])},function(E,e){E.exports=function(s){var A=[];return A.toString=function(){return this.map(function(g){var v=r(g,s);return g[2]?"@media "+g[2]+"{"+v+"}":v}).join("")},A.i=function(_,g){typeof _=="string"&&(_=[[null,_,""]]);for(var v={},u=0;u<this.length;u++){var f=this[u][0];typeof f=="number"&&(v[f]=!0)}for(u=0;u<_.length;u++){var m=_[u];(typeof m[0]!="number"||!v[m[0]])&&(g&&!m[2]?m[2]=g:g&&(m[2]="("+m[2]+") and ("+g+")"),A.push(m))}},A};function r(s,A){var _=s[1]||"",g=s[3];if(!g)return _;if(A&&typeof btoa=="function"){var v=h(g),u=g.sources.map(function(f){return"/*# sourceURL="+g.sourceRoot+f+" */"});return[_].concat(u).concat([v]).join(`
`)}return[_].join(`
`)}function h(s){var A=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),_="sourceMappingURL=data:application/json;charset=utf-8;base64,"+A;return"/*# "+_+" */"}},function(E,e){var r={},h=function(l){var t;return function(){return typeof t>"u"&&(t=l.apply(this,arguments)),t}},s=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),A=h(function(){return document.head||document.getElementsByTagName("head")[0]}),_=null,g=0;E.exports=function(l,t){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},typeof t.singleton>"u"&&(t.singleton=s());var n=u(l);return v(n,t),function(b){for(var x=[],a=0;a<n.length;a++){var d=n[a],C=r[d.id];C.refs--,x.push(C)}if(b){var T=u(b);v(T,t)}for(var a=0;a<x.length;a++){var C=x[a];if(C.refs===0){for(var L=0;L<C.parts.length;L++)C.parts[L]();delete r[C.id]}}}};function v(l,t){for(var n=0;n<l.length;n++){var c=l[n],b=r[c.id];if(b){b.refs++;for(var x=0;x<b.parts.length;x++)b.parts[x](c.parts[x]);for(;x<c.parts.length;x++)b.parts.push(S(c.parts[x],t))}else{for(var a=[],x=0;x<c.parts.length;x++)a.push(S(c.parts[x],t));r[c.id]={id:c.id,refs:1,parts:a}}}}function u(l){for(var t=[],n={},c=0;c<l.length;c++){var b=l[c],x=b[0],a=b[1],d=b[2],C=b[3],T={css:a,media:d,sourceMap:C};n[x]?n[x].parts.push(T):t.push(n[x]={id:x,parts:[T]})}return t}function f(){var l=document.createElement("style"),t=A();return l.type="text/css",t.appendChild(l),l}function m(){var l=document.createElement("link"),t=A();return l.rel="stylesheet",t.appendChild(l),l}function S(l,t){var n,c,b;if(t.singleton){var x=g++;n=_||(_=f()),c=p.bind(null,n,x,!1),b=p.bind(null,n,x,!0)}else l.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n=m(),c=o.bind(null,n),b=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(),c=y.bind(null,n),b=function(){n.parentNode.removeChild(n)});return c(l),function(d){if(d){if(d.css===l.css&&d.media===l.media&&d.sourceMap===l.sourceMap)return;c(l=d)}else b()}}var i=function(){var l=[];return function(t,n){return l[t]=n,l.filter(Boolean).join(`
`)}}();function p(l,t,n,c){var b=n?"":c.css;if(l.styleSheet)l.styleSheet.cssText=i(t,b);else{var x=document.createTextNode(b),a=l.childNodes;a[t]&&l.removeChild(a[t]),a.length?l.insertBefore(x,a[t]):l.appendChild(x)}}function y(l,t){var n=t.css,c=t.media;if(t.sourceMap,c&&l.setAttribute("media",c),l.styleSheet)l.styleSheet.cssText=n;else{for(;l.firstChild;)l.removeChild(l.firstChild);l.appendChild(document.createTextNode(n))}}function o(l,t){var n=t.css;t.media;var c=t.sourceMap;c&&(n+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+" */");var b=new Blob([n],{type:"text/css"}),x=l.href;l.href=URL.createObjectURL(b),x&&URL.revokeObjectURL(x)}}])})})(gt);const Cr=Pt(gt.exports);class _r extends Me.exports.Component{createPlayer(){this.player&&this.destroyPlayer(),this.player=new Sr.Player({parent:this.playerNode,plugins:[Cr],source:this.props.src,width:"100%",height:"100%",autoPlay:!0})}destroyPlayer(){this.player&&this.player.destroy(),this.player=null}componentDidMount(){this.createPlayer()}componentWillUnmount(){this.destroyPlayer()}shouldComponentUpdate(Z){return Z.src!==this.props.src&&this.createPlayer(),!1}render(){return Ae("div",{className:"fill-percentage",ref:Z=>this.playerNode=Z})}}const Rr=({channel:G,onAccept:Z})=>at("div",{className:"advanced-stream-warning",children:[Ae("h1",{children:"EMBED NOTICE"}),Ae("p",{children:"This is a custom stream embed. It may contain obscene (NSFW/NSFL) content, or record your IP address. Continue?"}),Ae("span",{children:Ae("strong",{children:Ae("code",{children:G})})}),Ae("br",{}),Ae("button",{type:"button",className:"btn btn-danger",onClick:Z,children:"Continue"})]}),mt=({acceptedWarning:G,acceptWarning:Z,channel:P,children:E})=>G?E:Ae(Rr,{onAccept:Z,channel:P});mt.propTypes={acceptedWarning:le.exports.bool.isRequired,acceptWarning:le.exports.func.isRequired,channel:le.exports.string.isRequired,children:le.exports.node};const st=Ot(It("acceptedWarning","acceptWarning",!1),jt({acceptWarning:({acceptWarning:G})=>()=>G(!0)}))(mt),Lr=require("../util/is-valid-advanced-url")(window.URL),Pr=(G,Z)=>{switch(Z){case"angelthump":return`https://player.angelthump.com/?channel=${G}`;case"facebook":return`https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/facebook/videos/${G}/&show_text=0`;case"smashcast":return`https://www.smashcast.tv/embed/${G}?popout=true&autoplay=true`;case"twitch-vod":return`https://player.twitch.tv/?video=v${G}&parent=${location.hostname}`;case"twitch":return`https://player.twitch.tv/?channel=${G}&parent=${location.hostname}`;case"ustream":return`https://www.ustream.tv/embed/${G}?autoplay=true&html5ui=true`;case"youtube-playlist":return`https://www.youtube-nocookie.com/embed/videoseries?list=${G}&autoplay=1`;case"youtube":return`https://www.youtube-nocookie.com/embed/${G}?autoplay=1`;default:return null}},Or=({channel:G,service:Z})=>{if(Z==="advanced")return Lr(G)?Ae(st,{channel:G,children:Ae(Tr,{channel:G})}):Ae(Dt,{to:"/"});if(Z==="m3u8")return Ae(st,{channel:G,children:Ae(_r,{src:G})});const P=Pr(G,Z);return P?Ae("iframe",{width:"100%",height:"100%",marginHeight:"0",marginWidth:"0",frameBorder:"0",scrolling:"no",seamless:!0,allow:"autoplay; fullscreen",allowFullScreen:!0,src:P}):Ae("div",{className:"jiggle-background",style:{width:"100%",height:"100%"}})},yt=({history:G,service:Z,channel:P,setAfk:E})=>at(Mt,{history:G,children:[Ae(Ge,{element:document,onActive:()=>E(!1),onIdle:()=>E(!0),timeout:AFK_TIMEOUT}),Ae(Or,{channel:P,service:Z})]});yt.propTypes={history:le.exports.object.isRequired,service:le.exports.string.isRequired,channel:le.exports.string.isRequired,setAfk:le.exports.func.isRequired};const Dr=kt(Ft(G=>({isFetchingProfile:G.self.profile.isFetching}),{setAfk:Nt,setStream:Bt,fetchProfileIfLoggedIn:Ut,showFooter:Gt}),ot({streamer:le.exports.string,service:le.exports.string.isRequired,channel:le.exports.string.isRequired,setAfk:le.exports.func.isRequired,setStream:le.exports.func.isRequired}),wt({componentDidMount(){const{channel:G,service:Z,streamer:P}=this.props;if(this.props.showFooter(!1),P){document.title=`${P} - Strims`,this.props.setStream(P),this.props.fetchProfileIfLoggedIn();return}document.title=`${G} on ${Z} - Strims`,this.props.setStream(G,Z),this.props.fetchProfileIfLoggedIn()},componentDidUpdate(G){const{channel:Z,service:P,streamer:E}=this.props;if(G.channel!==Z||G.service!==P||G.streamer!==E){if(E)return this.props.setStream(E);this.props.setStream(Z,P)}}}),dt(({isFetchingProfile:G})=>G,lt,G=>G))(yt);export{yt as Stream,Dr as default};
