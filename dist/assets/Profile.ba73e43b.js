import{c as F,j as f,M as ue,a as b,b as de,S as he,C as A,p as h}from"./index.5179c8da.js";import{c as me,d as pe,a as be,f as ve,u as ye}from"./lifecycle.d93ed3aa.js";import{i as ge}from"./idx.26d2380e.js";var xe=typeof F=="object"&&F&&F.Object===Object&&F,Se=xe,Oe=Se,Ne=typeof self=="object"&&self&&self.Object===Object&&self,we=Oe||Ne||Function("return this")(),je=we,_e=je,$e=_e.Symbol,D=$e;function Te(r,e){for(var a=-1,t=r==null?0:r.length,n=Array(t);++a<t;)n[a]=e(r[a],a,r);return n}var Fe=Te,Ae=Array.isArray,Pe=Ae,Q=D,K=Object.prototype,Ce=K.hasOwnProperty,Ee=K.toString,w=Q?Q.toStringTag:void 0;function Ie(r){var e=Ce.call(r,w),a=r[w];try{r[w]=void 0;var t=!0}catch{}var n=Ee.call(r);return t&&(e?r[w]=a:delete r[w]),n}var Re=Ie,ke=Object.prototype,De=ke.toString;function Le(r){return De.call(r)}var Ue=Le,H=D,Qe=Re,He=Ue,Ve="[object Null]",Me="[object Undefined]",V=H?H.toStringTag:void 0;function ze(r){return r==null?r===void 0?Me:Ve:V&&V in Object(r)?Qe(r):He(r)}var Ge=ze;function Be(r){return r!=null&&typeof r=="object"}var qe=Be,We=Ge,Je=qe,Ke="[object Symbol]";function Ze(r){return typeof r=="symbol"||Je(r)&&We(r)==Ke}var Ye=Ze,M=D,Xe=Fe,er=Pe,rr=Ye,ar=1/0,z=M?M.prototype:void 0,G=z?z.toString:void 0;function Z(r){if(typeof r=="string")return r;if(er(r))return Xe(r,Z)+"";if(rr(r))return G?G.call(r):"";var e=r+"";return e=="0"&&1/r==-ar?"-0":e}var Y=Z,tr=/\s/;function nr(r){for(var e=r.length;e--&&tr.test(r.charAt(e)););return e}var ir=nr,lr=ir,or=/^\s+/;function cr(r){return r&&r.slice(0,lr(r)+1).replace(or,"")}var sr=cr;function fr(r,e,a){var t=-1,n=r.length;e<0&&(e=-e>n?0:n+e),a=a>n?n:a,a<0&&(a+=n),n=e>a?0:a-e>>>0,e>>>=0;for(var i=Array(n);++t<n;)i[t]=r[t+e];return i}var ur=fr,dr=ur;function hr(r,e,a){var t=r.length;return a=a===void 0?t:a,!e&&a>=t?r:dr(r,e,a)}var mr=hr;function pr(r,e,a,t){for(var n=r.length,i=a+(t?1:-1);t?i--:++i<n;)if(e(r[i],i,r))return i;return-1}var br=pr;function vr(r){return r!==r}var yr=vr;function gr(r,e,a){for(var t=a-1,n=r.length;++t<n;)if(r[t]===e)return t;return-1}var xr=gr,Sr=br,Or=yr,Nr=xr;function wr(r,e,a){return e===e?Nr(r,e,a):Sr(r,Or,a)}var X=wr,jr=X;function _r(r,e){for(var a=r.length;a--&&jr(e,r[a],0)>-1;);return a}var $r=_r,Tr=X;function Fr(r,e){for(var a=-1,t=r.length;++a<t&&Tr(e,r[a],0)>-1;);return a}var Ar=Fr;function Pr(r){return r.split("")}var Cr=Pr,Er="\\ud800-\\udfff",Ir="\\u0300-\\u036f",Rr="\\ufe20-\\ufe2f",kr="\\u20d0-\\u20ff",Dr=Ir+Rr+kr,Lr="\\ufe0e\\ufe0f",Ur="\\u200d",Qr=RegExp("["+Ur+Er+Dr+Lr+"]");function Hr(r){return Qr.test(r)}var Vr=Hr,ee="\\ud800-\\udfff",Mr="\\u0300-\\u036f",zr="\\ufe20-\\ufe2f",Gr="\\u20d0-\\u20ff",Br=Mr+zr+Gr,qr="\\ufe0e\\ufe0f",Wr="["+ee+"]",E="["+Br+"]",I="\\ud83c[\\udffb-\\udfff]",Jr="(?:"+E+"|"+I+")",re="[^"+ee+"]",ae="(?:\\ud83c[\\udde6-\\uddff]){2}",te="[\\ud800-\\udbff][\\udc00-\\udfff]",Kr="\\u200d",ne=Jr+"?",ie="["+qr+"]?",Zr="(?:"+Kr+"(?:"+[re,ae,te].join("|")+")"+ie+ne+")*",Yr=ie+ne+Zr,Xr="(?:"+[re+E+"?",E,ae,te,Wr].join("|")+")",ea=RegExp(I+"(?="+I+")|"+Xr+Yr,"g");function ra(r){return r.match(ea)||[]}var aa=ra,ta=Cr,na=Vr,ia=aa;function la(r){return na(r)?ia(r):ta(r)}var oa=la,ca=Y;function sa(r){return r==null?"":ca(r)}var fa=sa,ua=Y,da=sr,ha=mr,ma=$r,pa=Ar,B=oa,ba=fa;function va(r,e,a){if(r=ba(r),r&&(a||e===void 0))return da(r);if(!r||!(e=ua(e)))return r;var t=B(r),n=B(e),i=pa(t,n),o=ma(t,n)+1;return ha(t,i,o).join("")}var ya=va;const ga=ya;var C=Object.prototype.hasOwnProperty,O=Array.isArray,x=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),xa=function(e){for(;e.length>1;){var a=e.pop(),t=a.obj[a.prop];if(O(t)){for(var n=[],i=0;i<t.length;++i)typeof t[i]<"u"&&n.push(t[i]);a.obj[a.prop]=n}}},le=function(e,a){for(var t=a&&a.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(t[n]=e[n]);return t},Sa=function r(e,a,t){if(!a)return e;if(typeof a!="object"){if(O(e))e.push(a);else if(e&&typeof e=="object")(t&&(t.plainObjects||t.allowPrototypes)||!C.call(Object.prototype,a))&&(e[a]=!0);else return[e,a];return e}if(!e||typeof e!="object")return[e].concat(a);var n=e;return O(e)&&!O(a)&&(n=le(e,t)),O(e)&&O(a)?(a.forEach(function(i,o){if(C.call(e,o)){var l=e[o];l&&typeof l=="object"&&i&&typeof i=="object"?e[o]=r(l,i,t):e.push(i)}else e[o]=i}),e):Object.keys(a).reduce(function(i,o){var l=a[o];return C.call(i,o)?i[o]=r(i[o],l,t):i[o]=l,i},n)},Oa=function(e,a){return Object.keys(a).reduce(function(t,n){return t[n]=a[n],t},e)},Na=function(r,e,a){var t=r.replace(/\+/g," ");if(a==="iso-8859-1")return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch{return t}},wa=function(e,a,t){if(e.length===0)return e;var n=e;if(typeof e=="symbol"?n=Symbol.prototype.toString.call(e):typeof e!="string"&&(n=String(e)),t==="iso-8859-1")return escape(n).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var i="",o=0;o<n.length;++o){var l=n.charCodeAt(o);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122){i+=n.charAt(o);continue}if(l<128){i=i+x[l];continue}if(l<2048){i=i+(x[192|l>>6]+x[128|l&63]);continue}if(l<55296||l>=57344){i=i+(x[224|l>>12]+x[128|l>>6&63]+x[128|l&63]);continue}o+=1,l=65536+((l&1023)<<10|n.charCodeAt(o)&1023),i+=x[240|l>>18]+x[128|l>>12&63]+x[128|l>>6&63]+x[128|l&63]}return i},ja=function(e){for(var a=[{obj:{o:e},prop:"o"}],t=[],n=0;n<a.length;++n)for(var i=a[n],o=i.obj[i.prop],l=Object.keys(o),c=0;c<l.length;++c){var u=l[c],d=o[u];typeof d=="object"&&d!==null&&t.indexOf(d)===-1&&(a.push({obj:o,prop:u}),t.push(d))}return xa(a),e},_a=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},$a=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Ta=function(e,a){return[].concat(e,a)},L={arrayToObject:le,assign:Oa,combine:Ta,compact:ja,decode:Na,encode:wa,isBuffer:$a,isRegExp:_a,merge:Sa},Fa=String.prototype.replace,Aa=/%20/g,Pa=L,q={RFC1738:"RFC1738",RFC3986:"RFC3986"},oe=Pa.assign({default:q.RFC3986,formatters:{RFC1738:function(r){return Fa.call(r,Aa,"+")},RFC3986:function(r){return String(r)}}},q),ce=L,j=oe,Ca=Object.prototype.hasOwnProperty,W={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,a){return e+"["+a+"]"},repeat:function(e){return e}},N=Array.isArray,Ea=Array.prototype.push,R=function(r,e){Ea.apply(r,N(e)?e:[e])},Ia=Date.prototype.toISOString,J=j.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ce.encode,encodeValuesOnly:!1,format:J,formatter:j.formatters[J],indices:!1,serializeDate:function(e){return Ia.call(e)},skipNulls:!1,strictNullHandling:!1},Ra=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ka=function r(e,a,t,n,i,o,l,c,u,d,v,y,g){var s=e;if(typeof l=="function"?s=l(a,s):s instanceof Date?s=d(s):t==="comma"&&N(s)&&(s=s.join(",")),s===null){if(n)return o&&!y?o(a,p.encoder,g,"key"):a;s=""}if(Ra(s)||ce.isBuffer(s)){if(o){var fe=y?a:o(a,p.encoder,g,"key");return[v(fe)+"="+v(o(s,p.encoder,g,"value"))]}return[v(a)+"="+v(String(s))]}var $=[];if(typeof s>"u")return $;var T;if(N(l))T=l;else{var U=Object.keys(s);T=c?U.sort(c):U}for(var P=0;P<T.length;++P){var S=T[P];i&&s[S]===null||(N(s)?R($,r(s[S],typeof t=="function"?t(a,S):a,t,n,i,o,l,c,u,d,v,y,g)):R($,r(s[S],a+(u?"."+S:"["+S+"]"),t,n,i,o,l,c,u,d,v,y,g)))}return $},Da=function(e){if(!e)return p;if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var a=e.charset||p.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=j.default;if(typeof e.format<"u"){if(!Ca.call(j.formatters,e.format))throw new TypeError("Unknown format option provided.");t=e.format}var n=j.formatters[t],i=p.filter;return(typeof e.filter=="function"||N(e.filter))&&(i=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:p.addQueryPrefix,allowDots:typeof e.allowDots>"u"?p.allowDots:!!e.allowDots,charset:a,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:p.charsetSentinel,delimiter:typeof e.delimiter>"u"?p.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:p.encode,encoder:typeof e.encoder=="function"?e.encoder:p.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:p.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:p.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:p.strictNullHandling}},La=function(r,e){var a=r,t=Da(e),n,i;typeof t.filter=="function"?(i=t.filter,a=i("",a)):N(t.filter)&&(i=t.filter,n=i);var o=[];if(typeof a!="object"||a===null)return"";var l;e&&e.arrayFormat in W?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var c=W[l];n||(n=Object.keys(a)),t.sort&&n.sort(t.sort);for(var u=0;u<n.length;++u){var d=n[u];t.skipNulls&&a[d]===null||R(o,ka(a[d],d,c,t.strictNullHandling,t.skipNulls,t.encode?t.encoder:null,t.filter,t.sort,t.allowDots,t.serializeDate,t.formatter,t.encodeValuesOnly,t.charset))}var v=o.join(t.delimiter),y=t.addQueryPrefix===!0?"?":"";return t.charsetSentinel&&(t.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),v.length>0?y+v:""},_=L,k=Object.prototype.hasOwnProperty,Ua=Array.isArray,m={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:_.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Qa=function(r){return r.replace(/&#(\d+);/g,function(e,a){return String.fromCharCode(parseInt(a,10))})},Ha="utf8=%26%2310003%3B",Va="utf8=%E2%9C%93",Ma=function(e,a){var t={},n=a.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=a.parameterLimit===1/0?void 0:a.parameterLimit,o=n.split(a.delimiter,i),l=-1,c,u=a.charset;if(a.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===Va?u="utf-8":o[c]===Ha&&(u="iso-8859-1"),l=c,c=o.length);for(c=0;c<o.length;++c)if(c!==l){var d=o[c],v=d.indexOf("]="),y=v===-1?d.indexOf("="):v+1,g,s;y===-1?(g=a.decoder(d,m.decoder,u,"key"),s=a.strictNullHandling?null:""):(g=a.decoder(d.slice(0,y),m.decoder,u,"key"),s=a.decoder(d.slice(y+1),m.decoder,u,"value")),s&&a.interpretNumericEntities&&u==="iso-8859-1"&&(s=Qa(s)),s&&typeof s=="string"&&a.comma&&s.indexOf(",")>-1&&(s=s.split(",")),d.indexOf("[]=")>-1&&(s=Ua(s)?[s]:s),k.call(t,g)?t[g]=_.combine(t[g],s):t[g]=s}return t},za=function(r,e,a){for(var t=e,n=r.length-1;n>=0;--n){var i,o=r[n];if(o==="[]"&&a.parseArrays)i=[].concat(t);else{i=a.plainObjects?Object.create(null):{};var l=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,c=parseInt(l,10);!a.parseArrays&&l===""?i={0:t}:!isNaN(c)&&o!==l&&String(c)===l&&c>=0&&a.parseArrays&&c<=a.arrayLimit?(i=[],i[c]=t):i[l]=t}t=i}return t},Ga=function(e,a,t){if(!!e){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,l=t.depth>0&&i.exec(n),c=l?n.slice(0,l.index):n,u=[];if(c){if(!t.plainObjects&&k.call(Object.prototype,c)&&!t.allowPrototypes)return;u.push(c)}for(var d=0;t.depth>0&&(l=o.exec(n))!==null&&d<t.depth;){if(d+=1,!t.plainObjects&&k.call(Object.prototype,l[1].slice(1,-1))&&!t.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+n.slice(l.index)+"]"),za(u,a,t)}},Ba=function(e){if(!e)return m;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var a=typeof e.charset>"u"?m.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?m.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:m.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:m.arrayLimit,charset:a,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:m.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:m.comma,decoder:typeof e.decoder=="function"?e.decoder:m.decoder,delimiter:typeof e.delimiter=="string"||_.isRegExp(e.delimiter)?e.delimiter:m.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:m.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:m.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:m.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:m.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:m.strictNullHandling}},qa=function(r,e){var a=Ba(e);if(r===""||r===null||typeof r>"u")return a.plainObjects?Object.create(null):{};for(var t=typeof r=="string"?Ma(r,a):r,n=a.plainObjects?Object.create(null):{},i=Object.keys(t),o=0;o<i.length;++o){var l=i[o],c=Ga(l,t[l],a);n=_.merge(n,c,a)}return _.compact(n)},Wa=La,Ja=qa,Ka=oe,Za={formats:Ka,parse:Ja,stringify:Wa};const Ya=Za,se=({history:r,profile:e,updateProfile:a,isUsernameSet:t,defaultUsername:n})=>f(ue,{history:r,children:b("div",{className:"container",children:[f("h1",{className:"mt-4 text-center",children:"Settings"}),e.isFetching?f("div",{className:"h3 text-center",children:"LOADING..."}):null,e.data?b("form",{className:"form-horizontal",onSubmit:i=>{i.preventDefault();const o={...e.data,service:i.target.elements.service.value,channel:i.target.elements.channel.value,stream_path:i.target.elements.stream_path.value,username:i.target.elements.username.value,enable_public_state:i.target.elements.enable_public_state.checked,left_chat:i.target.elements.left_chat.checked,show_hidden:i.target.elements.show_hidden.checked,show_dgg_chat:i.target.elements.show_dgg_chat.checked};!o.channel||!o.channel.length||a(o)},children:[t?null:b("div",{className:"form-group",children:[f("div",{className:"col-sm-2"}),f("div",{className:"col-sm-10",children:f("strong",{className:"profile-first-login-message",children:"Save your profile to finish logging in."})})]}),b("div",{className:de("form-group",{"form-group-highlight":!t}),children:[f("label",{htmlFor:"profile-username",children:"Username"}),f("input",{className:"form-control",id:"profile-username",type:"text",name:"username",defaultValue:e.data.username||n}),f("small",{className:"form-text text-muted",children:"Choose carefully, your username cannot be changed!"})]}),b("div",{className:"form-group",children:[f("label",{htmlFor:"profile-channel",children:"Stream Path"}),f("input",{className:"form-control",id:"profile-stream-path",type:"text",name:"stream_path",defaultValue:e.data.stream_path}),b("small",{className:"form-text text-muted",children:[location.origin,"/",f("strong",{children:"my_stream_path"})]})]}),b("div",{className:"form-row",children:[b("div",{className:"form-group col-md-6",children:[f("label",{htmlFor:"profile-service-select",children:"Streaming Service"}),f(he,{id:"profile-service-select",defaultValue:e.data.service})]}),b("div",{className:"form-group col-md-6",children:[f("label",{htmlFor:"profile-channel",children:"Channel/Video ID"}),f("input",{className:"form-control",id:"profile-channel",type:"text",name:"channel",defaultValue:e.data.channel})]})]}),f("div",{className:"form-group",children:b("div",{className:"form-check",children:[f(A,{id:"profile-enablepublicstate",name:"enable_public_state",defaultChecked:e.data.enable_public_state}),f("label",{htmlFor:"profile-enablepublicstate",className:"form-check-label",children:"Show what I\u2018m watching in chat"})]})}),f("div",{className:"form-group",children:b("div",{className:"form-check",children:[f(A,{id:"profile-leftchat",name:"left_chat",defaultChecked:e.data.left_chat}),f("label",{htmlFor:"profile-leftchat",className:"form-check-label",children:"Use left chat"})]})}),f("div",{className:"form-group",children:b("div",{className:"form-check",children:[f(A,{id:"profile-showhidden",name:"show_hidden",defaultChecked:e.data.show_hidden}),f("label",{htmlFor:"profile-showhidden",className:"form-check-label",children:"Show hidden streams"})]})}),f("div",{className:"form-group",children:b("div",{className:"form-check",children:[f(A,{id:"profile-showdgg",name:"show_dgg_chat",defaultChecked:e.data.show_dgg_chat}),f("label",{htmlFor:"profile-showdgg",className:"form-check-label",children:"Show DGG chat with all streams"})]})}),f("button",{type:"submit",className:"btn btn-primary",disabled:e.isFetching,children:"Save Changes"})]}):null,e.err?b("div",{className:"alert alert-danger",role:"alert",children:["Error: ",e.err.message||"Failed to fetch profile"]}):null]})});se.propTypes={history:h.exports.object.isRequired,profile:h.exports.shape({data:h.exports.shape({channel:h.exports.string,left_chat:h.exports.bool,service:h.exports.string,enable_public_state:h.exports.bool,show_dgg_chat:h.exports.bool,show_hidden:h.exports.bool,stream_path:h.exports.string,username:h.exports.string}),err:h.exports.any,isFetching:h.exports.bool,isUsernameSet:h.exports.bool,defaultUsername:h.exports.string}),updateProfile:h.exports.func.isRequired,isUsernameSet:h.exports.bool,defaultUsername:h.exports.string.isRequired};function Xa(r){return{fetchProfile(e){return r(ve(e,!0))},updateProfile(e){return r(ye(e))}}}const tt=me(be((r,e)=>({profile:r.self.profile,isUsernameSet:Boolean(ge(r,a=>a.self.profile.data.username)),defaultUsername:Ya.parse(ga(e.location.search,"?")).username||""}),Xa),pe({componentDidMount(){this.props.fetchProfile(this.props.history)}}))(se);export{tt as default};
